{"version":3,"file":"RpcError.cjs","sources":["../../../src/errors/RpcError.ts"],"sourcesContent":["import { SendTransactionError, TransactionError } from '@solana/web3.js';\nimport type { ConfirmTransactionResponse } from '@/plugins/rpcModule';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n  MetaplexErrorOptions,\n} from './MetaplexError';\n\n/** @group Errors */\nexport class RpcError extends MetaplexError {\n  constructor(input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `rpc.${input.key}`,\n      source: 'rpc',\n    });\n  }\n}\n\n/** @group Errors */\nexport class FailedToSendTransactionError extends RpcError {\n  constructor(\n    cause: Error,\n    options?: Omit<MetaplexErrorOptions, 'cause' | 'logs'>\n  ) {\n    super({\n      key: 'failed_to_send_transaction',\n      title: 'Failed to Send Transaction',\n      problem: `The transaction could not be sent successfully to the network.`,\n      solution: 'Check the error below for more information.',\n      options: {\n        ...options,\n        logs: (cause as SendTransactionError).logs,\n        cause,\n      },\n    });\n  }\n\n  public asSendTransactionError(): SendTransactionError {\n    return this.cause as SendTransactionError;\n  }\n\n  public get error() {\n    return this.asSendTransactionError().message;\n  }\n\n  public get errorLogs() {\n    return this.asSendTransactionError().logs ?? [];\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionError extends RpcError {\n  constructor(cause: Error, options?: Omit<MetaplexErrorOptions, 'cause'>) {\n    super({\n      key: 'failed_to_confirm_transaction',\n      title: 'Failed to Confirm Transaction',\n      problem: `The transaction could not be confirmed.`,\n      solution: 'Check the error below for more information.',\n      options: { ...options, cause },\n    });\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionWithResponseError extends FailedToConfirmTransactionError {\n  public readonly response: ConfirmTransactionResponse;\n\n  constructor(response: ConfirmTransactionResponse) {\n    const getMessage = (error: TransactionError | null): string => {\n      if (!error) return 'Unknown error';\n      if (typeof error === 'string') return error;\n      try {\n        return JSON.stringify(error);\n      } catch (error) {\n        return 'Unknown error';\n      }\n    };\n\n    super(new Error(getMessage(response.value.err)));\n    this.response = response;\n  }\n\n  public get error(): TransactionError {\n    return this.response.value.err ?? 'Unknown error';\n  }\n}\n"],"names":["RpcError","MetaplexError","constructor","input","key","source","FailedToSendTransactionError","cause","options","title","problem","solution","logs","asSendTransactionError","error","message","errorLogs","FailedToConfirmTransactionError","FailedToConfirmTransactionWithResponseError","response","getMessage","JSON","stringify","Error","value","err"],"mappings":";;;;;;AAQA;;AACO,MAAMA,QAAN,SAAuBC,2BAAvB,CAAqC;EAC1CC,WAAW,CAACC,KAAD,EAAyC;IAClD,KAAM,CAAA,EACJ,GAAGA,KADC;AAEJC,MAAAA,GAAG,EAAG,CAAA,IAAA,EAAMD,KAAK,CAACC,GAAI,CAFlB,CAAA;AAGJC,MAAAA,MAAM,EAAE,KAAA;KAHV,CAAA,CAAA;AAKD,GAAA;;AAPyC,CAAA;AAU5C;;AACO,MAAMC,4BAAN,SAA2CN,QAA3C,CAAoD;AACzDE,EAAAA,WAAW,CACTK,KADS,EAETC,OAFS,EAGT;IACA,KAAM,CAAA;AACJJ,MAAAA,GAAG,EAAE,4BADD;AAEJK,MAAAA,KAAK,EAAE,4BAFH;AAGJC,MAAAA,OAAO,EAAG,CAHN,8DAAA,CAAA;AAIJC,MAAAA,QAAQ,EAAE,6CAJN;MAKJH,OAAO,EAAE,EACP,GAAGA,OADI;QAEPI,IAAI,EAAGL,KAAD,CAAgCK,IAF/B;AAGPL,QAAAA,KAAAA;AAHO,OAAA;KALX,CAAA,CAAA;AAWD,GAAA;;AAEMM,EAAAA,sBAAsB,GAAyB;AACpD,IAAA,OAAO,KAAKN,KAAZ,CAAA;AACD,GAAA;;AAEe,EAAA,IAALO,KAAK,GAAG;IACjB,OAAO,IAAA,CAAKD,sBAAL,EAAA,CAA8BE,OAArC,CAAA;AACD,GAAA;;AAEmB,EAAA,IAATC,SAAS,GAAG;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACrB,IAAA,OAAA,CAAA,qBAAA,GAAO,IAAKH,CAAAA,sBAAL,EAA8BD,CAAAA,IAArC,yEAA6C,EAA7C,CAAA;AACD,GAAA;;AA5BwD,CAAA;AA+B3D;;AACO,MAAMK,+BAAN,SAA8CjB,QAA9C,CAAuD;AAC5DE,EAAAA,WAAW,CAACK,KAAD,EAAeC,OAAf,EAA8D;IACvE,KAAM,CAAA;AACJJ,MAAAA,GAAG,EAAE,+BADD;AAEJK,MAAAA,KAAK,EAAE,+BAFH;AAGJC,MAAAA,OAAO,EAAG,CAHN,uCAAA,CAAA;AAIJC,MAAAA,QAAQ,EAAE,6CAJN;MAKJH,OAAO,EAAE,EAAE,GAAGA,OAAL;AAAcD,QAAAA,KAAAA;AAAd,OAAA;KALX,CAAA,CAAA;AAOD,GAAA;;AAT2D,CAAA;AAY9D;;AACO,MAAMW,2CAAN,SAA0DD,+BAA1D,CAA0F;EAG/Ff,WAAW,CAACiB,QAAD,EAAuC;IAChD,MAAMC,UAAU,GAAIN,KAAD,IAA4C;AAC7D,MAAA,IAAI,CAACA,KAAL,EAAY,OAAO,eAAP,CAAA;AACZ,MAAA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B,OAAOA,KAAP,CAAA;;MAC/B,IAAI;AACF,QAAA,OAAOO,IAAI,CAACC,SAAL,CAAeR,KAAf,CAAP,CAAA;OADF,CAEE,OAAOA,KAAP,EAAc;AACd,QAAA,OAAO,eAAP,CAAA;AACD,OAAA;KAPH,CAAA;;IAUA,KAAM,CAAA,IAAIS,KAAJ,CAAUH,UAAU,CAACD,QAAQ,CAACK,KAAT,CAAeC,GAAhB,CAApB,CAAN,CAAA,CAAA;IACA,IAAKN,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;AACD,GAAA;;AAEe,EAAA,IAALL,KAAK,GAAqB;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACnC,IAAA,OAAA,CAAA,qBAAA,GAAO,KAAKK,QAAL,CAAcK,KAAd,CAAoBC,GAA3B,yEAAkC,eAAlC,CAAA;AACD,GAAA;;AApB8F;;;;;;;"}