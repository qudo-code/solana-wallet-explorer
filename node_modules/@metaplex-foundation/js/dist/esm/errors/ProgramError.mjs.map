{"version":3,"file":"ProgramError.mjs","sources":["../../../src/errors/ProgramError.ts"],"sourcesContent":["import { Program } from '@/types';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n  MetaplexErrorOptions,\n} from './MetaplexError';\n\ntype UnderlyingProgramError = Error & { code?: number; logs?: string[] };\n\n/** @group Errors */\nexport class ProgramError extends MetaplexError {\n  public program: Program;\n\n  constructor(program: Program, input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `program.${input.key}`,\n      title: `${program.name} > ${input.title}`,\n      source: 'program',\n      sourceDetails: `${program.name} [${program.address.toBase58()}]`,\n    });\n    this.program = program;\n  }\n}\n\n/** @group Errors */\nexport class ParsedProgramError extends ProgramError {\n  constructor(\n    program: Program,\n    cause: UnderlyingProgramError,\n    options?: Omit<MetaplexErrorOptions, 'cause' | 'logs'>\n  ) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      key: 'parsed_program_error',\n      title: cause.message,\n      problem:\n        `The program [${program.name}] ` +\n        `at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} ` +\n        `that translates to \"${cause.message}\".`,\n      solution: 'Check the error message provided by the program.',\n      options: {\n        ...options,\n        logs: cause.logs,\n        cause,\n      },\n    });\n  }\n}\n\n/** @group Errors */\nexport class UnknownProgramError extends ProgramError {\n  constructor(\n    program: Program,\n    cause: UnderlyingProgramError,\n    options?: Omit<MetaplexErrorOptions, 'cause' | 'logs'>\n  ) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      key: 'unknown_program_error',\n      title: 'Unknown Program Error',\n      problem:\n        `The program [${\n          program.name\n        }] at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} that is not recognized by the programs registered by the SDK.`,\n      solution:\n        'Unfortunately, you will need to check the unparsed ' +\n        'error below to investigate what went wrong. ' +\n        'To get more helpful error messages, ensure the program that failed is ' +\n        'registered by the SDK and provides an \"errorResolver\" method.',\n      options: {\n        ...options,\n        logs: cause.logs,\n        cause,\n      },\n    });\n  }\n}\n"],"names":["ProgramError","MetaplexError","constructor","program","input","key","title","name","source","sourceDetails","address","toBase58","ParsedProgramError","cause","options","ofCode","code","message","problem","solution","logs","UnknownProgramError"],"mappings":";;AASA;AACO,MAAMA,YAAN,SAA2BC,aAA3B,CAAyC;AAG9CC,EAAAA,WAAW,CAACC,OAAD,EAAmBC,KAAnB,EAA2D;IACpE,KAAM,CAAA,EACJ,GAAGA,KADC;AAEJC,MAAAA,GAAG,EAAG,CAAA,QAAA,EAAUD,KAAK,CAACC,GAAI,CAFtB,CAAA;MAGJC,KAAK,EAAG,GAAEH,OAAO,CAACI,IAAK,CAAKH,GAAAA,EAAAA,KAAK,CAACE,KAAM,CAHpC,CAAA;AAIJE,MAAAA,MAAM,EAAE,SAJJ;MAKJC,aAAa,EAAG,CAAEN,EAAAA,OAAO,CAACI,IAAK,CAAIJ,EAAAA,EAAAA,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,CAAA,CAAA;KALhE,CAAA,CAAA;IAOA,IAAKR,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACD,GAAA;;AAZ6C,CAAA;AAehD;;AACO,MAAMS,kBAAN,SAAiCZ,YAAjC,CAA8C;AACnDE,EAAAA,WAAW,CACTC,OADS,EAETU,KAFS,EAGTC,OAHS,EAIT;AACA,IAAA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAN,GAAc,CAAYH,UAAAA,EAAAA,KAAK,CAACG,IAAK,CAArC,CAAA,CAAA,GAA0C,EAAzD,CAAA;AACA,IAAA,KAAA,CAAMb,OAAN,EAAe;AACbE,MAAAA,GAAG,EAAE,sBADQ;MAEbC,KAAK,EAAEO,KAAK,CAACI,OAFA;MAGbC,OAAO,EACJ,CAAef,aAAAA,EAAAA,OAAO,CAACI,IAAK,IAA7B,GACC,CAAA,YAAA,EAAcJ,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,EAAA,CAD1C,GAEC,CAAA,eAAA,EAAiBI,MAAO,CAAA,CAAA,CAFzB,GAGC,CAAsBF,oBAAAA,EAAAA,KAAK,CAACI,OAAQ,CAP1B,EAAA,CAAA;AAQbE,MAAAA,QAAQ,EAAE,kDARG;MASbL,OAAO,EAAE,EACP,GAAGA,OADI;QAEPM,IAAI,EAAEP,KAAK,CAACO,IAFL;AAGPP,QAAAA,KAAAA;AAHO,OAAA;KATX,CAAA,CAAA;AAeD,GAAA;;AAtBkD,CAAA;AAyBrD;;AACO,MAAMQ,mBAAN,SAAkCrB,YAAlC,CAA+C;AACpDE,EAAAA,WAAW,CACTC,OADS,EAETU,KAFS,EAGTC,OAHS,EAIT;AACA,IAAA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAN,GAAc,CAAYH,UAAAA,EAAAA,KAAK,CAACG,IAAK,CAArC,CAAA,CAAA,GAA0C,EAAzD,CAAA;AACA,IAAA,KAAA,CAAMb,OAAN,EAAe;AACbE,MAAAA,GAAG,EAAE,uBADQ;AAEbC,MAAAA,KAAK,EAAE,uBAFM;AAGbY,MAAAA,OAAO,EACJ,CACCf,aAAAA,EAAAA,OAAO,CAACI,IACT,iBAAgBJ,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,EAAA,CAF5C,GAGC,CAAA,eAAA,EAAiBI,MAAO,CAPd,8DAAA,CAAA;AAQbI,MAAAA,QAAQ,EACN,qDACA,GAAA,8CADA,GAEA,wEAFA,GAGA,+DAZW;MAabL,OAAO,EAAE,EACP,GAAGA,OADI;QAEPM,IAAI,EAAEP,KAAK,CAACO,IAFL;AAGPP,QAAAA,KAAAA;AAHO,OAAA;KAbX,CAAA,CAAA;AAmBD,GAAA;;AA1BmD;;;;"}