{"version":3,"file":"pdas.mjs","sources":["../../../../src/plugins/auctionHouseModule/pdas.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { Buffer } from 'buffer';\nimport { BigNumber, Pda } from '@/types';\nimport { Option } from '@/utils';\nimport { AuctionHouseProgram } from './program';\n\n/** @group Pdas */\nexport const findAuctionHousePda = (\n  creator: PublicKey,\n  treasuryMint: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    creator.toBuffer(),\n    treasuryMint.toBuffer(),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctioneerPda = (\n  auctionHouse: PublicKey,\n  auctioneerAuthority: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auctioneer', 'utf8'),\n    auctionHouse.toBuffer(),\n    auctioneerAuthority.toBuffer(),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctionHouseProgramAsSignerPda = (\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    Buffer.from('signer', 'utf8'),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctionHouseFeePda = (\n  auctionHouse: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    auctionHouse.toBuffer(),\n    Buffer.from('fee_payer', 'utf8'),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctionHouseTreasuryPda = (\n  auctionHouse: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    auctionHouse.toBuffer(),\n    Buffer.from('treasury', 'utf8'),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctionHouseBuyerEscrowPda = (\n  auctionHouse: PublicKey,\n  buyer: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    auctionHouse.toBuffer(),\n    buyer.toBuffer(),\n  ]);\n};\n\n/** @group Pdas */\nexport const findAuctionHouseTradeStatePda = (\n  auctionHouse: PublicKey,\n  wallet: PublicKey,\n  treasuryMint: PublicKey,\n  tokenMint: PublicKey,\n  buyPrice: BigNumber,\n  tokenSize: BigNumber,\n  tokenAccount?: Option<PublicKey>,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('auction_house', 'utf8'),\n    wallet.toBuffer(),\n    auctionHouse.toBuffer(),\n    ...(tokenAccount ? [tokenAccount.toBuffer()] : []),\n    treasuryMint.toBuffer(),\n    tokenMint.toBuffer(),\n    buyPrice.toArrayLike(Buffer, 'le', 8),\n    tokenSize.toArrayLike(Buffer, 'le', 8),\n  ]);\n};\n\n/** @group Pdas */\nexport const findListingReceiptPda = (\n  tradeState: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('listing_receipt', 'utf8'),\n    tradeState.toBuffer(),\n  ]);\n};\n\n/** @group Pdas */\nexport const findBidReceiptPda = (\n  tradeState: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('bid_receipt', 'utf8'),\n    tradeState.toBuffer(),\n  ]);\n};\n\n/** @group Pdas */\nexport const findPurchaseReceiptPda = (\n  sellerTradeState: PublicKey,\n  buyerTradeState: PublicKey,\n  programId: PublicKey = AuctionHouseProgram.publicKey\n): Pda => {\n  return Pda.find(programId, [\n    Buffer.from('purchase_receipt', 'utf8'),\n    sellerTradeState.toBuffer(),\n    buyerTradeState.toBuffer(),\n  ]);\n};\n"],"names":["findAuctionHousePda","creator","treasuryMint","programId","AuctionHouseProgram","publicKey","Pda","find","Buffer","from","toBuffer","findAuctioneerPda","auctionHouse","auctioneerAuthority","findAuctionHouseProgramAsSignerPda","findAuctionHouseFeePda","findAuctionHouseTreasuryPda","findAuctionHouseBuyerEscrowPda","buyer","findAuctionHouseTradeStatePda","wallet","tokenMint","buyPrice","tokenSize","tokenAccount","toArrayLike","findListingReceiptPda","tradeState","findBidReceiptPda","findPurchaseReceiptPda","sellerTradeState","buyerTradeState"],"mappings":"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"}