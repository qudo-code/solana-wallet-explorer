{"version":3,"file":"plugin.mjs","sources":["../../../../src/plugins/nftModule/plugin.ts"],"sourcesContent":["import type { Metaplex } from '@/Metaplex';\nimport { ErrorWithLogs, MetaplexPlugin } from '@/types';\nimport { cusper } from '@metaplex-foundation/mpl-token-metadata';\nimport { TokenMetadataGpaBuilder } from './gpaBuilders';\nimport { NftClient } from './NftClient';\nimport {\n  approveNftCollectionAuthorityOperation,\n  approveNftCollectionAuthorityOperationHandler,\n  approveNftUseAuthorityOperation,\n  approveNftUseAuthorityOperationHandler,\n  createNftOperation,\n  createNftOperationHandler,\n  createSftOperation,\n  createSftOperationHandler,\n  deleteNftOperation,\n  deleteNftOperationHandler,\n  findNftByMetadataOperation,\n  findNftByMetadataOperationHandler,\n  findNftByMintOperation,\n  findNftByMintOperationHandler,\n  findNftByTokenOperation,\n  findNftByTokenOperationHandler,\n  findNftsByCreatorOperation,\n  findNftsByCreatorOperationHandler,\n  findNftsByMintListOperation,\n  findNftsByMintListOperationHandler,\n  findNftsByOwnerOperation,\n  findNftsByOwnerOperationHandler,\n  findNftsByUpdateAuthorityOperation,\n  findNftsByUpdateAuthorityOperationHandler,\n  freezeDelegatedNftOperation,\n  freezeDelegatedNftOperationHandler,\n  loadMetadataOperation,\n  loadMetadataOperationHandler,\n  migrateToSizedCollectionNftOperation,\n  migrateToSizedCollectionNftOperationHandler,\n  printNewEditionOperation,\n  printNewEditionOperationHandler,\n  revokeNftCollectionAuthorityOperation,\n  revokeNftCollectionAuthorityOperationHandler,\n  revokeNftUseAuthorityOperation,\n  revokeNftUseAuthorityOperationHandler,\n  thawDelegatedNftOperation,\n  thawDelegatedNftOperationHandler,\n  unverifyNftCollectionOperation,\n  unverifyNftCollectionOperationHandler,\n  unverifyNftCreatorOperation,\n  unverifyNftCreatorOperationHandler,\n  updateNftOperation,\n  updateNftOperationHandler,\n  uploadMetadataOperation,\n  uploadMetadataOperationHandler,\n  useNftOperation,\n  useNftOperationHandler,\n  verifyNftCollectionOperation,\n  verifyNftCollectionOperationHandler,\n  verifyNftCreatorOperation,\n  verifyNftCreatorOperationHandler,\n} from './operations';\nimport { TokenMetadataProgram } from './program';\n\n/** @group Plugins */\nexport const nftModule = (): MetaplexPlugin => ({\n  install(metaplex: Metaplex) {\n    // Token Metadata Program.\n    metaplex.programs().register({\n      name: 'TokenMetadataProgram',\n      address: TokenMetadataProgram.publicKey,\n      errorResolver: (error: ErrorWithLogs) =>\n        cusper.errorFromProgramLogs(error.logs, false),\n      gpaResolver: (metaplex: Metaplex) =>\n        new TokenMetadataGpaBuilder(metaplex, TokenMetadataProgram.publicKey),\n    });\n\n    // Operations.\n    const op = metaplex.operations();\n    op.register(\n      approveNftCollectionAuthorityOperation,\n      approveNftCollectionAuthorityOperationHandler\n    );\n    op.register(\n      approveNftUseAuthorityOperation,\n      approveNftUseAuthorityOperationHandler\n    );\n    op.register(createNftOperation, createNftOperationHandler);\n    op.register(createSftOperation, createSftOperationHandler);\n    op.register(deleteNftOperation, deleteNftOperationHandler);\n    op.register(findNftByMetadataOperation, findNftByMetadataOperationHandler);\n    op.register(findNftByMintOperation, findNftByMintOperationHandler);\n    op.register(findNftByTokenOperation, findNftByTokenOperationHandler);\n    op.register(findNftsByCreatorOperation, findNftsByCreatorOperationHandler);\n    op.register(\n      findNftsByMintListOperation,\n      findNftsByMintListOperationHandler\n    );\n    op.register(findNftsByOwnerOperation, findNftsByOwnerOperationHandler);\n    op.register(\n      findNftsByUpdateAuthorityOperation,\n      findNftsByUpdateAuthorityOperationHandler\n    );\n    op.register(\n      freezeDelegatedNftOperation,\n      freezeDelegatedNftOperationHandler\n    );\n    op.register(loadMetadataOperation, loadMetadataOperationHandler);\n    op.register(\n      migrateToSizedCollectionNftOperation,\n      migrateToSizedCollectionNftOperationHandler\n    );\n    op.register(printNewEditionOperation, printNewEditionOperationHandler);\n    op.register(\n      revokeNftCollectionAuthorityOperation,\n      revokeNftCollectionAuthorityOperationHandler\n    );\n    op.register(\n      revokeNftUseAuthorityOperation,\n      revokeNftUseAuthorityOperationHandler\n    );\n    op.register(thawDelegatedNftOperation, thawDelegatedNftOperationHandler);\n    op.register(\n      unverifyNftCollectionOperation,\n      unverifyNftCollectionOperationHandler\n    );\n    op.register(\n      unverifyNftCreatorOperation,\n      unverifyNftCreatorOperationHandler\n    );\n    op.register(updateNftOperation, updateNftOperationHandler);\n    op.register(uploadMetadataOperation, uploadMetadataOperationHandler);\n    op.register(useNftOperation, useNftOperationHandler);\n    op.register(\n      verifyNftCollectionOperation,\n      verifyNftCollectionOperationHandler\n    );\n    op.register(verifyNftCreatorOperation, verifyNftCreatorOperationHandler);\n\n    metaplex.nfts = function () {\n      return new NftClient(this);\n    };\n  },\n});\n\ndeclare module '../../Metaplex' {\n  interface Metaplex {\n    nfts(): NftClient;\n  }\n}\n"],"names":["nftModule","install","metaplex","programs","register","name","address","TokenMetadataProgram","publicKey","errorResolver","error","cusper","errorFromProgramLogs","logs","gpaResolver","TokenMetadataGpaBuilder","op","operations","approveNftCollectionAuthorityOperation","approveNftCollectionAuthorityOperationHandler","approveNftUseAuthorityOperation","approveNftUseAuthorityOperationHandler","createNftOperation","createNftOperationHandler","createSftOperation","createSftOperationHandler","deleteNftOperation","deleteNftOperationHandler","findNftByMetadataOperation","findNftByMetadataOperationHandler","findNftByMintOperation","findNftByMintOperationHandler","findNftByTokenOperation","findNftByTokenOperationHandler","findNftsByCreatorOperation","findNftsByCreatorOperationHandler","findNftsByMintListOperation","findNftsByMintListOperationHandler","findNftsByOwnerOperation","findNftsByOwnerOperationHandler","findNftsByUpdateAuthorityOperation","findNftsByUpdateAuthorityOperationHandler","freezeDelegatedNftOperation","freezeDelegatedNftOperationHandler","loadMetadataOperation","loadMetadataOperationHandler","migrateToSizedCollectionNftOperation","migrateToSizedCollectionNftOperationHandler","printNewEditionOperation","printNewEditionOperationHandler","revokeNftCollectionAuthorityOperation","revokeNftCollectionAuthorityOperationHandler","revokeNftUseAuthorityOperation","revokeNftUseAuthorityOperationHandler","thawDelegatedNftOperation","thawDelegatedNftOperationHandler","unverifyNftCollectionOperation","unverifyNftCollectionOperationHandler","unverifyNftCreatorOperation","unverifyNftCreatorOperationHandler","updateNftOperation","updateNftOperationHandler","uploadMetadataOperation","uploadMetadataOperationHandler","useNftOperation","useNftOperationHandler","verifyNftCollectionOperation","verifyNftCollectionOperationHandler","verifyNftCreatorOperation","verifyNftCreatorOperationHandler","nfts","NftClient"],"mappings":"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"}