{"version":3,"file":"gpaBuilders.mjs","sources":["../../../../src/plugins/tokenModule/gpaBuilders.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { MINT_SIZE, ACCOUNT_SIZE, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Metaplex } from '@/Metaplex';\nimport { GpaBuilder } from '@/utils';\nimport { BigNumber } from '@/types';\n\n/** @internal */\nexport class MintGpaBuilder extends GpaBuilder {\n  constructor(metaplex: Metaplex, programId?: PublicKey) {\n    super(metaplex, programId ?? TOKEN_PROGRAM_ID);\n    this.whereSize(MINT_SIZE);\n  }\n\n  whereDoesntHaveMintAuthority() {\n    return this.where(0, 0);\n  }\n\n  whereHasMintAuthority() {\n    return this.where(0, 1);\n  }\n\n  whereMintAuthority(mintAuthority: PublicKey) {\n    return this.whereHasMintAuthority().where(4, mintAuthority);\n  }\n\n  whereSupply(supply: number | BigNumber) {\n    return this.where(36, supply);\n  }\n\n  // TODO(loris): Map the rest of the layout.\n  // https://github.com/solana-labs/solana-program-library/blob/master/token/js/src/state/mint.ts#L43\n}\n\n/** @internal */\nexport class TokenGpaBuilder extends GpaBuilder {\n  constructor(metaplex: Metaplex, programId?: PublicKey) {\n    super(metaplex, programId ?? TOKEN_PROGRAM_ID);\n    this.whereSize(ACCOUNT_SIZE);\n  }\n\n  selectMint() {\n    return this.slice(0, 32);\n  }\n\n  whereMint(mint: PublicKey) {\n    return this.where(0, mint);\n  }\n\n  selectOwner() {\n    return this.slice(32, 32);\n  }\n\n  whereOwner(owner: PublicKey) {\n    return this.where(32, owner);\n  }\n\n  selectAmount() {\n    return this.slice(64, 8);\n  }\n\n  whereAmount(amount: number | BigNumber) {\n    return this.where(64, amount);\n  }\n\n  whereDoesntHaveDelegate() {\n    return this.where(72, 0);\n  }\n\n  whereHasDelegate() {\n    return this.where(72, 1);\n  }\n\n  whereDelegate(delegate: PublicKey) {\n    return this.whereHasDelegate().where(76, delegate);\n  }\n\n  // TODO(loris): Map the rest of the layout.\n  // https://github.com/solana-labs/solana-program-library/blob/master/token/js/src/state/account.ts#L59\n}\n"],"names":["MintGpaBuilder","GpaBuilder","constructor","metaplex","programId","TOKEN_PROGRAM_ID","whereSize","MINT_SIZE","whereDoesntHaveMintAuthority","where","whereHasMintAuthority","whereMintAuthority","mintAuthority","whereSupply","supply","TokenGpaBuilder","ACCOUNT_SIZE","selectMint","slice","whereMint","mint","selectOwner","whereOwner","owner","selectAmount","whereAmount","amount","whereDoesntHaveDelegate","whereHasDelegate","whereDelegate","delegate"],"mappings":";;;AAMA;AACO,MAAMA,cAAN,SAA6BC,UAA7B,CAAwC;AAC7CC,EAAAA,WAAW,CAACC,QAAD,EAAqBC,SAArB,EAA4C;IACrD,KAAMD,CAAAA,QAAN,EAAgBC,SAAhB,KAAA,IAAA,IAAgBA,SAAhB,KAAgBA,KAAAA,CAAAA,GAAAA,SAAhB,GAA6BC,gBAA7B,CAAA,CAAA;IACA,IAAKC,CAAAA,SAAL,CAAeC,SAAf,CAAA,CAAA;AACD,GAAA;;AAEDC,EAAAA,4BAA4B,GAAG;AAC7B,IAAA,OAAO,KAAKC,KAAL,CAAW,CAAX,EAAc,CAAd,CAAP,CAAA;AACD,GAAA;;AAEDC,EAAAA,qBAAqB,GAAG;AACtB,IAAA,OAAO,KAAKD,KAAL,CAAW,CAAX,EAAc,CAAd,CAAP,CAAA;AACD,GAAA;;EAEDE,kBAAkB,CAACC,aAAD,EAA2B;IAC3C,OAAO,IAAA,CAAKF,qBAAL,EAA6BD,CAAAA,KAA7B,CAAmC,CAAnC,EAAsCG,aAAtC,CAAP,CAAA;AACD,GAAA;;EAEDC,WAAW,CAACC,MAAD,EAA6B;AACtC,IAAA,OAAO,KAAKL,KAAL,CAAW,EAAX,EAAeK,MAAf,CAAP,CAAA;AACD,GApB4C;AAuB7C;;;AAvB6C,CAAA;AA0B/C;;AACO,MAAMC,eAAN,SAA8Bd,UAA9B,CAAyC;AAC9CC,EAAAA,WAAW,CAACC,QAAD,EAAqBC,SAArB,EAA4C;IACrD,KAAMD,CAAAA,QAAN,EAAgBC,SAAhB,KAAA,IAAA,IAAgBA,SAAhB,KAAgBA,KAAAA,CAAAA,GAAAA,SAAhB,GAA6BC,gBAA7B,CAAA,CAAA;IACA,IAAKC,CAAAA,SAAL,CAAeU,YAAf,CAAA,CAAA;AACD,GAAA;;AAEDC,EAAAA,UAAU,GAAG;AACX,IAAA,OAAO,KAAKC,KAAL,CAAW,CAAX,EAAc,EAAd,CAAP,CAAA;AACD,GAAA;;EAEDC,SAAS,CAACC,IAAD,EAAkB;AACzB,IAAA,OAAO,KAAKX,KAAL,CAAW,CAAX,EAAcW,IAAd,CAAP,CAAA;AACD,GAAA;;AAEDC,EAAAA,WAAW,GAAG;AACZ,IAAA,OAAO,KAAKH,KAAL,CAAW,EAAX,EAAe,EAAf,CAAP,CAAA;AACD,GAAA;;EAEDI,UAAU,CAACC,KAAD,EAAmB;AAC3B,IAAA,OAAO,KAAKd,KAAL,CAAW,EAAX,EAAec,KAAf,CAAP,CAAA;AACD,GAAA;;AAEDC,EAAAA,YAAY,GAAG;AACb,IAAA,OAAO,KAAKN,KAAL,CAAW,EAAX,EAAe,CAAf,CAAP,CAAA;AACD,GAAA;;EAEDO,WAAW,CAACC,MAAD,EAA6B;AACtC,IAAA,OAAO,KAAKjB,KAAL,CAAW,EAAX,EAAeiB,MAAf,CAAP,CAAA;AACD,GAAA;;AAEDC,EAAAA,uBAAuB,GAAG;AACxB,IAAA,OAAO,KAAKlB,KAAL,CAAW,EAAX,EAAe,CAAf,CAAP,CAAA;AACD,GAAA;;AAEDmB,EAAAA,gBAAgB,GAAG;AACjB,IAAA,OAAO,KAAKnB,KAAL,CAAW,EAAX,EAAe,CAAf,CAAP,CAAA;AACD,GAAA;;EAEDoB,aAAa,CAACC,QAAD,EAAsB;IACjC,OAAO,IAAA,CAAKF,gBAAL,EAAwBnB,CAAAA,KAAxB,CAA8B,EAA9B,EAAkCqB,QAAlC,CAAP,CAAA;AACD,GAxC6C;AA2C9C;;;AA3C8C;;;;"}