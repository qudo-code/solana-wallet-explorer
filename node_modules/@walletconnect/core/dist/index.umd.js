(function(k,Q){typeof exports=="object"&&typeof module<"u"?Q(exports):typeof define=="function"&&define.amd?define(["exports"],Q):(k=typeof globalThis<"u"?globalThis:k||self,Q(k["@walletconnect/core"]={}))})(this,function(k){"use strict";var Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}function ga(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var va=ba;function ba(t,e,r){var n=r&&r.stringify||ga,a=1;if(typeof t=="object"&&t!==null){var o=e.length+a;if(o===1)return t;var f=new Array(o);f[0]=n(t);for(var u=1;u<o;u++)f[u]=n(e[u]);return f.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var d="",_=1-a,m=-1,L=t&&t.length||0,D=0;D<L;){if(t.charCodeAt(D)===37&&D+1<L){switch(m=m>-1?m:0,t.charCodeAt(D+1)){case 100:case 102:if(_>=c||e[_]==null)break;m<D&&(d+=t.slice(m,D)),d+=Number(e[_]),m=D+2,D++;break;case 105:if(_>=c||e[_]==null)break;m<D&&(d+=t.slice(m,D)),d+=Math.floor(Number(e[_])),m=D+2,D++;break;case 79:case 111:case 106:if(_>=c||e[_]===void 0)break;m<D&&(d+=t.slice(m,D));var A=typeof e[_];if(A==="string"){d+="'"+e[_]+"'",m=D+2,D++;break}if(A==="function"){d+=e[_].name||"<anonymous>",m=D+2,D++;break}d+=n(e[_]),m=D+2,D++;break;case 115:if(_>=c)break;m<D&&(d+=t.slice(m,D)),d+=String(e[_]),m=D+2,D++;break;case 37:m<D&&(d+=t.slice(m,D)),d+="%",m=D+2,D++,_--;break}++_}++D}return m===-1?t:(m<L&&(d+=t.slice(m)),d)}var Pn=va,Mn=dt,Vt=xa().console||{},ya={mapHttpRequest:lr,mapHttpResponse:lr,wrapRequestSerializer:Hr,wrapResponseSerializer:Hr,wrapErrorSerializer:Hr,req:lr,res:lr,err:Da};function dt(t){t=t||{},t.browser=t.browser||{};var e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");var r=t.browser.write||Vt;t.browser.write&&(t.browser.asObject=!0);var n=t.serializers||{},a=Array.isArray(t.browser.serialize)?t.browser.serialize.filter(function(A){return A!=="!stdSerializers.err"}):t.browser.serialize===!0?Object.keys(n):!1,o=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);var f=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");var u=t.level||"info",c=Object.create(r);c.log||(c.log=Yt),Object.defineProperty(c,"levelVal",{get:_}),Object.defineProperty(c,"level",{get:m,set:L});var d={transmit:e,serialize:a,asObject:t.browser.asObject,levels:f,timestamp:ma(t)};c.levels=dt.levels,c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Yt,c.serializers=n,c._serialize=a,c._stdErrSerialize=o,c.child=D,e&&(c._logEvent=Fr());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function m(){return this._level}function L(A){if(A!=="silent"&&!this.levels.values[A])throw Error("unknown level "+A);this._level=A,Mt(d,c,"error","log"),Mt(d,c,"fatal","error"),Mt(d,c,"warn","error"),Mt(d,c,"info","log"),Mt(d,c,"debug","log"),Mt(d,c,"trace","log")}function D(A){if(!A)throw new Error("missing bindings for child Pino");var j=A.serializers;if(a&&j){var I=Object.assign({},n,j),K=t.browser.serialize===!0?Object.keys(I):a;delete A.serializers,hr([A],K,I,this._stdErrSerialize)}function w(T){this._childLevel=(T._childLevel|0)+1,this.error=jt(T,A,"error"),this.fatal=jt(T,A,"fatal"),this.warn=jt(T,A,"warn"),this.info=jt(T,A,"info"),this.debug=jt(T,A,"debug"),this.trace=jt(T,A,"trace"),I&&(this.serializers=I,this._serialize=K),e&&(this._logEvent=Fr([].concat(T._logEvent.bindings,A)))}return w.prototype=this,new w(this)}return c}dt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},dt.stdSerializers=ya,dt.stdTimeFunctions=Object.assign({},{nullTime:jn,epochTime:Bn,unixTime:Sa,isoTime:Oa});function Mt(t,e,r,n){var a=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Yt:a[r]?a[r]:Vt[r]||Vt[n]||Yt,pa(t,e,r)}function pa(t,e,r){!t.transmit&&e[r]===Yt||(e[r]=function(n){return function(){for(var o=t.timestamp(),f=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Vt?Vt:this,c=0;c<f.length;c++)f[c]=arguments[c];if(t.serialize&&!t.asObject&&hr(f,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(u,Ea(this,r,f,o)):n.apply(u,f),t.transmit){var d=t.transmit.level||e.level,_=dt.levels.values[d],m=dt.levels.values[r];if(m<_)return;wa(this,{ts:o,methodLevel:r,methodValue:m,transmitLevel:d,transmitValue:dt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},f)}}}(e[r]))}function Ea(t,e,r,n){t._serialize&&hr(r,t._serialize,t.serializers,t._stdErrSerialize);var a=r.slice(),o=a[0],f={};n&&(f.time=n),f.level=dt.levels.values[e];var u=(t._childLevel|0)+1;if(u<1&&(u=1),o!==null&&typeof o=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(f,a.shift());o=a.length?Pn(a.shift(),a):void 0}else typeof o=="string"&&(o=Pn(a.shift(),a));return o!==void 0&&(f.msg=o),f}function hr(t,e,r,n){for(var a in t)if(n&&t[a]instanceof Error)t[a]=dt.stdSerializers.err(t[a]);else if(typeof t[a]=="object"&&!Array.isArray(t[a]))for(var o in t[a])e&&e.indexOf(o)>-1&&o in r&&(t[a][o]=r[o](t[a][o]))}function jt(t,e,r){return function(){var n=new Array(1+arguments.length);n[0]=e;for(var a=1;a<n.length;a++)n[a]=arguments[a-1];return t[r].apply(this,n)}}function wa(t,e,r){var n=e.send,a=e.ts,o=e.methodLevel,f=e.methodValue,u=e.val,c=t._logEvent.bindings;hr(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=a,t._logEvent.messages=r.filter(function(d){return c.indexOf(d)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=f,n(o,t._logEvent,u),t._logEvent=Fr(c)}function Fr(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Da(t){var e={type:t.constructor.name,msg:t.message,stack:t.stack};for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}function ma(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?jn:Bn}function lr(){return{}}function Hr(t){return t}function Yt(){}function jn(){return!1}function Bn(){return Date.now()}function Sa(){return Math.round(Date.now()/1e3)}function Oa(){return new Date(Date.now()).toISOString()}function xa(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}function He(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var At=He;He.EventEmitter=He,He.prototype._events=void 0,He.prototype._maxListeners=void 0,He.defaultMaxListeners=10,He.prototype.setMaxListeners=function(t){if(!Ta(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},He.prototype.emit=function(t){var e,r,n,a,o,f;if(this._events||(this._events={}),t==="error"&&(!this._events.error||qt(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r=this._events[t],Fn(r))return!1;if(vt(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(qt(r))for(a=Array.prototype.slice.call(arguments,1),f=r.slice(),n=f.length,o=0;o<n;o++)f[o].apply(this,a);return!0},He.prototype.addListener=function(t,e){var r;if(!vt(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,vt(e.listener)?e.listener:e),this._events[t]?qt(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,qt(this._events[t])&&!this._events[t].warned&&(Fn(this._maxListeners)?r=He.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this},He.prototype.on=He.prototype.addListener,He.prototype.once=function(t,e){if(!vt(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},He.prototype.removeListener=function(t,e){var r,n,a,o;if(!vt(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,n=-1,r===e||vt(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(qt(r)){for(o=a;o-- >0;)if(r[o]===e||r[o].listener&&r[o].listener===e){n=o;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},He.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],vt(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},He.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:vt(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e},He.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(vt(e))return 1;if(e)return e.length}return 0},He.listenerCount=function(t,e){return t.listenerCount(e)};function vt(t){return typeof t=="function"}function Ta(t){return typeof t=="number"}function qt(t){return typeof t=="object"&&t!==null}function Fn(t){return t===void 0}var dr={},zr=function(t,e){return zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},zr(t,e)};function Aa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kr=function(){return Kr=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kr.apply(this,arguments)};function Ca(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function La(t,e,r,n){var a=arguments.length,o=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(f=t[u])&&(o=(a<3?f(o):a>3?f(e,r,o):f(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}function Ra(t,e){return function(r,n){e(r,n,t)}}function Ia(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Na(t,e,r,n){function a(o){return o instanceof r?o:new r(function(f){f(o)})}return new(r||(r=Promise))(function(o,f){function u(_){try{d(n.next(_))}catch(m){f(m)}}function c(_){try{d(n.throw(_))}catch(m){f(m)}}function d(_){_.done?o(_.value):a(_.value).then(u,c)}d((n=n.apply(t,e||[])).next())})}function Ua(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(d){return function(_){return c([d,_])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(_){d=[6,_],a=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var $r=Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Pa(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$r(e,t,r)}function Gr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,o=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){f={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return o}function Ma(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hn(arguments[e]));return t}function ja(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var o=arguments[e],f=0,u=o.length;f<u;f++,a++)n[a]=o[f];return n}function Ba(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Xt(t){return this instanceof Xt?(this.v=t,this):new Xt(t)}function Fa(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,o=[];return a={},f("next"),f("throw"),f("return"),a[Symbol.asyncIterator]=function(){return this},a;function f(L){n[L]&&(a[L]=function(D){return new Promise(function(A,j){o.push([L,D,A,j])>1||u(L,D)})})}function u(L,D){try{c(n[L](D))}catch(A){m(o[0][3],A)}}function c(L){L.value instanceof Xt?Promise.resolve(L.value.v).then(d,_):m(o[0][2],L)}function d(L){u("next",L)}function _(L){u("throw",L)}function m(L,D){L(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ha(t){var e,r;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,o){e[a]=t[a]?function(f){return(r=!r)?{value:Xt(t[a](f)),done:a==="return"}:o?o(f):f}:o}}function za(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Gr=="function"?Gr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(f){return new Promise(function(u,c){f=t[o](f),a(u,c,f.done,f.value)})}}function a(o,f,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},f)}}function Ka(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var $a=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Ga(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$r(e,t,r);return $a(e,t),e}function Wa(t){return t&&t.__esModule?t:{default:t}}function Va(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Ya(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function qa(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}var Xa=Object.freeze({__proto__:null,__extends:Aa,get __assign(){return Kr},__rest:Ca,__decorate:La,__param:Ra,__metadata:Ia,__awaiter:Na,__generator:Ua,__createBinding:$r,__exportStar:Pa,__values:Gr,__read:Hn,__spread:Ma,__spreadArrays:ja,__spreadArray:Ba,__await:Xt,__asyncGenerator:Fa,__asyncDelegator:Ha,__asyncValues:za,__makeTemplateObject:Ka,__importStar:Ga,__importDefault:Wa,__classPrivateFieldGet:Va,__classPrivateFieldSet:Ya,__classPrivateFieldIn:qa}),Wr=Br(Xa),_r={exports:{}},zn;function Ja(){return zn||(zn=1,function(){var t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){var r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),Q.localStorage?_r.exports=localStorage:_r.exports=new e}()),_r.exports}var Jt={},Kn;function $n(){if(Kn)return Jt;Kn=1,Object.defineProperty(Jt,"__esModule",{value:!0});function t(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch{return r}}Jt.safeJsonParse=t;function e(r){return typeof r=="string"?r:JSON.stringify(r,(n,a)=>typeof a>"u"?null:a)}return Jt.safeJsonStringify=e,Jt}var Vr={},Qt={},Gn;function Qa(){if(Gn)return Qt;Gn=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.IKeyValueStorage=void 0;class t{}return Qt.IKeyValueStorage=t,Qt}var Zt={},Wn;function Za(){if(Wn)return Zt;Wn=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.parseEntry=void 0;const t=$n();function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Zt.parseEntry=e,Zt}var Vn;function ka(){return Vn||(Vn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(Qa(),t),e.__exportStar(Za(),t)}(Vr)),Vr}Object.defineProperty(dr,"__esModule",{value:!0}),dr.KeyValueStorage=void 0;const Bt=Wr,eo=Bt.__importDefault(Ja()),Yn=$n(),to=ka();class qn{constructor(){this.localStorage=eo.default}getKeys(){return Bt.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Bt.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(to.parseEntry)})}getItem(e){return Bt.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Yn.safeJsonParse(r)})}setItem(e,r){return Bt.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Yn.safeJsonStringify(r))})}removeItem(e){return Bt.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}dr.KeyValueStorage=qn;var ro=dr.default=qn,gr={},vr={},ft={},Xn={},br={};Object.defineProperty(br,"__esModule",{value:!0}),br.delay=void 0;function no(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}br.delay=no;var Ft={},Yr={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.ONE_THOUSAND=Ht.ONE_HUNDRED=void 0,Ht.ONE_HUNDRED=100,Ht.ONE_THOUSAND=1e3;var Jn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(Jn),function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ht,t),r(Jn,t)}(Yr),Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.fromMiliseconds=Ft.toMiliseconds=void 0;const Qn=Yr;function io(t){return t*Qn.ONE_THOUSAND}Ft.toMiliseconds=io;function so(t){return Math.floor(t/Qn.ONE_THOUSAND)}Ft.fromMiliseconds=so,function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(br,t),r(Ft,t)}(Xn);var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.Watch=void 0;class Zn{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);const n=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:n})}get(e){const r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){const r=this.get(e);return r.elapsed||Date.now()-r.started}}kt.Watch=Zn,kt.default=Zn;var kn={},yr={};Object.defineProperty(yr,"__esModule",{value:!0}),yr.IWatch=void 0;class ao{}yr.IWatch=ao,function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(yr,t)}(kn),function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xn,t),r(kt,t),r(kn,t),r(Yr,t)}(ft);var qr={},pr={};class er{}var oo=Object.freeze({__proto__:null,IEvents:er}),uo=Br(oo);Object.defineProperty(pr,"__esModule",{value:!0}),pr.IHeartBeat=void 0;const fo=uo;class co extends fo.IEvents{constructor(e){super()}}pr.IHeartBeat=co,function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(pr,t)}(qr);var Xr={},zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.HEARTBEAT_EVENTS=zt.HEARTBEAT_INTERVAL=void 0;const ho=ft;zt.HEARTBEAT_INTERVAL=ho.FIVE_SECONDS,zt.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(zt,t)}(Xr);var Jr=Q&&Q.__awaiter||function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(f){f(o)})}return new(r||(r=Promise))(function(o,f){function u(_){try{d(n.next(_))}catch(m){f(m)}}function c(_){try{d(n.throw(_))}catch(m){f(m)}}function d(_){_.done?o(_.value):a(_.value).then(u,c)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(vr,"__esModule",{value:!0}),vr.HeartBeat=void 0;const lo=At,_o=ft,go=qr,Qr=Xr;class Zr extends go.IHeartBeat{constructor(e){super(e),this.events=new lo.EventEmitter,this.interval=Qr.HEARTBEAT_INTERVAL,this.interval=e?.interval||Qr.HEARTBEAT_INTERVAL}static init(e){return Jr(this,void 0,void 0,function*(){const r=new Zr(e);return yield r.init(),r})}init(){return Jr(this,void 0,void 0,function*(){yield this.initialize()})}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return Jr(this,void 0,void 0,function*(){setInterval(()=>this.pulse(),_o.toMiliseconds(this.interval))})}pulse(){this.events.emit(Qr.HEARTBEAT_EVENTS.pulse)}}vr.HeartBeat=Zr,function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(vr,t),r(qr,t),r(Xr,t)}(gr);var Be={},Ct={},ei;function ti(){return ei||(ei=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.PINO_CUSTOM_CONTEXT_KEY=Ct.PINO_LOGGER_DEFAULTS=void 0,Ct.PINO_LOGGER_DEFAULTS={level:"info"},Ct.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Ct}var et={},ri;function vo(){if(ri)return et;ri=1,Object.defineProperty(et,"__esModule",{value:!0}),et.generateChildLogger=et.formatChildLoggerContext=et.getLoggerContext=et.setBrowserLoggerContext=et.getBrowserLoggerContext=et.getDefaultLoggerOptions=void 0;const t=ti();function e(u){return Object.assign(Object.assign({},u),{level:u?.level||t.PINO_LOGGER_DEFAULTS.level})}et.getDefaultLoggerOptions=e;function r(u,c=t.PINO_CUSTOM_CONTEXT_KEY){return u[c]||""}et.getBrowserLoggerContext=r;function n(u,c,d=t.PINO_CUSTOM_CONTEXT_KEY){return u[d]=c,u}et.setBrowserLoggerContext=n;function a(u,c=t.PINO_CUSTOM_CONTEXT_KEY){let d="";return typeof u.bindings>"u"?d=r(u,c):d=u.bindings().context||"",d}et.getLoggerContext=a;function o(u,c,d=t.PINO_CUSTOM_CONTEXT_KEY){const _=a(u,d);return _.trim()?`${_}/${c}`:c}et.formatChildLoggerContext=o;function f(u,c,d=t.PINO_CUSTOM_CONTEXT_KEY){const _=o(u,c,d),m=u.child({context:_});return n(m,_,d)}return et.generateChildLogger=f,et}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(ti(),t),e.__exportStar(vo(),t)})(Be);class bo extends er{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class yo{constructor(e,r){this.logger=e,this.core=r}}class po extends er{constructor(e,r){super(),this.relayer=e,this.logger=r}}class Eo extends er{constructor(e){super()}}class wo{constructor(e,r,n,a){this.core=e,this.logger=r,this.name=n}}class Do extends er{constructor(e,r){super(),this.relayer=e,this.logger=r}}function ze(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var mo=ze;ze.EventEmitter=ze,ze.prototype._events=void 0,ze.prototype._maxListeners=void 0,ze.defaultMaxListeners=10,ze.prototype.setMaxListeners=function(t){if(!So(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},ze.prototype.emit=function(t){var e,r,n,a,o,f;if(this._events||(this._events={}),t==="error"&&(!this._events.error||tr(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r=this._events[t],ni(r))return!1;if(bt(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(tr(r))for(a=Array.prototype.slice.call(arguments,1),f=r.slice(),n=f.length,o=0;o<n;o++)f[o].apply(this,a);return!0},ze.prototype.addListener=function(t,e){var r;if(!bt(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,bt(e.listener)?e.listener:e),this._events[t]?tr(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,tr(this._events[t])&&!this._events[t].warned&&(ni(this._maxListeners)?r=ze.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this},ze.prototype.on=ze.prototype.addListener,ze.prototype.once=function(t,e){if(!bt(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},ze.prototype.removeListener=function(t,e){var r,n,a,o;if(!bt(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,n=-1,r===e||bt(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(tr(r)){for(o=a;o-- >0;)if(r[o]===e||r[o].listener&&r[o].listener===e){n=o;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},ze.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],bt(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},ze.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:bt(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e},ze.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(bt(e))return 1;if(e)return e.length}return 0},ze.listenerCount=function(t,e){return t.listenerCount(e)};function bt(t){return typeof t=="function"}function So(t){return typeof t=="number"}function tr(t){return typeof t=="object"&&t!==null}function ni(t){return t===void 0}class Bl extends mo.EventEmitter{constructor(){super()}}function ii(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function kr(t){return typeof t=="string"?t:JSON.stringify(t)}var en={},Kt={},tn={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});var si=65536,Oo=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),n=0;n<r.length;n+=si)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,si)));return r},t}();rn.BrowserRandomSource=Oo;function xo(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nn={},it={};Object.defineProperty(it,"__esModule",{value:!0});function To(t){for(var e=0;e<t.length;e++)t[e]=0;return t}it.wipe=To;var Ao={},Co=Object.freeze({__proto__:null,default:Ao}),Lo=Br(Co);Object.defineProperty(nn,"__esModule",{value:!0});var Ro=it,Io=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof xo<"u"){var e=Lo;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var n=new Uint8Array(e),a=0;a<n.length;a++)n[a]=r[a];return Ro.wipe(r),n},t}();nn.NodeRandomSource=Io,Object.defineProperty(tn,"__esModule",{value:!0});var No=rn,Uo=nn,Po=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new No.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Uo.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();tn.SystemRandomSource=Po;var te={},ai={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(u,c){var d=u>>>16&65535,_=u&65535,m=c>>>16&65535,L=c&65535;return _*L+(d*L+_*m<<16>>>0)|0}t.mul=Math.imul||e;function r(u,c){return u+c|0}t.add=r;function n(u,c){return u-c|0}t.sub=n;function a(u,c){return u<<c|u>>>32-c}t.rotl=a;function o(u,c){return u<<32-c|u>>>c}t.rotr=o;function f(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}t.isInteger=Number.isInteger||f,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(u){return t.isInteger(u)&&u>=-t.MAX_SAFE_INTEGER&&u<=t.MAX_SAFE_INTEGER}})(ai),Object.defineProperty(te,"__esModule",{value:!0});var oi=ai;function Mo(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}te.readInt16BE=Mo;function jo(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}te.readUint16BE=jo;function Bo(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}te.readInt16LE=Bo;function Fo(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}te.readUint16LE=Fo;function ui(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}te.writeUint16BE=ui,te.writeInt16BE=ui;function fi(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}te.writeUint16LE=fi,te.writeInt16LE=fi;function sn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}te.readInt32BE=sn;function an(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}te.readUint32BE=an;function on(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}te.readInt32LE=on;function un(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}te.readUint32LE=un;function Er(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}te.writeUint32BE=Er,te.writeInt32BE=Er;function wr(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}te.writeUint32LE=wr,te.writeInt32LE=wr;function Ho(t,e){e===void 0&&(e=0);var r=sn(t,e),n=sn(t,e+4);return r*4294967296+n-(n>>31)*4294967296}te.readInt64BE=Ho;function zo(t,e){e===void 0&&(e=0);var r=an(t,e),n=an(t,e+4);return r*4294967296+n}te.readUint64BE=zo;function Ko(t,e){e===void 0&&(e=0);var r=on(t,e),n=on(t,e+4);return n*4294967296+r-(r>>31)*4294967296}te.readInt64LE=Ko;function $o(t,e){e===void 0&&(e=0);var r=un(t,e),n=un(t,e+4);return n*4294967296+r}te.readUint64LE=$o;function ci(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Er(t/4294967296>>>0,e,r),Er(t>>>0,e,r+4),e}te.writeUint64BE=ci,te.writeInt64BE=ci;function hi(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),wr(t>>>0,e,r),wr(t/4294967296>>>0,e,r+4),e}te.writeUint64LE=hi,te.writeInt64LE=hi;function Go(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,a=1,o=t/8+r-1;o>=r;o--)n+=e[o]*a,a*=256;return n}te.readUintBE=Go;function Wo(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,a=1,o=r;o<r+t/8;o++)n+=e[o]*a,a*=256;return n}te.readUintLE=Wo;function Vo(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!oi.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,o=t/8+n-1;o>=n;o--)r[o]=e/a&255,a*=256;return r}te.writeUintBE=Vo;function Yo(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!oi.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,o=n;o<n+t/8;o++)r[o]=e/a&255,a*=256;return r}te.writeUintLE=Yo;function qo(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}te.readFloat32BE=qo;function Xo(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}te.readFloat32LE=Xo;function Jo(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}te.readFloat64BE=Jo;function Qo(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}te.readFloat64LE=Qo;function Zo(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}te.writeFloat32BE=Zo;function ko(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}te.writeFloat32LE=ko;function eu(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}te.writeFloat64BE=eu;function tu(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}te.writeFloat64LE=tu,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=tn,r=te,n=it;t.defaultRandomSource=new e.SystemRandomSource;function a(d,_){return _===void 0&&(_=t.defaultRandomSource),_.randomBytes(d)}t.randomBytes=a;function o(d){d===void 0&&(d=t.defaultRandomSource);var _=a(4,d),m=r.readUint32LE(_);return n.wipe(_),m}t.randomUint32=o;var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(d,_,m){if(_===void 0&&(_=f),m===void 0&&(m=t.defaultRandomSource),_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");for(var L="",D=_.length,A=256-256%D;d>0;){for(var j=a(Math.ceil(d*256/A),m),I=0;I<j.length&&d>0;I++){var K=j[I];K<A&&(L+=_.charAt(K%D),d--)}n.wipe(j)}return L}t.randomString=u;function c(d,_,m){_===void 0&&(_=f),m===void 0&&(m=t.defaultRandomSource);var L=Math.ceil(d/(Math.log(_.length)/Math.LN2));return u(L,_,m)}t.randomStringForEntropy=c}(Kt);var li={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=te,r=it;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},u.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=c[_++],d--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(_=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,_,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=c[_++],d--;return this},u.prototype.finish=function(c){if(!this._finished){var d=this._bytesHashed,_=this._bufferLength,m=d/536870912|0,L=d<<3,D=d%128<112?128:256;this._buffer[_]=128;for(var A=_+1;A<D-8;A++)this._buffer[A]=0;e.writeUint32BE(m,this._buffer,D-8),e.writeUint32BE(L,this._buffer,D-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,D),this._finished=!0}for(var A=0;A<this.digestLength/8;A++)e.writeUint32BE(this._stateHi[A],c,A*8),e.writeUint32BE(this._stateLo[A],c,A*8+4);return this},u.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},u}();t.SHA512=n;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(u,c,d,_,m,L,D){for(var A=d[0],j=d[1],I=d[2],K=d[3],w=d[4],T=d[5],v=d[6],y=d[7],b=_[0],i=_[1],l=_[2],P=_[3],z=_[4],q=_[5],X=_[6],J=_[7],S,C,$,W,N,U,M,B;D>=128;){for(var ne=0;ne<16;ne++){var H=8*ne+L;u[ne]=e.readUint32BE(m,H),c[ne]=e.readUint32BE(m,H+4)}for(var ne=0;ne<80;ne++){var Z=A,V=j,oe=I,x=K,O=w,p=T,s=v,g=y,F=b,Y=i,he=l,be=P,de=z,Ee=q,Ie=X,Ae=J;if(S=y,C=J,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=(w>>>14|z<<32-14)^(w>>>18|z<<32-18)^(z>>>41-32|w<<32-(41-32)),C=(z>>>14|w<<32-14)^(z>>>18|w<<32-18)^(w>>>41-32|z<<32-(41-32)),N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,S=w&T^~w&v,C=z&q^~z&X,N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,S=a[ne*2],C=a[ne*2+1],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,S=u[ne%16],C=c[ne%16],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,$=M&65535|B<<16,W=N&65535|U<<16,S=$,C=W,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=(A>>>28|b<<32-28)^(b>>>34-32|A<<32-(34-32))^(b>>>39-32|A<<32-(39-32)),C=(b>>>28|A<<32-28)^(A>>>34-32|b<<32-(34-32))^(A>>>39-32|b<<32-(39-32)),N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,S=A&j^A&I^j&I,C=b&i^b&l^i&l,N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,g=M&65535|B<<16,Ae=N&65535|U<<16,S=x,C=be,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=$,C=W,N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,x=M&65535|B<<16,be=N&65535|U<<16,j=Z,I=V,K=oe,w=x,T=O,v=p,y=s,A=g,i=F,l=Y,P=he,z=be,q=de,X=Ee,J=Ie,b=Ae,ne%16===15)for(var H=0;H<16;H++)S=u[H],C=c[H],N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=u[(H+9)%16],C=c[(H+9)%16],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,$=u[(H+1)%16],W=c[(H+1)%16],S=($>>>1|W<<32-1)^($>>>8|W<<32-8)^$>>>7,C=(W>>>1|$<<32-1)^(W>>>8|$<<32-8)^(W>>>7|$<<32-7),N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,$=u[(H+14)%16],W=c[(H+14)%16],S=($>>>19|W<<32-19)^(W>>>61-32|$<<32-(61-32))^$>>>6,C=(W>>>19|$<<32-19)^($>>>61-32|W<<32-(61-32))^(W>>>6|$<<32-6),N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,u[H]=M&65535|B<<16,c[H]=N&65535|U<<16}S=A,C=b,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[0],C=_[0],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[0]=A=M&65535|B<<16,_[0]=b=N&65535|U<<16,S=j,C=i,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[1],C=_[1],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[1]=j=M&65535|B<<16,_[1]=i=N&65535|U<<16,S=I,C=l,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[2],C=_[2],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[2]=I=M&65535|B<<16,_[2]=l=N&65535|U<<16,S=K,C=P,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[3],C=_[3],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[3]=K=M&65535|B<<16,_[3]=P=N&65535|U<<16,S=w,C=z,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[4],C=_[4],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[4]=w=M&65535|B<<16,_[4]=z=N&65535|U<<16,S=T,C=q,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[5],C=_[5],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[5]=T=M&65535|B<<16,_[5]=q=N&65535|U<<16,S=v,C=X,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[6],C=_[6],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[6]=v=M&65535|B<<16,_[6]=X=N&65535|U<<16,S=y,C=J,N=C&65535,U=C>>>16,M=S&65535,B=S>>>16,S=d[7],C=_[7],N+=C&65535,U+=C>>>16,M+=S&65535,B+=S>>>16,U+=N>>>16,M+=U>>>16,B+=M>>>16,d[7]=y=M&65535|B<<16,_[7]=J=N&65535|U<<16,L+=128,D-=128}return L}function f(u){var c=new n;c.update(u);var d=c.digest();return c.clean(),d}t.hash=f})(li),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Kt,r=li,n=it;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function a(x){var O=new Float64Array(16);if(x)for(var p=0;p<x.length;p++)O[p]=x[p];return O}var o=new Uint8Array(32);o[0]=9;var f=a(),u=a([1]),c=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),L=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function D(x,O){for(var p=0;p<16;p++)x[p]=O[p]|0}function A(x){for(var O=1,p=0;p<16;p++){var s=x[p]+O+65535;O=Math.floor(s/65536),x[p]=s-O*65536}x[0]+=O-1+37*(O-1)}function j(x,O,p){for(var s=~(p-1),g=0;g<16;g++){var F=s&(x[g]^O[g]);x[g]^=F,O[g]^=F}}function I(x,O){for(var p=a(),s=a(),g=0;g<16;g++)s[g]=O[g];A(s),A(s),A(s);for(var F=0;F<2;F++){p[0]=s[0]-65517;for(var g=1;g<15;g++)p[g]=s[g]-65535-(p[g-1]>>16&1),p[g-1]&=65535;p[15]=s[15]-32767-(p[14]>>16&1);var Y=p[15]>>16&1;p[14]&=65535,j(s,p,1-Y)}for(var g=0;g<16;g++)x[2*g]=s[g]&255,x[2*g+1]=s[g]>>8}function K(x,O){for(var p=0,s=0;s<32;s++)p|=x[s]^O[s];return(1&p-1>>>8)-1}function w(x,O){var p=new Uint8Array(32),s=new Uint8Array(32);return I(p,x),I(s,O),K(p,s)}function T(x){var O=new Uint8Array(32);return I(O,x),O[0]&1}function v(x,O){for(var p=0;p<16;p++)x[p]=O[2*p]+(O[2*p+1]<<8);x[15]&=32767}function y(x,O,p){for(var s=0;s<16;s++)x[s]=O[s]+p[s]}function b(x,O,p){for(var s=0;s<16;s++)x[s]=O[s]-p[s]}function i(x,O,p){var s,g,F=0,Y=0,he=0,be=0,de=0,Ee=0,Ie=0,Ae=0,ve=0,_e=0,le=0,fe=0,ue=0,ae=0,se=0,ee=0,ce=0,ge=0,re=0,ye=0,pe=0,De=0,me=0,we=0,ht=0,gt=0,St=0,st=0,It=0,ur=0,Rr=0,Ne=p[0],Ce=p[1],Ue=p[2],Pe=p[3],Me=p[4],Le=p[5],Ke=p[6],$e=p[7],Ge=p[8],We=p[9],Ve=p[10],Fe=p[11],je=p[12],xe=p[13],Ye=p[14],qe=p[15];s=O[0],F+=s*Ne,Y+=s*Ce,he+=s*Ue,be+=s*Pe,de+=s*Me,Ee+=s*Le,Ie+=s*Ke,Ae+=s*$e,ve+=s*Ge,_e+=s*We,le+=s*Ve,fe+=s*Fe,ue+=s*je,ae+=s*xe,se+=s*Ye,ee+=s*qe,s=O[1],Y+=s*Ne,he+=s*Ce,be+=s*Ue,de+=s*Pe,Ee+=s*Me,Ie+=s*Le,Ae+=s*Ke,ve+=s*$e,_e+=s*Ge,le+=s*We,fe+=s*Ve,ue+=s*Fe,ae+=s*je,se+=s*xe,ee+=s*Ye,ce+=s*qe,s=O[2],he+=s*Ne,be+=s*Ce,de+=s*Ue,Ee+=s*Pe,Ie+=s*Me,Ae+=s*Le,ve+=s*Ke,_e+=s*$e,le+=s*Ge,fe+=s*We,ue+=s*Ve,ae+=s*Fe,se+=s*je,ee+=s*xe,ce+=s*Ye,ge+=s*qe,s=O[3],be+=s*Ne,de+=s*Ce,Ee+=s*Ue,Ie+=s*Pe,Ae+=s*Me,ve+=s*Le,_e+=s*Ke,le+=s*$e,fe+=s*Ge,ue+=s*We,ae+=s*Ve,se+=s*Fe,ee+=s*je,ce+=s*xe,ge+=s*Ye,re+=s*qe,s=O[4],de+=s*Ne,Ee+=s*Ce,Ie+=s*Ue,Ae+=s*Pe,ve+=s*Me,_e+=s*Le,le+=s*Ke,fe+=s*$e,ue+=s*Ge,ae+=s*We,se+=s*Ve,ee+=s*Fe,ce+=s*je,ge+=s*xe,re+=s*Ye,ye+=s*qe,s=O[5],Ee+=s*Ne,Ie+=s*Ce,Ae+=s*Ue,ve+=s*Pe,_e+=s*Me,le+=s*Le,fe+=s*Ke,ue+=s*$e,ae+=s*Ge,se+=s*We,ee+=s*Ve,ce+=s*Fe,ge+=s*je,re+=s*xe,ye+=s*Ye,pe+=s*qe,s=O[6],Ie+=s*Ne,Ae+=s*Ce,ve+=s*Ue,_e+=s*Pe,le+=s*Me,fe+=s*Le,ue+=s*Ke,ae+=s*$e,se+=s*Ge,ee+=s*We,ce+=s*Ve,ge+=s*Fe,re+=s*je,ye+=s*xe,pe+=s*Ye,De+=s*qe,s=O[7],Ae+=s*Ne,ve+=s*Ce,_e+=s*Ue,le+=s*Pe,fe+=s*Me,ue+=s*Le,ae+=s*Ke,se+=s*$e,ee+=s*Ge,ce+=s*We,ge+=s*Ve,re+=s*Fe,ye+=s*je,pe+=s*xe,De+=s*Ye,me+=s*qe,s=O[8],ve+=s*Ne,_e+=s*Ce,le+=s*Ue,fe+=s*Pe,ue+=s*Me,ae+=s*Le,se+=s*Ke,ee+=s*$e,ce+=s*Ge,ge+=s*We,re+=s*Ve,ye+=s*Fe,pe+=s*je,De+=s*xe,me+=s*Ye,we+=s*qe,s=O[9],_e+=s*Ne,le+=s*Ce,fe+=s*Ue,ue+=s*Pe,ae+=s*Me,se+=s*Le,ee+=s*Ke,ce+=s*$e,ge+=s*Ge,re+=s*We,ye+=s*Ve,pe+=s*Fe,De+=s*je,me+=s*xe,we+=s*Ye,ht+=s*qe,s=O[10],le+=s*Ne,fe+=s*Ce,ue+=s*Ue,ae+=s*Pe,se+=s*Me,ee+=s*Le,ce+=s*Ke,ge+=s*$e,re+=s*Ge,ye+=s*We,pe+=s*Ve,De+=s*Fe,me+=s*je,we+=s*xe,ht+=s*Ye,gt+=s*qe,s=O[11],fe+=s*Ne,ue+=s*Ce,ae+=s*Ue,se+=s*Pe,ee+=s*Me,ce+=s*Le,ge+=s*Ke,re+=s*$e,ye+=s*Ge,pe+=s*We,De+=s*Ve,me+=s*Fe,we+=s*je,ht+=s*xe,gt+=s*Ye,St+=s*qe,s=O[12],ue+=s*Ne,ae+=s*Ce,se+=s*Ue,ee+=s*Pe,ce+=s*Me,ge+=s*Le,re+=s*Ke,ye+=s*$e,pe+=s*Ge,De+=s*We,me+=s*Ve,we+=s*Fe,ht+=s*je,gt+=s*xe,St+=s*Ye,st+=s*qe,s=O[13],ae+=s*Ne,se+=s*Ce,ee+=s*Ue,ce+=s*Pe,ge+=s*Me,re+=s*Le,ye+=s*Ke,pe+=s*$e,De+=s*Ge,me+=s*We,we+=s*Ve,ht+=s*Fe,gt+=s*je,St+=s*xe,st+=s*Ye,It+=s*qe,s=O[14],se+=s*Ne,ee+=s*Ce,ce+=s*Ue,ge+=s*Pe,re+=s*Me,ye+=s*Le,pe+=s*Ke,De+=s*$e,me+=s*Ge,we+=s*We,ht+=s*Ve,gt+=s*Fe,St+=s*je,st+=s*xe,It+=s*Ye,ur+=s*qe,s=O[15],ee+=s*Ne,ce+=s*Ce,ge+=s*Ue,re+=s*Pe,ye+=s*Me,pe+=s*Le,De+=s*Ke,me+=s*$e,we+=s*Ge,ht+=s*We,gt+=s*Ve,St+=s*Fe,st+=s*je,It+=s*xe,ur+=s*Ye,Rr+=s*qe,F+=38*ce,Y+=38*ge,he+=38*re,be+=38*ye,de+=38*pe,Ee+=38*De,Ie+=38*me,Ae+=38*we,ve+=38*ht,_e+=38*gt,le+=38*St,fe+=38*st,ue+=38*It,ae+=38*ur,se+=38*Rr,g=1,s=F+g+65535,g=Math.floor(s/65536),F=s-g*65536,s=Y+g+65535,g=Math.floor(s/65536),Y=s-g*65536,s=he+g+65535,g=Math.floor(s/65536),he=s-g*65536,s=be+g+65535,g=Math.floor(s/65536),be=s-g*65536,s=de+g+65535,g=Math.floor(s/65536),de=s-g*65536,s=Ee+g+65535,g=Math.floor(s/65536),Ee=s-g*65536,s=Ie+g+65535,g=Math.floor(s/65536),Ie=s-g*65536,s=Ae+g+65535,g=Math.floor(s/65536),Ae=s-g*65536,s=ve+g+65535,g=Math.floor(s/65536),ve=s-g*65536,s=_e+g+65535,g=Math.floor(s/65536),_e=s-g*65536,s=le+g+65535,g=Math.floor(s/65536),le=s-g*65536,s=fe+g+65535,g=Math.floor(s/65536),fe=s-g*65536,s=ue+g+65535,g=Math.floor(s/65536),ue=s-g*65536,s=ae+g+65535,g=Math.floor(s/65536),ae=s-g*65536,s=se+g+65535,g=Math.floor(s/65536),se=s-g*65536,s=ee+g+65535,g=Math.floor(s/65536),ee=s-g*65536,F+=g-1+37*(g-1),g=1,s=F+g+65535,g=Math.floor(s/65536),F=s-g*65536,s=Y+g+65535,g=Math.floor(s/65536),Y=s-g*65536,s=he+g+65535,g=Math.floor(s/65536),he=s-g*65536,s=be+g+65535,g=Math.floor(s/65536),be=s-g*65536,s=de+g+65535,g=Math.floor(s/65536),de=s-g*65536,s=Ee+g+65535,g=Math.floor(s/65536),Ee=s-g*65536,s=Ie+g+65535,g=Math.floor(s/65536),Ie=s-g*65536,s=Ae+g+65535,g=Math.floor(s/65536),Ae=s-g*65536,s=ve+g+65535,g=Math.floor(s/65536),ve=s-g*65536,s=_e+g+65535,g=Math.floor(s/65536),_e=s-g*65536,s=le+g+65535,g=Math.floor(s/65536),le=s-g*65536,s=fe+g+65535,g=Math.floor(s/65536),fe=s-g*65536,s=ue+g+65535,g=Math.floor(s/65536),ue=s-g*65536,s=ae+g+65535,g=Math.floor(s/65536),ae=s-g*65536,s=se+g+65535,g=Math.floor(s/65536),se=s-g*65536,s=ee+g+65535,g=Math.floor(s/65536),ee=s-g*65536,F+=g-1+37*(g-1),x[0]=F,x[1]=Y,x[2]=he,x[3]=be,x[4]=de,x[5]=Ee,x[6]=Ie,x[7]=Ae,x[8]=ve,x[9]=_e,x[10]=le,x[11]=fe,x[12]=ue,x[13]=ae,x[14]=se,x[15]=ee}function l(x,O){i(x,O,O)}function P(x,O){var p=a(),s;for(s=0;s<16;s++)p[s]=O[s];for(s=253;s>=0;s--)l(p,p),s!==2&&s!==4&&i(p,p,O);for(s=0;s<16;s++)x[s]=p[s]}function z(x,O){var p=a(),s;for(s=0;s<16;s++)p[s]=O[s];for(s=250;s>=0;s--)l(p,p),s!==1&&i(p,p,O);for(s=0;s<16;s++)x[s]=p[s]}function q(x,O){var p=a(),s=a(),g=a(),F=a(),Y=a(),he=a(),be=a(),de=a(),Ee=a();b(p,x[1],x[0]),b(Ee,O[1],O[0]),i(p,p,Ee),y(s,x[0],x[1]),y(Ee,O[0],O[1]),i(s,s,Ee),i(g,x[3],O[3]),i(g,g,d),i(F,x[2],O[2]),y(F,F,F),b(Y,s,p),b(he,F,g),y(be,F,g),y(de,s,p),i(x[0],Y,he),i(x[1],de,be),i(x[2],be,he),i(x[3],Y,de)}function X(x,O,p){for(var s=0;s<4;s++)j(x[s],O[s],p)}function J(x,O){var p=a(),s=a(),g=a();P(g,O[2]),i(p,O[0],g),i(s,O[1],g),I(x,s),x[31]^=T(p)<<7}function S(x,O,p){D(x[0],f),D(x[1],u),D(x[2],u),D(x[3],f);for(var s=255;s>=0;--s){var g=p[s/8|0]>>(s&7)&1;X(x,O,g),q(O,x),q(x,x),X(x,O,g)}}function C(x,O){var p=[a(),a(),a(),a()];D(p[0],_),D(p[1],m),D(p[2],u),i(p[3],_,m),S(x,p,O)}function $(x){if(x.length!==t.SEED_LENGTH)throw new Error("ed25519: seed must be "+t.SEED_LENGTH+" bytes");var O=r.hash(x);O[0]&=248,O[31]&=127,O[31]|=64;var p=new Uint8Array(32),s=[a(),a(),a(),a()];C(s,O),J(p,s);var g=new Uint8Array(64);return g.set(x),g.set(p,32),{publicKey:p,secretKey:g}}t.generateKeyPairFromSeed=$;function W(x){var O=e.randomBytes(32,x),p=$(O);return n.wipe(O),p}t.generateKeyPair=W;function N(x){if(x.length!==t.SECRET_KEY_LENGTH)throw new Error("ed25519: secret key must be "+t.SECRET_KEY_LENGTH+" bytes");return new Uint8Array(x.subarray(32))}t.extractPublicKeyFromSecretKey=N;var U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(x,O){var p,s,g,F;for(s=63;s>=32;--s){for(p=0,g=s-32,F=s-12;g<F;++g)O[g]+=p-16*O[s]*U[g-(s-32)],p=Math.floor((O[g]+128)/256),O[g]-=p*256;O[g]+=p,O[s]=0}for(p=0,g=0;g<32;g++)O[g]+=p-(O[31]>>4)*U[g],p=O[g]>>8,O[g]&=255;for(g=0;g<32;g++)O[g]-=p*U[g];for(s=0;s<32;s++)O[s+1]+=O[s]>>8,x[s]=O[s]&255}function B(x){for(var O=new Float64Array(64),p=0;p<64;p++)O[p]=x[p];for(var p=0;p<64;p++)x[p]=0;M(x,O)}function ne(x,O){var p=new Float64Array(64),s=[a(),a(),a(),a()],g=r.hash(x.subarray(0,32));g[0]&=248,g[31]&=127,g[31]|=64;var F=new Uint8Array(64);F.set(g.subarray(32),32);var Y=new r.SHA512;Y.update(F.subarray(32)),Y.update(O);var he=Y.digest();Y.clean(),B(he),C(s,he),J(F,s),Y.reset(),Y.update(F.subarray(0,32)),Y.update(x.subarray(32)),Y.update(O);var be=Y.digest();B(be);for(var de=0;de<32;de++)p[de]=he[de];for(var de=0;de<32;de++)for(var Ee=0;Ee<32;Ee++)p[de+Ee]+=be[de]*g[Ee];return M(F.subarray(32),p),F}t.sign=ne;function H(x,O){var p=a(),s=a(),g=a(),F=a(),Y=a(),he=a(),be=a();return D(x[2],u),v(x[1],O),l(g,x[1]),i(F,g,c),b(g,g,x[2]),y(F,x[2],F),l(Y,F),l(he,Y),i(be,he,Y),i(p,be,g),i(p,p,F),z(p,p),i(p,p,g),i(p,p,F),i(p,p,F),i(x[0],p,F),l(s,x[0]),i(s,s,F),w(s,g)&&i(x[0],x[0],L),l(s,x[0]),i(s,s,F),w(s,g)?-1:(T(x[0])===O[31]>>7&&b(x[0],f,x[0]),i(x[3],x[0],x[1]),0)}function Z(x,O,p){var s=new Uint8Array(32),g=[a(),a(),a(),a()],F=[a(),a(),a(),a()];if(p.length!==t.SIGNATURE_LENGTH)throw new Error("ed25519: signature must be "+t.SIGNATURE_LENGTH+" bytes");if(H(F,x))return!1;var Y=new r.SHA512;Y.update(p.subarray(0,32)),Y.update(x),Y.update(O);var he=Y.digest();return B(he),S(g,F,he),C(F,p.subarray(32)),q(g,F),J(s,g),!K(p,s)}t.verify=Z;function V(x){var O=[a(),a(),a(),a()];if(H(O,x))throw new Error("Ed25519: invalid public key");var p=a(),s=a(),g=O[1];y(p,u,g),b(s,u,g),P(s,s),i(p,p,s);var F=new Uint8Array(32);return I(F,p),F}t.convertPublicKeyToX25519=V;function oe(x){var O=r.hash(x.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;var p=new Uint8Array(O.subarray(0,32));return n.wipe(O),p}t.convertSecretKeyToX25519=oe}(en);const ru="EdDSA",nu="JWT",di=".",_i="base64url",iu="utf8",su="utf8",au=":",ou="did",uu="key",gi="base58btc",fu="z",cu="K36",hu=32;function vi(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function fn(t,e){e||(e=t.reduce((a,o)=>a+o.length,0));const r=vi(e);let n=0;for(const a of t)r.set(a,n),n+=a.length;return r}function lu(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<t.length;a++){var o=t.charAt(a),f=o.charCodeAt(0);if(r[f]!==255)throw new TypeError(o+" is ambiguous");r[f]=a}var u=t.length,c=t.charAt(0),d=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function m(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var j=0,I=0,K=0,w=A.length;K!==w&&A[K]===0;)K++,j++;for(var T=(w-K)*_+1>>>0,v=new Uint8Array(T);K!==w;){for(var y=A[K],b=0,i=T-1;(y!==0||b<I)&&i!==-1;i--,b++)y+=256*v[i]>>>0,v[i]=y%u>>>0,y=y/u>>>0;if(y!==0)throw new Error("Non-zero carry");I=b,K++}for(var l=T-I;l!==T&&v[l]===0;)l++;for(var P=c.repeat(j);l<T;++l)P+=t.charAt(v[l]);return P}function L(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var j=0;if(A[j]!==" "){for(var I=0,K=0;A[j]===c;)I++,j++;for(var w=(A.length-j)*d+1>>>0,T=new Uint8Array(w);A[j];){var v=r[A.charCodeAt(j)];if(v===255)return;for(var y=0,b=w-1;(v!==0||y<K)&&b!==-1;b--,y++)v+=u*T[b]>>>0,T[b]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");K=y,j++}if(A[j]!==" "){for(var i=w-K;i!==w&&T[i]===0;)i++;for(var l=new Uint8Array(I+(w-i)),P=I;i!==w;)l[P++]=T[i++];return l}}}function D(A){var j=L(A);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:L,decode:D}}var du=lu,_u=du;const bi=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},gu=t=>new TextEncoder().encode(t),vu=t=>new TextDecoder().decode(t);class bu{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yu{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yi(this,e)}}class pu{constructor(e){this.decoders=e}or(e){return yi(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yi=(t,e)=>new pu({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Eu{constructor(e,r,n,a){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new bu(e,r,n),this.decoder=new yu(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Dr=({name:t,prefix:e,encode:r,decode:n})=>new Eu(t,e,r,n),rr=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:a}=_u(r,e);return Dr({prefix:t,name:e,encode:n,decode:o=>bi(a(o))})},wu=(t,e,r,n)=>{const a={};for(let _=0;_<e.length;++_)a[e[_]]=_;let o=t.length;for(;t[o-1]==="=";)--o;const f=new Uint8Array(o*r/8|0);let u=0,c=0,d=0;for(let _=0;_<o;++_){const m=a[t[_]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|m,u+=r,u>=8&&(u-=8,f[d++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return f},Du=(t,e,r)=>{const n=e[e.length-1]==="=",a=(1<<r)-1;let o="",f=0,u=0;for(let c=0;c<t.length;++c)for(u=u<<8|t[c],f+=8;f>r;)f-=r,o+=e[a&u>>f];if(f&&(o+=e[a&u<<r-f]),n)for(;o.length*r&7;)o+="=";return o},Je=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Dr({prefix:e,name:t,encode(a){return Du(a,n,r)},decode(a){return wu(a,n,r,t)}}),mu=Dr({prefix:"\0",name:"identity",encode:t=>vu(t),decode:t=>gu(t)});var Su=Object.freeze({__proto__:null,identity:mu});const Ou=Je({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xu=Object.freeze({__proto__:null,base2:Ou});const Tu=Je({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Au=Object.freeze({__proto__:null,base8:Tu});const Cu=rr({prefix:"9",name:"base10",alphabet:"0123456789"});var Lu=Object.freeze({__proto__:null,base10:Cu});const Ru=Je({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Iu=Je({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Nu=Object.freeze({__proto__:null,base16:Ru,base16upper:Iu});const Uu=Je({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pu=Je({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mu=Je({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ju=Je({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bu=Je({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fu=Je({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hu=Je({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zu=Je({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ku=Je({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $u=Object.freeze({__proto__:null,base32:Uu,base32upper:Pu,base32pad:Mu,base32padupper:ju,base32hex:Bu,base32hexupper:Fu,base32hexpad:Hu,base32hexpadupper:zu,base32z:Ku});const Gu=rr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Wu=rr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Vu=Object.freeze({__proto__:null,base36:Gu,base36upper:Wu});const Yu=rr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qu=rr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xu=Object.freeze({__proto__:null,base58btc:Yu,base58flickr:qu});const Ju=Je({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qu=Je({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zu=Je({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ku=Je({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ef=Object.freeze({__proto__:null,base64:Ju,base64pad:Qu,base64url:Zu,base64urlpad:ku});const pi=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),tf=pi.reduce((t,e,r)=>(t[r]=e,t),[]),rf=pi.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function nf(t){return t.reduce((e,r)=>(e+=tf[r],e),"")}function sf(t){const e=[];for(const r of t){const n=rf[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const af=Dr({prefix:"\u{1F680}",name:"base256emoji",encode:nf,decode:sf});var of=Object.freeze({__proto__:null,base256emoji:af}),uf=wi,Ei=128,ff=127,cf=~ff,hf=Math.pow(2,31);function wi(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hf;)e[r++]=t&255|Ei,t/=128;for(;t&cf;)e[r++]=t&255|Ei,t>>>=7;return e[r]=t|0,wi.bytes=r-n+1,e}var lf=cn,df=128,Di=127;function cn(t,n){var r=0,n=n||0,a=0,o=n,f,u=t.length;do{if(o>=u)throw cn.bytes=0,new RangeError("Could not decode varint");f=t[o++],r+=a<28?(f&Di)<<a:(f&Di)*Math.pow(2,a),a+=7}while(f>=df);return cn.bytes=o-n,r}var _f=Math.pow(2,7),gf=Math.pow(2,14),vf=Math.pow(2,21),bf=Math.pow(2,28),yf=Math.pow(2,35),pf=Math.pow(2,42),Ef=Math.pow(2,49),wf=Math.pow(2,56),Df=Math.pow(2,63),mf=function(t){return t<_f?1:t<gf?2:t<vf?3:t<bf?4:t<yf?5:t<pf?6:t<Ef?7:t<wf?8:t<Df?9:10},Sf={encode:uf,decode:lf,encodingLength:mf},mi=Sf;const Si=(t,e,r=0)=>(mi.encode(t,e,r),e),Oi=t=>mi.encodingLength(t),hn=(t,e)=>{const r=e.byteLength,n=Oi(t),a=n+Oi(r),o=new Uint8Array(a+r);return Si(t,o,0),Si(r,o,n),o.set(e,a),new Of(t,r,e,o)};class Of{constructor(e,r,n,a){this.code=e,this.size=r,this.digest=n,this.bytes=a}}const xi=({name:t,code:e,encode:r})=>new xf(t,e,r);class xf{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?hn(this.code,r):r.then(n=>hn(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Ti=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Tf=xi({name:"sha2-256",code:18,encode:Ti("SHA-256")}),Af=xi({name:"sha2-512",code:19,encode:Ti("SHA-512")});var Cf=Object.freeze({__proto__:null,sha256:Tf,sha512:Af});const Ai=0,Lf="identity",Ci=bi;var Rf=Object.freeze({__proto__:null,identity:{code:Ai,name:Lf,encode:Ci,digest:t=>hn(Ai,Ci(t))}});new TextEncoder,new TextDecoder;const Li={...Su,...xu,...Au,...Lu,...Nu,...$u,...Vu,...Xu,...ef,...of};({...Cf,...Rf});function Ri(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ii=Ri("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ln=Ri("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=vi(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Ni={utf8:Ii,"utf-8":Ii,hex:Li.base16,latin1:ln,ascii:ln,binary:ln,...Li};function rt(t,e="utf8"){const r=Ni[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function tt(t,e="utf8"){const r=Ni[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function mr(t){return rt(tt(kr(t),iu),_i)}function Ui(t){const e=tt(cu,gi),r=fu+rt(fn([e,t]),gi);return[ou,uu,r].join(au)}function If(t){return rt(t,_i)}function Nf(t){return tt([mr(t.header),mr(t.payload)].join(di),su)}function Uf(t){return[mr(t.header),mr(t.payload),If(t.signature)].join(di)}function Pi(t=Kt.randomBytes(hu)){return en.generateKeyPairFromSeed(t)}async function Pf(t,e,r,n,a=ft.fromMiliseconds(Date.now())){const o={alg:ru,typ:nu},f=Ui(n.publicKey),u=a+r,c={iss:f,sub:t,aud:e,iat:a,exp:u},d=Nf({header:o,payload:c}),_=en.sign(n.secretKey,d);return Uf({header:o,payload:c,signature:_})}var dn={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});var Ze=te,_n=it,Mf=20;function jf(t,e,r){for(var n=1634760805,a=857760878,o=2036477234,f=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],d=r[11]<<24|r[10]<<16|r[9]<<8|r[8],_=r[15]<<24|r[14]<<16|r[13]<<8|r[12],m=r[19]<<24|r[18]<<16|r[17]<<8|r[16],L=r[23]<<24|r[22]<<16|r[21]<<8|r[20],D=r[27]<<24|r[26]<<16|r[25]<<8|r[24],A=r[31]<<24|r[30]<<16|r[29]<<8|r[28],j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],I=e[7]<<24|e[6]<<16|e[5]<<8|e[4],K=e[11]<<24|e[10]<<16|e[9]<<8|e[8],w=e[15]<<24|e[14]<<16|e[13]<<8|e[12],T=n,v=a,y=o,b=f,i=u,l=c,P=d,z=_,q=m,X=L,J=D,S=A,C=j,$=I,W=K,N=w,U=0;U<Mf;U+=2)T=T+i|0,C^=T,C=C>>>32-16|C<<16,q=q+C|0,i^=q,i=i>>>32-12|i<<12,v=v+l|0,$^=v,$=$>>>32-16|$<<16,X=X+$|0,l^=X,l=l>>>32-12|l<<12,y=y+P|0,W^=y,W=W>>>32-16|W<<16,J=J+W|0,P^=J,P=P>>>32-12|P<<12,b=b+z|0,N^=b,N=N>>>32-16|N<<16,S=S+N|0,z^=S,z=z>>>32-12|z<<12,y=y+P|0,W^=y,W=W>>>32-8|W<<8,J=J+W|0,P^=J,P=P>>>32-7|P<<7,b=b+z|0,N^=b,N=N>>>32-8|N<<8,S=S+N|0,z^=S,z=z>>>32-7|z<<7,v=v+l|0,$^=v,$=$>>>32-8|$<<8,X=X+$|0,l^=X,l=l>>>32-7|l<<7,T=T+i|0,C^=T,C=C>>>32-8|C<<8,q=q+C|0,i^=q,i=i>>>32-7|i<<7,T=T+l|0,N^=T,N=N>>>32-16|N<<16,J=J+N|0,l^=J,l=l>>>32-12|l<<12,v=v+P|0,C^=v,C=C>>>32-16|C<<16,S=S+C|0,P^=S,P=P>>>32-12|P<<12,y=y+z|0,$^=y,$=$>>>32-16|$<<16,q=q+$|0,z^=q,z=z>>>32-12|z<<12,b=b+i|0,W^=b,W=W>>>32-16|W<<16,X=X+W|0,i^=X,i=i>>>32-12|i<<12,y=y+z|0,$^=y,$=$>>>32-8|$<<8,q=q+$|0,z^=q,z=z>>>32-7|z<<7,b=b+i|0,W^=b,W=W>>>32-8|W<<8,X=X+W|0,i^=X,i=i>>>32-7|i<<7,v=v+P|0,C^=v,C=C>>>32-8|C<<8,S=S+C|0,P^=S,P=P>>>32-7|P<<7,T=T+l|0,N^=T,N=N>>>32-8|N<<8,J=J+N|0,l^=J,l=l>>>32-7|l<<7;Ze.writeUint32LE(T+n|0,t,0),Ze.writeUint32LE(v+a|0,t,4),Ze.writeUint32LE(y+o|0,t,8),Ze.writeUint32LE(b+f|0,t,12),Ze.writeUint32LE(i+u|0,t,16),Ze.writeUint32LE(l+c|0,t,20),Ze.writeUint32LE(P+d|0,t,24),Ze.writeUint32LE(z+_|0,t,28),Ze.writeUint32LE(q+m|0,t,32),Ze.writeUint32LE(X+L|0,t,36),Ze.writeUint32LE(J+D|0,t,40),Ze.writeUint32LE(S+A|0,t,44),Ze.writeUint32LE(C+j|0,t,48),Ze.writeUint32LE($+I|0,t,52),Ze.writeUint32LE(W+K|0,t,56),Ze.writeUint32LE(N+w|0,t,60)}function Mi(t,e,r,n,a){if(a===void 0&&(a=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,f;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),f=o.length-e.length,o.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,f=a}for(var u=new Uint8Array(64),c=0;c<r.length;c+=64){jf(u,o,t);for(var d=c;d<c+64&&d<r.length;d++)n[d]=r[d]^u[d-c];Ff(o,0,f)}return _n.wipe(u),a===0&&_n.wipe(o),n}Sr.streamXOR=Mi;function Bf(t,e,r,n){return n===void 0&&(n=0),_n.wipe(r),Mi(t,e,r,r,n)}Sr.stream=Bf;function Ff(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var ji={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});function Hf(t,e,r){return~(t-1)&e|t-1&r}Et.select=Hf;function zf(t,e){return(t|0)-(e|0)-1>>>31&1}Et.lessOrEqual=zf;function Bi(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Et.compare=Bi;function Kf(t,e){return t.length===0||e.length===0?!1:Bi(t,e)!==0}Et.equal=Kf,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Et,r=it;t.DIGEST_LENGTH=16;var n=function(){function f(u){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=u[0]|u[1]<<8;this._r[0]=c&8191;var d=u[2]|u[3]<<8;this._r[1]=(c>>>13|d<<3)&8191;var _=u[4]|u[5]<<8;this._r[2]=(d>>>10|_<<6)&7939;var m=u[6]|u[7]<<8;this._r[3]=(_>>>7|m<<9)&8191;var L=u[8]|u[9]<<8;this._r[4]=(m>>>4|L<<12)&255,this._r[5]=L>>>1&8190;var D=u[10]|u[11]<<8;this._r[6]=(L>>>14|D<<2)&8191;var A=u[12]|u[13]<<8;this._r[7]=(D>>>11|A<<5)&8065;var j=u[14]|u[15]<<8;this._r[8]=(A>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return f.prototype._blocks=function(u,c,d){for(var _=this._fin?0:2048,m=this._h[0],L=this._h[1],D=this._h[2],A=this._h[3],j=this._h[4],I=this._h[5],K=this._h[6],w=this._h[7],T=this._h[8],v=this._h[9],y=this._r[0],b=this._r[1],i=this._r[2],l=this._r[3],P=this._r[4],z=this._r[5],q=this._r[6],X=this._r[7],J=this._r[8],S=this._r[9];d>=16;){var C=u[c+0]|u[c+1]<<8;m+=C&8191;var $=u[c+2]|u[c+3]<<8;L+=(C>>>13|$<<3)&8191;var W=u[c+4]|u[c+5]<<8;D+=($>>>10|W<<6)&8191;var N=u[c+6]|u[c+7]<<8;A+=(W>>>7|N<<9)&8191;var U=u[c+8]|u[c+9]<<8;j+=(N>>>4|U<<12)&8191,I+=U>>>1&8191;var M=u[c+10]|u[c+11]<<8;K+=(U>>>14|M<<2)&8191;var B=u[c+12]|u[c+13]<<8;w+=(M>>>11|B<<5)&8191;var ne=u[c+14]|u[c+15]<<8;T+=(B>>>8|ne<<8)&8191,v+=ne>>>5|_;var H=0,Z=H;Z+=m*y,Z+=L*(5*S),Z+=D*(5*J),Z+=A*(5*X),Z+=j*(5*q),H=Z>>>13,Z&=8191,Z+=I*(5*z),Z+=K*(5*P),Z+=w*(5*l),Z+=T*(5*i),Z+=v*(5*b),H+=Z>>>13,Z&=8191;var V=H;V+=m*b,V+=L*y,V+=D*(5*S),V+=A*(5*J),V+=j*(5*X),H=V>>>13,V&=8191,V+=I*(5*q),V+=K*(5*z),V+=w*(5*P),V+=T*(5*l),V+=v*(5*i),H+=V>>>13,V&=8191;var oe=H;oe+=m*i,oe+=L*b,oe+=D*y,oe+=A*(5*S),oe+=j*(5*J),H=oe>>>13,oe&=8191,oe+=I*(5*X),oe+=K*(5*q),oe+=w*(5*z),oe+=T*(5*P),oe+=v*(5*l),H+=oe>>>13,oe&=8191;var x=H;x+=m*l,x+=L*i,x+=D*b,x+=A*y,x+=j*(5*S),H=x>>>13,x&=8191,x+=I*(5*J),x+=K*(5*X),x+=w*(5*q),x+=T*(5*z),x+=v*(5*P),H+=x>>>13,x&=8191;var O=H;O+=m*P,O+=L*l,O+=D*i,O+=A*b,O+=j*y,H=O>>>13,O&=8191,O+=I*(5*S),O+=K*(5*J),O+=w*(5*X),O+=T*(5*q),O+=v*(5*z),H+=O>>>13,O&=8191;var p=H;p+=m*z,p+=L*P,p+=D*l,p+=A*i,p+=j*b,H=p>>>13,p&=8191,p+=I*y,p+=K*(5*S),p+=w*(5*J),p+=T*(5*X),p+=v*(5*q),H+=p>>>13,p&=8191;var s=H;s+=m*q,s+=L*z,s+=D*P,s+=A*l,s+=j*i,H=s>>>13,s&=8191,s+=I*b,s+=K*y,s+=w*(5*S),s+=T*(5*J),s+=v*(5*X),H+=s>>>13,s&=8191;var g=H;g+=m*X,g+=L*q,g+=D*z,g+=A*P,g+=j*l,H=g>>>13,g&=8191,g+=I*i,g+=K*b,g+=w*y,g+=T*(5*S),g+=v*(5*J),H+=g>>>13,g&=8191;var F=H;F+=m*J,F+=L*X,F+=D*q,F+=A*z,F+=j*P,H=F>>>13,F&=8191,F+=I*l,F+=K*i,F+=w*b,F+=T*y,F+=v*(5*S),H+=F>>>13,F&=8191;var Y=H;Y+=m*S,Y+=L*J,Y+=D*X,Y+=A*q,Y+=j*z,H=Y>>>13,Y&=8191,Y+=I*P,Y+=K*l,Y+=w*i,Y+=T*b,Y+=v*y,H+=Y>>>13,Y&=8191,H=(H<<2)+H|0,H=H+Z|0,Z=H&8191,H=H>>>13,V+=H,m=Z,L=V,D=oe,A=x,j=O,I=p,K=s,w=g,T=F,v=Y,c+=16,d-=16}this._h[0]=m,this._h[1]=L,this._h[2]=D,this._h[3]=A,this._h[4]=j,this._h[5]=I,this._h[6]=K,this._h[7]=w,this._h[8]=T,this._h[9]=v},f.prototype.finish=function(u,c){c===void 0&&(c=0);var d=new Uint16Array(10),_,m,L,D;if(this._leftover){for(D=this._leftover,this._buffer[D++]=1;D<16;D++)this._buffer[D]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,D=2;D<10;D++)this._h[D]+=_,_=this._h[D]>>>13,this._h[D]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,d[0]=this._h[0]+5,_=d[0]>>>13,d[0]&=8191,D=1;D<10;D++)d[D]=this._h[D]+_,_=d[D]>>>13,d[D]&=8191;for(d[9]-=1<<13,m=(_^1)-1,D=0;D<10;D++)d[D]&=m;for(m=~m,D=0;D<10;D++)this._h[D]=this._h[D]&m|d[D];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,L=this._h[0]+this._pad[0],this._h[0]=L&65535,D=1;D<8;D++)L=(this._h[D]+this._pad[D]|0)+(L>>>16)|0,this._h[D]=L&65535;return u[c+0]=this._h[0]>>>0,u[c+1]=this._h[0]>>>8,u[c+2]=this._h[1]>>>0,u[c+3]=this._h[1]>>>8,u[c+4]=this._h[2]>>>0,u[c+5]=this._h[2]>>>8,u[c+6]=this._h[3]>>>0,u[c+7]=this._h[3]>>>8,u[c+8]=this._h[4]>>>0,u[c+9]=this._h[4]>>>8,u[c+10]=this._h[5]>>>0,u[c+11]=this._h[5]>>>8,u[c+12]=this._h[6]>>>0,u[c+13]=this._h[6]>>>8,u[c+14]=this._h[7]>>>0,u[c+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(u){var c=0,d=u.length,_;if(this._leftover){_=16-this._leftover,_>d&&(_=d);for(var m=0;m<_;m++)this._buffer[this._leftover+m]=u[c+m];if(d-=_,c+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(d>=16&&(_=d-d%16,this._blocks(u,c,_),c+=_,d-=_),d){for(var m=0;m<d;m++)this._buffer[this._leftover+m]=u[c+m];this._leftover+=d}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},f.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();t.Poly1305=n;function a(f,u){var c=new n(f);c.update(u);var d=c.digest();return c.clean(),d}t.oneTimeAuth=a;function o(f,u){return f.length!==t.DIGEST_LENGTH||u.length!==t.DIGEST_LENGTH?!1:e.equal(f,u)}t.equal=o}(ji),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Sr,r=ji,n=it,a=te,o=Et;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var f=new Uint8Array(16),u=function(){function c(d){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,d.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(d)}return c.prototype.seal=function(d,_,m,L){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var D=new Uint8Array(16);D.set(d,D.length-d.length);var A=new Uint8Array(32);e.stream(this._key,D,A,4);var j=_.length+this.tagLength,I;if(L){if(L.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");I=L}else I=new Uint8Array(j);return e.streamXOR(this._key,D,_,I,4),this._authenticate(I.subarray(I.length-this.tagLength,I.length),A,I.subarray(0,I.length-this.tagLength),m),n.wipe(D),I},c.prototype.open=function(d,_,m,L){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var D=new Uint8Array(16);D.set(d,D.length-d.length);var A=new Uint8Array(32);e.stream(this._key,D,A,4);var j=new Uint8Array(this.tagLength);if(this._authenticate(j,A,_.subarray(0,_.length-this.tagLength),m),!o.equal(j,_.subarray(_.length-this.tagLength,_.length)))return null;var I=_.length-this.tagLength,K;if(L){if(L.length!==I)throw new Error("ChaCha20Poly1305: incorrect destination length");K=L}else K=new Uint8Array(I);return e.streamXOR(this._key,D,_.subarray(0,_.length-this.tagLength),K,4),n.wipe(D),K},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(d,_,m,L){var D=new r.Poly1305(_);L&&(D.update(L),L.length%16>0&&D.update(f.subarray(L.length%16))),D.update(m),m.length%16>0&&D.update(f.subarray(m.length%16));var A=new Uint8Array(8);L&&a.writeUint64LE(L.length,A),D.update(A),a.writeUint64LE(m.length,A),D.update(A);for(var j=D.digest(),I=0;I<j.length;I++)d[I]=j[I];D.clean(),n.wipe(j),n.wipe(A)},c}();t.ChaCha20Poly1305=u}(dn);var Fi={},nr={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});function $f(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}gn.isSerializableHash=$f,Object.defineProperty(nr,"__esModule",{value:!0});var _t=gn,Gf=Et,Wf=it,Hi=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var a=0;a<n.length;a++)n[a]^=54;this._inner.update(n);for(var a=0;a<n.length;a++)n[a]^=106;this._outer.update(n),_t.isSerializableHash(this._inner)&&_t.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Wf.wipe(n)}return t.prototype.reset=function(){if(!_t.isSerializableHash(this._inner)||!_t.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){_t.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),_t.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!_t.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!_t.isSerializableHash(this._inner)||!_t.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!_t.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();nr.HMAC=Hi;function Vf(t,e,r){var n=new Hi(t,e);n.update(r);var a=n.digest();return n.clean(),a}nr.hmac=Vf,nr.equal=Gf.equal,Object.defineProperty(Fi,"__esModule",{value:!0});var zi=nr,Ki=it,Yf=function(){function t(e,r,n,a){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var o=zi.hmac(this._hash,n,r);this._hmac=new zi.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Ki.wipe(this._buffer),Ki.wipe(this._counter),this._bufpos=0},t}(),qf=Fi.HKDF=Yf,Or={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=te,r=it;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},u.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&d>0;)this._buffer[this._bufferLength++]=c[_++],d--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(_=o(this._temp,this._state,c,_,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=c[_++],d--;return this},u.prototype.finish=function(c){if(!this._finished){var d=this._bytesHashed,_=this._bufferLength,m=d/536870912|0,L=d<<3,D=d%64<56?64:128;this._buffer[_]=128;for(var A=_+1;A<D-8;A++)this._buffer[A]=0;e.writeUint32BE(m,this._buffer,D-8),e.writeUint32BE(L,this._buffer,D-4),o(this._temp,this._state,this._buffer,0,D),this._finished=!0}for(var A=0;A<this.digestLength/4;A++)e.writeUint32BE(this._state[A],c,A*4);return this},u.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},u}();t.SHA256=n;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(u,c,d,_,m){for(;m>=64;){for(var L=c[0],D=c[1],A=c[2],j=c[3],I=c[4],K=c[5],w=c[6],T=c[7],v=0;v<16;v++){var y=_+v*4;u[v]=e.readUint32BE(d,y)}for(var v=16;v<64;v++){var b=u[v-2],i=(b>>>17|b<<32-17)^(b>>>19|b<<32-19)^b>>>10;b=u[v-15];var l=(b>>>7|b<<32-7)^(b>>>18|b<<32-18)^b>>>3;u[v]=(i+u[v-7]|0)+(l+u[v-16]|0)}for(var v=0;v<64;v++){var i=(((I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7))+(I&K^~I&w)|0)+(T+(a[v]+u[v]|0)|0)|0,l=((L>>>2|L<<32-2)^(L>>>13|L<<32-13)^(L>>>22|L<<32-22))+(L&D^L&A^D&A)|0;T=w,w=K,K=I,I=j+i|0,j=A,A=D,D=L,L=i+l|0}c[0]+=L,c[1]+=D,c[2]+=A,c[3]+=j,c[4]+=I,c[5]+=K,c[6]+=w,c[7]+=T,_+=64,m-=64}return _}function f(u){var c=new n;c.update(u);var d=c.digest();return c.clean(),d}t.hash=f})(Or);var vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Kt,r=it;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){var y=new Float64Array(16);if(v)for(var b=0;b<v.length;b++)y[b]=v[b];return y}var a=new Uint8Array(32);a[0]=9;var o=n([56129,1]);function f(v){for(var y=1,b=0;b<16;b++){var i=v[b]+y+65535;y=Math.floor(i/65536),v[b]=i-y*65536}v[0]+=y-1+37*(y-1)}function u(v,y,b){for(var i=~(b-1),l=0;l<16;l++){var P=i&(v[l]^y[l]);v[l]^=P,y[l]^=P}}function c(v,y){for(var b=n(),i=n(),l=0;l<16;l++)i[l]=y[l];f(i),f(i),f(i);for(var P=0;P<2;P++){b[0]=i[0]-65517;for(var l=1;l<15;l++)b[l]=i[l]-65535-(b[l-1]>>16&1),b[l-1]&=65535;b[15]=i[15]-32767-(b[14]>>16&1);var z=b[15]>>16&1;b[14]&=65535,u(i,b,1-z)}for(var l=0;l<16;l++)v[2*l]=i[l]&255,v[2*l+1]=i[l]>>8}function d(v,y){for(var b=0;b<16;b++)v[b]=y[2*b]+(y[2*b+1]<<8);v[15]&=32767}function _(v,y,b){for(var i=0;i<16;i++)v[i]=y[i]+b[i]}function m(v,y,b){for(var i=0;i<16;i++)v[i]=y[i]-b[i]}function L(v,y,b){var i,l,P=0,z=0,q=0,X=0,J=0,S=0,C=0,$=0,W=0,N=0,U=0,M=0,B=0,ne=0,H=0,Z=0,V=0,oe=0,x=0,O=0,p=0,s=0,g=0,F=0,Y=0,he=0,be=0,de=0,Ee=0,Ie=0,Ae=0,ve=b[0],_e=b[1],le=b[2],fe=b[3],ue=b[4],ae=b[5],se=b[6],ee=b[7],ce=b[8],ge=b[9],re=b[10],ye=b[11],pe=b[12],De=b[13],me=b[14],we=b[15];i=y[0],P+=i*ve,z+=i*_e,q+=i*le,X+=i*fe,J+=i*ue,S+=i*ae,C+=i*se,$+=i*ee,W+=i*ce,N+=i*ge,U+=i*re,M+=i*ye,B+=i*pe,ne+=i*De,H+=i*me,Z+=i*we,i=y[1],z+=i*ve,q+=i*_e,X+=i*le,J+=i*fe,S+=i*ue,C+=i*ae,$+=i*se,W+=i*ee,N+=i*ce,U+=i*ge,M+=i*re,B+=i*ye,ne+=i*pe,H+=i*De,Z+=i*me,V+=i*we,i=y[2],q+=i*ve,X+=i*_e,J+=i*le,S+=i*fe,C+=i*ue,$+=i*ae,W+=i*se,N+=i*ee,U+=i*ce,M+=i*ge,B+=i*re,ne+=i*ye,H+=i*pe,Z+=i*De,V+=i*me,oe+=i*we,i=y[3],X+=i*ve,J+=i*_e,S+=i*le,C+=i*fe,$+=i*ue,W+=i*ae,N+=i*se,U+=i*ee,M+=i*ce,B+=i*ge,ne+=i*re,H+=i*ye,Z+=i*pe,V+=i*De,oe+=i*me,x+=i*we,i=y[4],J+=i*ve,S+=i*_e,C+=i*le,$+=i*fe,W+=i*ue,N+=i*ae,U+=i*se,M+=i*ee,B+=i*ce,ne+=i*ge,H+=i*re,Z+=i*ye,V+=i*pe,oe+=i*De,x+=i*me,O+=i*we,i=y[5],S+=i*ve,C+=i*_e,$+=i*le,W+=i*fe,N+=i*ue,U+=i*ae,M+=i*se,B+=i*ee,ne+=i*ce,H+=i*ge,Z+=i*re,V+=i*ye,oe+=i*pe,x+=i*De,O+=i*me,p+=i*we,i=y[6],C+=i*ve,$+=i*_e,W+=i*le,N+=i*fe,U+=i*ue,M+=i*ae,B+=i*se,ne+=i*ee,H+=i*ce,Z+=i*ge,V+=i*re,oe+=i*ye,x+=i*pe,O+=i*De,p+=i*me,s+=i*we,i=y[7],$+=i*ve,W+=i*_e,N+=i*le,U+=i*fe,M+=i*ue,B+=i*ae,ne+=i*se,H+=i*ee,Z+=i*ce,V+=i*ge,oe+=i*re,x+=i*ye,O+=i*pe,p+=i*De,s+=i*me,g+=i*we,i=y[8],W+=i*ve,N+=i*_e,U+=i*le,M+=i*fe,B+=i*ue,ne+=i*ae,H+=i*se,Z+=i*ee,V+=i*ce,oe+=i*ge,x+=i*re,O+=i*ye,p+=i*pe,s+=i*De,g+=i*me,F+=i*we,i=y[9],N+=i*ve,U+=i*_e,M+=i*le,B+=i*fe,ne+=i*ue,H+=i*ae,Z+=i*se,V+=i*ee,oe+=i*ce,x+=i*ge,O+=i*re,p+=i*ye,s+=i*pe,g+=i*De,F+=i*me,Y+=i*we,i=y[10],U+=i*ve,M+=i*_e,B+=i*le,ne+=i*fe,H+=i*ue,Z+=i*ae,V+=i*se,oe+=i*ee,x+=i*ce,O+=i*ge,p+=i*re,s+=i*ye,g+=i*pe,F+=i*De,Y+=i*me,he+=i*we,i=y[11],M+=i*ve,B+=i*_e,ne+=i*le,H+=i*fe,Z+=i*ue,V+=i*ae,oe+=i*se,x+=i*ee,O+=i*ce,p+=i*ge,s+=i*re,g+=i*ye,F+=i*pe,Y+=i*De,he+=i*me,be+=i*we,i=y[12],B+=i*ve,ne+=i*_e,H+=i*le,Z+=i*fe,V+=i*ue,oe+=i*ae,x+=i*se,O+=i*ee,p+=i*ce,s+=i*ge,g+=i*re,F+=i*ye,Y+=i*pe,he+=i*De,be+=i*me,de+=i*we,i=y[13],ne+=i*ve,H+=i*_e,Z+=i*le,V+=i*fe,oe+=i*ue,x+=i*ae,O+=i*se,p+=i*ee,s+=i*ce,g+=i*ge,F+=i*re,Y+=i*ye,he+=i*pe,be+=i*De,de+=i*me,Ee+=i*we,i=y[14],H+=i*ve,Z+=i*_e,V+=i*le,oe+=i*fe,x+=i*ue,O+=i*ae,p+=i*se,s+=i*ee,g+=i*ce,F+=i*ge,Y+=i*re,he+=i*ye,be+=i*pe,de+=i*De,Ee+=i*me,Ie+=i*we,i=y[15],Z+=i*ve,V+=i*_e,oe+=i*le,x+=i*fe,O+=i*ue,p+=i*ae,s+=i*se,g+=i*ee,F+=i*ce,Y+=i*ge,he+=i*re,be+=i*ye,de+=i*pe,Ee+=i*De,Ie+=i*me,Ae+=i*we,P+=38*V,z+=38*oe,q+=38*x,X+=38*O,J+=38*p,S+=38*s,C+=38*g,$+=38*F,W+=38*Y,N+=38*he,U+=38*be,M+=38*de,B+=38*Ee,ne+=38*Ie,H+=38*Ae,l=1,i=P+l+65535,l=Math.floor(i/65536),P=i-l*65536,i=z+l+65535,l=Math.floor(i/65536),z=i-l*65536,i=q+l+65535,l=Math.floor(i/65536),q=i-l*65536,i=X+l+65535,l=Math.floor(i/65536),X=i-l*65536,i=J+l+65535,l=Math.floor(i/65536),J=i-l*65536,i=S+l+65535,l=Math.floor(i/65536),S=i-l*65536,i=C+l+65535,l=Math.floor(i/65536),C=i-l*65536,i=$+l+65535,l=Math.floor(i/65536),$=i-l*65536,i=W+l+65535,l=Math.floor(i/65536),W=i-l*65536,i=N+l+65535,l=Math.floor(i/65536),N=i-l*65536,i=U+l+65535,l=Math.floor(i/65536),U=i-l*65536,i=M+l+65535,l=Math.floor(i/65536),M=i-l*65536,i=B+l+65535,l=Math.floor(i/65536),B=i-l*65536,i=ne+l+65535,l=Math.floor(i/65536),ne=i-l*65536,i=H+l+65535,l=Math.floor(i/65536),H=i-l*65536,i=Z+l+65535,l=Math.floor(i/65536),Z=i-l*65536,P+=l-1+37*(l-1),l=1,i=P+l+65535,l=Math.floor(i/65536),P=i-l*65536,i=z+l+65535,l=Math.floor(i/65536),z=i-l*65536,i=q+l+65535,l=Math.floor(i/65536),q=i-l*65536,i=X+l+65535,l=Math.floor(i/65536),X=i-l*65536,i=J+l+65535,l=Math.floor(i/65536),J=i-l*65536,i=S+l+65535,l=Math.floor(i/65536),S=i-l*65536,i=C+l+65535,l=Math.floor(i/65536),C=i-l*65536,i=$+l+65535,l=Math.floor(i/65536),$=i-l*65536,i=W+l+65535,l=Math.floor(i/65536),W=i-l*65536,i=N+l+65535,l=Math.floor(i/65536),N=i-l*65536,i=U+l+65535,l=Math.floor(i/65536),U=i-l*65536,i=M+l+65535,l=Math.floor(i/65536),M=i-l*65536,i=B+l+65535,l=Math.floor(i/65536),B=i-l*65536,i=ne+l+65535,l=Math.floor(i/65536),ne=i-l*65536,i=H+l+65535,l=Math.floor(i/65536),H=i-l*65536,i=Z+l+65535,l=Math.floor(i/65536),Z=i-l*65536,P+=l-1+37*(l-1),v[0]=P,v[1]=z,v[2]=q,v[3]=X,v[4]=J,v[5]=S,v[6]=C,v[7]=$,v[8]=W,v[9]=N,v[10]=U,v[11]=M,v[12]=B,v[13]=ne,v[14]=H,v[15]=Z}function D(v,y){L(v,y,y)}function A(v,y){for(var b=n(),i=0;i<16;i++)b[i]=y[i];for(var i=253;i>=0;i--)D(b,b),i!==2&&i!==4&&L(b,b,y);for(var i=0;i<16;i++)v[i]=b[i]}function j(v,y){for(var b=new Uint8Array(32),i=new Float64Array(80),l=n(),P=n(),z=n(),q=n(),X=n(),J=n(),S=0;S<31;S++)b[S]=v[S];b[31]=v[31]&127|64,b[0]&=248,d(i,y);for(var S=0;S<16;S++)P[S]=i[S];l[0]=q[0]=1;for(var S=254;S>=0;--S){var C=b[S>>>3]>>>(S&7)&1;u(l,P,C),u(z,q,C),_(X,l,z),m(l,l,z),_(z,P,q),m(P,P,q),D(q,X),D(J,l),L(l,z,l),L(z,P,X),_(X,l,z),m(l,l,z),D(P,l),m(z,q,J),L(l,z,o),_(l,l,q),L(z,z,l),L(l,q,J),L(q,P,i),D(P,X),u(l,P,C),u(z,q,C)}for(var S=0;S<16;S++)i[S+16]=l[S],i[S+32]=z[S],i[S+48]=P[S],i[S+64]=q[S];var $=i.subarray(32),W=i.subarray(16);A($,$),L(W,W,$);var N=new Uint8Array(32);return c(N,W),N}t.scalarMult=j;function I(v){return j(v,a)}t.scalarMultBase=I;function K(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+t.SECRET_KEY_LENGTH+" bytes");var y=new Uint8Array(v),b=I(y);return{publicKey:b,secretKey:y}}t.generateKeyPairFromSeed=K;function w(v){var y=e.randomBytes(32,v),b=K(y);return r.wipe(y),b}t.generateKeyPair=w;function T(v,y,b){if(b===void 0&&(b=!1),v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(y.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=j(v,y);if(b){for(var l=0,P=0;P<i.length;P++)l|=i[P];if(l===0)throw new Error("X25519: invalid shared key")}return i}t.sharedKey=T})(vn);var $i=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Xf=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Jf=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Qf=function(){function t(e,r,n,a){this.name=e,this.version=r,this.os=n,this.bot=a,this.type="bot-device"}return t}(),Zf=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),kf=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),ec=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,tc=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gi=3,rc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ec]],Wi=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nc(t){return t?Vi(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new kf:typeof navigator<"u"?Vi(navigator.userAgent):ac()}function ic(t){return t!==""&&rc.reduce(function(e,r){var n=r[0],a=r[1];if(e)return e;var o=a.exec(t);return!!o&&[n,o]},!1)}function Vi(t){var e=ic(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Zf;var a=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);a?a.length<Gi&&(a=$i($i([],a,!0),oc(Gi-a.length),!0)):a=[];var o=a.join("."),f=sc(t),u=tc.exec(t);return u&&u[1]?new Qf(r,o,f,u[1]):new Xf(r,o,f)}function sc(t){for(var e=0,r=Wi.length;e<r;e++){var n=Wi[e],a=n[0],o=n[1],f=o.exec(t);if(f)return a}return null}function ac(){var t=typeof process<"u"&&process.version;return t?new Jf(process.version.slice(1)):null}function oc(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.getLocalStorage=Se.getLocalStorageOrThrow=Se.getCrypto=Se.getCryptoOrThrow=qi=Se.getLocation=Se.getLocationOrThrow=bn=Se.getNavigator=Se.getNavigatorOrThrow=Yi=Se.getDocument=Se.getDocumentOrThrow=Se.getFromWindowOrThrow=Se.getFromWindow=void 0;function Lt(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Se.getFromWindow=Lt;function $t(t){const e=Lt(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Se.getFromWindowOrThrow=$t;function uc(){return $t("document")}Se.getDocumentOrThrow=uc;function fc(){return Lt("document")}var Yi=Se.getDocument=fc;function cc(){return $t("navigator")}Se.getNavigatorOrThrow=cc;function hc(){return Lt("navigator")}var bn=Se.getNavigator=hc;function lc(){return $t("location")}Se.getLocationOrThrow=lc;function dc(){return Lt("location")}var qi=Se.getLocation=dc;function _c(){return $t("crypto")}Se.getCryptoOrThrow=_c;function gc(){return Lt("crypto")}Se.getCrypto=gc;function vc(){return $t("localStorage")}Se.getLocalStorageOrThrow=vc;function bc(){return Lt("localStorage")}Se.getLocalStorage=bc;var yn={};Object.defineProperty(yn,"__esModule",{value:!0}),yn.getWindowMetadata=void 0;const Xi=Se;function yc(){let t,e;try{t=Xi.getDocumentOrThrow(),e=Xi.getLocationOrThrow()}catch{return null}function r(){const m=t.getElementsByTagName("link"),L=[];for(let D=0;D<m.length;D++){const A=m[D],j=A.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const I=A.getAttribute("href");if(I)if(I.toLowerCase().indexOf("https:")===-1&&I.toLowerCase().indexOf("http:")===-1&&I.indexOf("//")!==0){let K=e.protocol+"//"+e.host;if(I.indexOf("/")===0)K+=I;else{const w=e.pathname.split("/");w.pop(),K+=w.join("/")+"/"+I}L.push(K)}else if(I.indexOf("//")===0){const K=e.protocol+I;L.push(K)}else L.push(I)}}return L}function n(...m){const L=t.getElementsByTagName("meta");for(let D=0;D<L.length;D++){const A=L[D],j=["itemprop","property","name"].map(I=>A.getAttribute(I)).filter(I=>I?m.includes(I):!1);if(j.length&&j){const I=A.getAttribute("content");if(I)return I}}return""}function a(){let m=n("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function o(){return n("description","og:description","twitter:description","keywords")}const f=a(),u=o(),c=e.origin,d=r();return{description:u,url:c,icons:d,name:f}}yn.getWindowMetadata=yc;var pn={},pc=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ji="%[a-f0-9]{2}",Qi=new RegExp(Ji,"gi"),Zi=new RegExp("("+Ji+")+","gi");function En(t,e){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],En(r),En(n))}function Ec(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Qi),r=1;r<e.length;r++)t=En(e,r).join(""),e=t.match(Qi);return t}}function wc(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Zi.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Ec(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Zi.exec(t)}e["%C2"]="\uFFFD";for(var a=Object.keys(e),o=0;o<a.length;o++){var f=a[o];t=t.replace(new RegExp(f,"g"),e[f])}return t}var Dc=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return wc(t)}},mc=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Sc=function(t,e){for(var r={},n=Object.keys(t),a=Array.isArray(e),o=0;o<n.length;o++){var f=n[o],u=t[f];(a?e.indexOf(f)!==-1:e(f,u,t))&&(r[f]=u)}return r};(function(t){const e=pc,r=Dc,n=mc,a=Sc,o=w=>w==null,f=Symbol("encodeFragmentIdentifier");function u(w){switch(w.arrayFormat){case"index":return T=>(v,y)=>{const b=v.length;return y===void 0||w.skipNull&&y===null||w.skipEmptyString&&y===""?v:y===null?[...v,[_(T,w),"[",b,"]"].join("")]:[...v,[_(T,w),"[",_(b,w),"]=",_(y,w)].join("")]};case"bracket":return T=>(v,y)=>y===void 0||w.skipNull&&y===null||w.skipEmptyString&&y===""?v:y===null?[...v,[_(T,w),"[]"].join("")]:[...v,[_(T,w),"[]=",_(y,w)].join("")];case"colon-list-separator":return T=>(v,y)=>y===void 0||w.skipNull&&y===null||w.skipEmptyString&&y===""?v:y===null?[...v,[_(T,w),":list="].join("")]:[...v,[_(T,w),":list=",_(y,w)].join("")];case"comma":case"separator":case"bracket-separator":{const T=w.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(y,b)=>b===void 0||w.skipNull&&b===null||w.skipEmptyString&&b===""?y:(b=b===null?"":b,y.length===0?[[_(v,w),T,_(b,w)].join("")]:[[y,_(b,w)].join(w.arrayFormatSeparator)])}default:return T=>(v,y)=>y===void 0||w.skipNull&&y===null||w.skipEmptyString&&y===""?v:y===null?[...v,_(T,w)]:[...v,[_(T,w),"=",_(y,w)].join("")]}}function c(w){let T;switch(w.arrayFormat){case"index":return(v,y,b)=>{if(T=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!T){b[v]=y;return}b[v]===void 0&&(b[v]={}),b[v][T[1]]=y};case"bracket":return(v,y,b)=>{if(T=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!T){b[v]=y;return}if(b[v]===void 0){b[v]=[y];return}b[v]=[].concat(b[v],y)};case"colon-list-separator":return(v,y,b)=>{if(T=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!T){b[v]=y;return}if(b[v]===void 0){b[v]=[y];return}b[v]=[].concat(b[v],y)};case"comma":case"separator":return(v,y,b)=>{const i=typeof y=="string"&&y.includes(w.arrayFormatSeparator),l=typeof y=="string"&&!i&&m(y,w).includes(w.arrayFormatSeparator);y=l?m(y,w):y;const P=i||l?y.split(w.arrayFormatSeparator).map(z=>m(z,w)):y===null?y:m(y,w);b[v]=P};case"bracket-separator":return(v,y,b)=>{const i=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!i){b[v]=y&&m(y,w);return}const l=y===null?[]:y.split(w.arrayFormatSeparator).map(P=>m(P,w));if(b[v]===void 0){b[v]=l;return}b[v]=[].concat(b[v],l)};default:return(v,y,b)=>{if(b[v]===void 0){b[v]=y;return}b[v]=[].concat(b[v],y)}}}function d(w){if(typeof w!="string"||w.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(w,T){return T.encode?T.strict?e(w):encodeURIComponent(w):w}function m(w,T){return T.decode?r(w):w}function L(w){return Array.isArray(w)?w.sort():typeof w=="object"?L(Object.keys(w)).sort((T,v)=>Number(T)-Number(v)).map(T=>w[T]):w}function D(w){const T=w.indexOf("#");return T!==-1&&(w=w.slice(0,T)),w}function A(w){let T="";const v=w.indexOf("#");return v!==-1&&(T=w.slice(v)),T}function j(w){w=D(w);const T=w.indexOf("?");return T===-1?"":w.slice(T+1)}function I(w,T){return T.parseNumbers&&!Number.isNaN(Number(w))&&typeof w=="string"&&w.trim()!==""?w=Number(w):T.parseBooleans&&w!==null&&(w.toLowerCase()==="true"||w.toLowerCase()==="false")&&(w=w.toLowerCase()==="true"),w}function K(w,T){T=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},T),d(T.arrayFormatSeparator);const v=c(T),y=Object.create(null);if(typeof w!="string"||(w=w.trim().replace(/^[?#&]/,""),!w))return y;for(const b of w.split("&")){if(b==="")continue;let[i,l]=n(T.decode?b.replace(/\+/g," "):b,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(T.arrayFormat)?l:m(l,T),v(m(i,T),l,y)}for(const b of Object.keys(y)){const i=y[b];if(typeof i=="object"&&i!==null)for(const l of Object.keys(i))i[l]=I(i[l],T);else y[b]=I(i,T)}return T.sort===!1?y:(T.sort===!0?Object.keys(y).sort():Object.keys(y).sort(T.sort)).reduce((b,i)=>{const l=y[i];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?b[i]=L(l):b[i]=l,b},Object.create(null))}t.extract=j,t.parse=K,t.stringify=(w,T)=>{if(!w)return"";T=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},T),d(T.arrayFormatSeparator);const v=l=>T.skipNull&&o(w[l])||T.skipEmptyString&&w[l]==="",y=u(T),b={};for(const l of Object.keys(w))v(l)||(b[l]=w[l]);const i=Object.keys(b);return T.sort!==!1&&i.sort(T.sort),i.map(l=>{const P=w[l];return P===void 0?"":P===null?_(l,T):Array.isArray(P)?P.length===0&&T.arrayFormat==="bracket-separator"?_(l,T)+"[]":P.reduce(y(l),[]).join("&"):_(l,T)+"="+_(P,T)}).filter(l=>l.length>0).join("&")},t.parseUrl=(w,T)=>{T=Object.assign({decode:!0},T);const[v,y]=n(w,"#");return Object.assign({url:v.split("?")[0]||"",query:K(j(w),T)},T&&T.parseFragmentIdentifier&&y?{fragmentIdentifier:m(y,T)}:{})},t.stringifyUrl=(w,T)=>{T=Object.assign({encode:!0,strict:!0,[f]:!0},T);const v=D(w.url).split("?")[0]||"",y=t.extract(w.url),b=t.parse(y,{sort:!1}),i=Object.assign(b,w.query);let l=t.stringify(i,T);l&&(l=`?${l}`);let P=A(w.url);return w.fragmentIdentifier&&(P=`#${T[f]?_(w.fragmentIdentifier,T):w.fragmentIdentifier}`),`${v}${l}${P}`},t.pick=(w,T,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[f]:!1},v);const{url:y,query:b,fragmentIdentifier:i}=t.parseUrl(w,v);return t.stringifyUrl({url:y,query:a(b,T),fragmentIdentifier:i},v)},t.exclude=(w,T,v)=>{const y=Array.isArray(T)?b=>!T.includes(b):(b,i)=>!T(b,i);return t.pick(w,y,v)}})(pn);const Oc={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}},ki="base10",nt="base16",wn="base64pad",Dn="utf8",es=0,ir=1,xc=0,ts=1,mn=12,Sn=32;function Tc(){const t=vn.generateKeyPair();return{privateKey:rt(t.secretKey,nt),publicKey:rt(t.publicKey,nt)}}function rs(){const t=Kt.randomBytes(Sn);return rt(t,nt)}function Ac(t,e){const r=vn.sharedKey(tt(t,nt),tt(e,nt)),n=new qf(Or.SHA256,r).expand(Sn);return rt(n,nt)}function Cc(t){const e=Or.hash(tt(t,nt));return rt(e,nt)}function xr(t){const e=Or.hash(tt(t,Dn));return rt(e,nt)}function Lc(t){return tt(`${t}`,ki)}function Tr(t){return Number(rt(t,ki))}function Rc(t){const e=Lc(typeof t.type<"u"?t.type:es);if(Tr(e)===ir&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?tt(t.senderPublicKey,nt):void 0,n=typeof t.iv<"u"?tt(t.iv,nt):Kt.randomBytes(mn),a=new dn.ChaCha20Poly1305(tt(t.symKey,nt)).seal(n,tt(t.message,Dn));return Nc({type:e,sealed:a,iv:n,senderPublicKey:r})}function Ic(t){const e=new dn.ChaCha20Poly1305(tt(t.symKey,nt)),{sealed:r,iv:n}=ns(t.encoded),a=e.open(n,r);if(a===null)throw new Error("Failed to decrypt");return rt(a,Dn)}function Nc(t){if(Tr(t.type)===ir){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return rt(fn([t.type,t.senderPublicKey,t.iv,t.sealed]),wn)}return rt(fn([t.type,t.iv,t.sealed]),wn)}function ns(t){const e=tt(t,wn),r=e.slice(xc,ts),n=ts;if(Tr(r)===ir){const u=n+Sn,c=u+mn,d=e.slice(n,u),_=e.slice(u,c),m=e.slice(c);return{type:r,sealed:m,iv:_,senderPublicKey:d}}const a=n+mn,o=e.slice(n,a),f=e.slice(a);return{type:r,sealed:f,iv:o}}function Uc(t,e){const r=ns(t);return is({type:Tr(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?rt(r.senderPublicKey,nt):void 0,receiverPublicKey:e?.receiverPublicKey})}function is(t){const e=t?.type||es;if(e===ir){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function ss(t){return t.type===ir&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Pc=Object.defineProperty,as=Object.getOwnPropertySymbols,Mc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,os=(t,e,r)=>e in t?Pc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,us=(t,e)=>{for(var r in e||(e={}))Mc.call(e,r)&&os(t,r,e[r]);if(as)for(var r of as(e))jc.call(e,r)&&os(t,r,e[r]);return t};const Bc="ReactNative",sr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Fc="js";function fs(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Hc(){return!Yi()&&!!bn()&&navigator.product===Bc}function zc(){return!fs()&&!!bn()}function Kc(){return Hc()?sr.reactNative:fs()?sr.node:zc()?sr.browser:sr.unknown}function $c(t,e){let r=pn.parse(t);return r=us(us({},r),e),t=pn.stringify(r),t}function Gc(){const t=nc();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Wc(){var t;const e=Kc();return e===sr.browser?[e,((t=qi())==null?void 0:t.host)||"unknown"].join(":"):e}function Vc(t,e,r){const n=Gc(),a=Wc();return[[t,e].join("-"),[Fc,r].join("-"),n,a].join("/")}function Yc({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:a,projectId:o}){const f=r.split("?"),u=Vc(t,e,n),c={auth:a,ua:u,projectId:o},d=$c(f[1]||"",c);return f[0]+"?"+d}function cs(t){return Object.fromEntries(t.entries())}function hs(t){return new Map(Object.entries(t))}const qc="irn";function On(t){return t?.relay||{protocol:qc}}function xn(t){const e=Oc[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}const Xc={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3}},Jc={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ct(t,e){const{message:r,code:n}=Jc[t];return{message:e?`${r} ${e}`:r,code:n}}function Qc(t,e){const{message:r,code:n}=Xc[t];return{message:e?`${r} ${e}`:r,code:n}}function Tn(t){return typeof t>"u"}function Zc(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function kc(t){return t?.topic}const An="wc",ls=2,Ar="core",Gt=`${An}@${2}:${Ar}:`,ds={name:Ar,logger:"error"},_s={database:":memory:"},gs="crypto",Cn="client_ed25519_seed",vs=ft.ONE_DAY,bs="keychain",ys="0.3",ps="messages",Es="0.3",ws=ft.SIX_HOURS,Ds="publisher",eh="irn",ms="error",Ss="wss://relay.walletconnect.com",Os="relayer",ar={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error"},xs="_subscription",Rt={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Ts=ft.ONE_SECOND,th={database:":memory:"},As="2.0.0-rc.1",Cs="0.3",wt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync"},rh=ft.THIRTY_DAYS,Ls="subscription",Rs="0.3",Is=ft.FIVE_SECONDS*1e3;class Ns{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=bs,this.version=ys,this.initialized=!1,this.storagePrefix=Gt,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,a)=>{this.isInitialized(),this.keychain.set(n,a),await this.persist()},this.get=n=>{this.isInitialized();const a=this.keychain.get(n);if(typeof a>"u"){const{message:o}=ct("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return a},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Be.generateChildLogger(r,this.name)}get context(){return Be.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,cs(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?hs(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Us{constructor(e,r,n){this.core=e,this.logger=r,this.name=gs,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),o=Pi(a);return Ui(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Tc();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const o=await this.getClientSeed(),f=Pi(o),u=rs();return await Pf(u,a,vs,f)},this.generateSharedKey=(a,o,f)=>{this.isInitialized();const u=this.getPrivateKey(a),c=Ac(u,o);return this.setSymKey(c,f)},this.setSymKey=async(a,o)=>{this.isInitialized();const f=o||Cc(a);return await this.keychain.set(f,a),f},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,o,f)=>{this.isInitialized();const u=is(f),c=kr(o);if(ss(u)){const L=u.senderPublicKey,D=u.receiverPublicKey;a=await this.generateSharedKey(L,D)}const d=this.getSymKey(a),{type:_,senderPublicKey:m}=u;return Rc({type:_,symKey:d,message:c,senderPublicKey:m})},this.decode=async(a,o,f)=>{this.isInitialized();const u=Uc(o,f);if(ss(u)){const _=u.receiverPublicKey,m=u.senderPublicKey;a=await this.generateSharedKey(_,m)}const c=this.getSymKey(a),d=Ic({symKey:c,encoded:o});return ii(d)},this.core=e,this.logger=Be.generateChildLogger(r,this.name),this.keychain=n||new Ns(this.core,this.logger)}get context(){return Be.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Cn)}catch{e=rs(),await this.keychain.set(Cn,e)}return tt(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ps extends yo{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=ps,this.version=Es,this.initialized=!1,this.storagePrefix=Gt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,a)=>{this.isInitialized();const o=xr(a);let f=this.messages.get(n);return typeof f>"u"&&(f={}),typeof f[o]<"u"||(f[o]=a,this.messages.set(n,f),await this.persist()),o},this.get=n=>{this.isInitialized();let a=this.messages.get(n);return typeof a>"u"&&(a={}),a},this.has=(n,a)=>{this.isInitialized();const o=this.get(n),f=xr(a);return typeof o[f]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Be.generateChildLogger(e,this.name),this.core=r}get context(){return Be.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,cs(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?hs(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}const nh="PARSE_ERROR",ih="INVALID_REQUEST",sh="METHOD_NOT_FOUND",ah="INVALID_PARAMS",Ms="INTERNAL_ERROR",Ln="SERVER_ERROR",oh=[-32700,-32600,-32601,-32602,-32603],or={[nh]:{code:-32700,message:"Parse error"},[ih]:{code:-32600,message:"Invalid Request"},[sh]:{code:-32601,message:"Method not found"},[ah]:{code:-32602,message:"Invalid params"},[Ms]:{code:-32603,message:"Internal error"},[Ln]:{code:-32e3,message:"Server error"}},js=Ln;function uh(t){return oh.includes(t)}function Bs(t){return Object.keys(or).includes(t)?or[t]:or[js]}function fh(t){const e=Object.values(or).find(r=>r.code===t);return e||or[js]}function ch(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Fs={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isBrowserCryptoAvailable=Dt.getSubtleCrypto=Dt.getBrowerCrypto=void 0;function Rn(){return Q?.crypto||Q?.msCrypto||{}}Dt.getBrowerCrypto=Rn;function Hs(){const t=Rn();return t.subtle||t.webkitSubtle}Dt.getSubtleCrypto=Hs;function hh(){return!!Rn()&&!!Hs()}Dt.isBrowserCryptoAvailable=hh;var mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.isBrowser=mt.isNode=mt.isReactNative=void 0;function zs(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mt.isReactNative=zs;function Ks(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mt.isNode=Ks;function lh(){return!zs()&&!Ks()}mt.isBrowser=lh,function(t){var e=Q&&Q.__createBinding||(Object.create?function(n,a,o,f){f===void 0&&(f=o),Object.defineProperty(n,f,{enumerable:!0,get:function(){return a[o]}})}:function(n,a,o,f){f===void 0&&(f=o),n[f]=a[o]}),r=Q&&Q.__exportStar||function(n,a){for(var o in n)o!=="default"&&!a.hasOwnProperty(o)&&e(a,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dt,t),r(mt,t)}(Fs);function dh(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function _h(t,e,r){return{id:r||dh(),jsonrpc:"2.0",method:t,params:e}}function gh(t,e){return{id:t,jsonrpc:"2.0",result:e}}function vh(t,e,r){return{id:t,jsonrpc:"2.0",error:bh(e,r)}}function bh(t,e){return typeof t>"u"?Bs(Ms):(typeof t=="string"&&(t=Object.assign(Object.assign({},Bs(Ln)),{message:t})),typeof e<"u"&&(t.data=e),uh(t.code)&&(t=fh(t.code)),t)}class yh{}class ph extends yh{constructor(){super()}}class Eh extends ph{constructor(e){super()}}const wh="^wss?:";function Dh(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function mh(t,e){const r=Dh(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function $s(t){return mh(t,wh)}function Sh(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Gs(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Oh(t){return Gs(t)&&"method"in t}function xh(t){return Gs(t)&&(Th(t)||Ws(t))}function Th(t){return"result"in t}function Ws(t){return"error"in t}class Ah extends Eh{constructor(e){super(e),this.events=new At.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(_h(e.method,e.params||[]),r)}async requestStrict(e,r){return new Promise(async(n,a)=>{if(!this.connection.connected)try{await this.open()}catch(o){a(o)}this.events.on(`${e.id}`,o=>{Ws(o)?a(o.error):n(o.result)});try{await this.connection.send(e,r)}catch(o){a(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),xh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",()=>this.events.emit("disconnect")),this.connection.on("error",e=>this.events.emit("error",e)),this.hasRegisteredEventListeners=!0)}}const Vs=10,Ch=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class Lh{constructor(e){if(this.url=e,this.events=new At.EventEmitter,this.registering=!1,!$s(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(typeof this.socket>"u")throw new Error("Connection already closed");this.socket.close(),this.onClose()}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(kr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!$s(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,a)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),a(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const a=Fs.isReactNative()?void 0:{rejectUnauthorized:!Sh(e)},o=new Ch(e,[],a);o.onopen=()=>{this.onOpen(o),r(o)},o.onerror=f=>{const u=this.parseError(f.error);this.events.emit("register_error",u),this.onClose(),n(u)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=()=>this.onClose(),e.onerror=r=>{const n=this.parseError(r.error);this.events.emit("error",n)},this.socket=e,this.registering=!1,this.events.emit("open")}onClose(){this.socket=void 0,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ii(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),a=n.message||n.toString(),o=vh(e,a);this.events.emit("payload",o)}parseError(e,r=this.url){return ch(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Vs&&this.events.setMaxListeners(Vs)}}class Rh extends po{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new At.EventEmitter,this.name=Ds,this.queue=new Map,this.publish=async(n,a,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:o}});try{const f=o?.ttl||ws,u=On(o),c=o?.prompt||!1,d=o?.tag||0,_={topic:n,message:a,opts:{ttl:f,relay:u,prompt:c,tag:d}},m=xr(a);this.queue.set(m,_),await this.rpcPublish(n,a,f,u,c,d),this.onPublish(m,_),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:o}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.relayer=e,this.logger=Be.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Be.getLoggerContext(this.logger)}rpcPublish(e,r,n,a,o,f){var u,c,d,_;const m={method:xn(a.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:o,tag:f}};return Tn((u=m.params)==null?void 0:u.prompt)&&((c=m.params)==null||delete c.prompt),Tn((d=m.params)==null?void 0:d.tag)&&((_=m.params)==null||delete _.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m}),this.relayer.provider.request(m)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:{ttl:a,relay:o,prompt:f,tag:u}}=e,c=xr(n);await this.rpcPublish(r,n,a,o,f,u),this.onPublish(c,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(gr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class Ih{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const a=n.filter(o=>o!==r);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Nh=Object.defineProperty,Uh=Object.defineProperties,Ph=Object.getOwnPropertyDescriptors,Ys=Object.getOwnPropertySymbols,Mh=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable,qs=(t,e,r)=>e in t?Nh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cr=(t,e)=>{for(var r in e||(e={}))Mh.call(e,r)&&qs(t,r,e[r]);if(Ys)for(var r of Ys(e))jh.call(e,r)&&qs(t,r,e[r]);return t},In=(t,e)=>Uh(t,Ph(e));class Xs extends Do{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Ih,this.events=new At.EventEmitter,this.name=Ls,this.version=Rs,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pendingSubInterval=20,this.storagePrefix=Gt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),await this.reset(),this.registerEventListeners(),this.onEnable())},this.subscribe=async(n,a)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}});try{const o=On(a),f={topic:n,relay:o};this.pending.set(n,f);const u=await this.rpcSubscribe(n,o);return this.onSubscribe(u,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}}),u}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(n,a)=>{this.isInitialized(),typeof a?.id<"u"?await this.unsubscribeById(n,a.id,a):await this.unsubscribeByTopic(n,a)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((a,o)=>{const f=new ft.Watch;f.start(this.pendingSubscriptionWatchLabel);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),f.stop(this.pendingSubscriptionWatchLabel),a(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=Is&&(clearInterval(u),f.stop(this.pendingSubscriptionWatchLabel),o(!1))},this.pendingSubInterval)}),this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.relayer=e,this.logger=Be.generateChildLogger(r,this.name)}get context(){return Be.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear(),this.initialized=!1}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async a=>await this.unsubscribeById(e,a,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const a=On(n);await this.rpcUnsubscribe(e,r,a);const o=Qc("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,r){const n={method:xn(r.protocol).subscribe,params:{topic:e}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),await this.relayer.provider.request(n)}rpcUnsubscribe(e,r,n){const a={method:xn(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.provider.request(a)}onSubscribe(e,r){this.setSubscription(e,In(Cr({},r),{id:e})),this.pending.delete(r.topic)}onResubscribe(e,r){this.addSubscription(e,In(Cr({},r),{id:e})),this.pending.delete(r.topic)}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Cr({},r)),this.topicMap.set(r.topic,e),this.events.emit(wt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ct("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(wt.deleted,In(Cr({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wt.sync)}async reset(){!this.cached.length||await Promise.all(this.cached.map(async e=>await this.resubscribe(e)))}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ct("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async resubscribe(e){if(!this.ids.includes(e.id)){const{topic:r,relay:n}=e,a={topic:r,relay:n};this.pending.set(a.topic,a);const o=await this.rpcSubscribe(a.topic,a.relay);this.onResubscribe(o,a)}}async onConnect(){await this.reset(),this.onEnable()}onDisconnect(){this.onDisable()}checkPending(){this.pending.forEach(async e=>{const r=await this.rpcSubscribe(e.topic,e.relay);this.onSubscribe(r,e)})}registerEventListeners(){this.relayer.core.heartbeat.on(gr.HEARTBEAT_EVENTS.pulse,()=>{this.checkPending()}),this.relayer.provider.on(Rt.connect,async()=>{await this.onConnect()}),this.relayer.provider.on(Rt.disconnect,()=>{this.onDisconnect()}),this.events.on(wt.created,async e=>{const r=wt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(wt.deleted,async e=>{const r=wt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Bh=Object.defineProperty,Js=Object.getOwnPropertySymbols,Fh=Object.prototype.hasOwnProperty,Hh=Object.prototype.propertyIsEnumerable,Qs=(t,e,r)=>e in t?Bh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zh=(t,e)=>{for(var r in e||(e={}))Fh.call(e,r)&&Qs(t,r,e[r]);if(Js)for(var r of Js(e))Hh.call(e,r)&&Qs(t,r,e[r]);return t};class Zs extends Eo{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new At.EventEmitter,this.name=Os,this.initialized=!1,this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Be.generateChildLogger(e.logger,this.name):Mn(Be.getDefaultLoggerOptions({level:e.logger||ms})),this.messages=new Ps(this.logger,e.core),this.subscriber=new Xs(this,this.logger),this.publisher=new Rh(this,this.logger),this.relayUrl=e?.relayUrl||Ss,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized");const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=this.createProvider(e),await Promise.all([this.messages.init(),this.provider.connect(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Be.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r})}async subscribe(e,r){return this.isInitialized(),await this.subscriber.subscribe(e,r)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}createProvider(e){return new Ah(new Lh(Yc({sdkVersion:As,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e})))}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Oh(e)){if(!e.method.endsWith(xs))return;const r=e.params,{topic:n,message:a}=r.data,o={topic:n,message:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(zh({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ar.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=gh(e.id,!0);await this.provider.connection.send(r)}registerEventListeners(){this.provider.on(Rt.payload,e=>this.onProviderPayload(e)),this.provider.on(Rt.connect,()=>{this.events.emit(ar.connect)}),this.provider.on(Rt.disconnect,()=>{this.events.emit(ar.disconnect),setTimeout(()=>{this.provider.connect()},ft.toMiliseconds(Ts))}),this.provider.on(Rt.error,e=>this.events.emit(ar.error,e))}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nn={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",a=1,o=2,f=9007199254740991,u="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",_="[object Boolean]",m="[object Date]",L="[object Error]",D="[object Function]",A="[object GeneratorFunction]",j="[object Map]",I="[object Number]",K="[object Null]",w="[object Object]",T="[object Promise]",v="[object Proxy]",y="[object RegExp]",b="[object Set]",i="[object String]",l="[object Symbol]",P="[object Undefined]",z="[object WeakMap]",q="[object ArrayBuffer]",X="[object DataView]",J="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",$="[object Int16Array]",W="[object Int32Array]",N="[object Uint8Array]",U="[object Uint8ClampedArray]",M="[object Uint16Array]",B="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,V={};V[J]=V[S]=V[C]=V[$]=V[W]=V[N]=V[U]=V[M]=V[B]=!0,V[u]=V[c]=V[q]=V[_]=V[X]=V[m]=V[L]=V[D]=V[j]=V[I]=V[w]=V[y]=V[b]=V[i]=V[z]=!1;var oe=typeof Q=="object"&&Q&&Q.Object===Object&&Q,x=typeof self=="object"&&self&&self.Object===Object&&self,O=oe||x||Function("return this")(),p=e&&!e.nodeType&&e,s=p&&!0&&t&&!t.nodeType&&t,g=s&&s.exports===p,F=g&&oe.process,Y=function(){try{return F&&F.binding&&F.binding("util")}catch{}}(),he=Y&&Y.isTypedArray;function be(h,E){for(var R=-1,G=h==null?0:h.length,Oe=0,ie=[];++R<G;){var Re=h[R];E(Re,R,h)&&(ie[Oe++]=Re)}return ie}function de(h,E){for(var R=-1,G=E.length,Oe=h.length;++R<G;)h[Oe+R]=E[R];return h}function Ee(h,E){for(var R=-1,G=h==null?0:h.length;++R<G;)if(E(h[R],R,h))return!0;return!1}function Ie(h,E){for(var R=-1,G=Array(h);++R<h;)G[R]=E(R);return G}function Ae(h){return function(E){return h(E)}}function ve(h,E){return h.has(E)}function _e(h,E){return h?.[E]}function le(h){var E=-1,R=Array(h.size);return h.forEach(function(G,Oe){R[++E]=[Oe,G]}),R}function fe(h,E){return function(R){return h(E(R))}}function ue(h){var E=-1,R=Array(h.size);return h.forEach(function(G){R[++E]=G}),R}var ae=Array.prototype,se=Function.prototype,ee=Object.prototype,ce=O["__core-js_shared__"],ge=se.toString,re=ee.hasOwnProperty,ye=function(){var h=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),pe=ee.toString,De=RegExp("^"+ge.call(re).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=g?O.Buffer:void 0,we=O.Symbol,ht=O.Uint8Array,gt=ee.propertyIsEnumerable,St=ae.splice,st=we?we.toStringTag:void 0,It=Object.getOwnPropertySymbols,ur=me?me.isBuffer:void 0,Rr=fe(Object.keys,Object),Ne=Wt(O,"DataView"),Ce=Wt(O,"Map"),Ue=Wt(O,"Promise"),Pe=Wt(O,"Set"),Me=Wt(O,"WeakMap"),Le=Wt(Object,"create"),Ke=Ut(Ne),$e=Ut(Ce),Ge=Ut(Ue),We=Ut(Pe),Ve=Ut(Me),Fe=we?we.prototype:void 0,je=Fe?Fe.valueOf:void 0;function xe(h){var E=-1,R=h==null?0:h.length;for(this.clear();++E<R;){var G=h[E];this.set(G[0],G[1])}}function Ye(){this.__data__=Le?Le(null):{},this.size=0}function qe(h){var E=this.has(h)&&delete this.__data__[h];return this.size-=E?1:0,E}function Qh(h){var E=this.__data__;if(Le){var R=E[h];return R===n?void 0:R}return re.call(E,h)?E[h]:void 0}function Zh(h){var E=this.__data__;return Le?E[h]!==void 0:re.call(E,h)}function kh(h,E){var R=this.__data__;return this.size+=this.has(h)?0:1,R[h]=Le&&E===void 0?n:E,this}xe.prototype.clear=Ye,xe.prototype.delete=qe,xe.prototype.get=Qh,xe.prototype.has=Zh,xe.prototype.set=kh;function yt(h){var E=-1,R=h==null?0:h.length;for(this.clear();++E<R;){var G=h[E];this.set(G[0],G[1])}}function el(){this.__data__=[],this.size=0}function tl(h){var E=this.__data__,R=Nr(E,h);if(R<0)return!1;var G=E.length-1;return R==G?E.pop():St.call(E,R,1),--this.size,!0}function rl(h){var E=this.__data__,R=Nr(E,h);return R<0?void 0:E[R][1]}function nl(h){return Nr(this.__data__,h)>-1}function il(h,E){var R=this.__data__,G=Nr(R,h);return G<0?(++this.size,R.push([h,E])):R[G][1]=E,this}yt.prototype.clear=el,yt.prototype.delete=tl,yt.prototype.get=rl,yt.prototype.has=nl,yt.prototype.set=il;function Nt(h){var E=-1,R=h==null?0:h.length;for(this.clear();++E<R;){var G=h[E];this.set(G[0],G[1])}}function sl(){this.size=0,this.__data__={hash:new xe,map:new(Ce||yt),string:new xe}}function al(h){var E=Ur(this,h).delete(h);return this.size-=E?1:0,E}function ol(h){return Ur(this,h).get(h)}function ul(h){return Ur(this,h).has(h)}function fl(h,E){var R=Ur(this,h),G=R.size;return R.set(h,E),this.size+=R.size==G?0:1,this}Nt.prototype.clear=sl,Nt.prototype.delete=al,Nt.prototype.get=ol,Nt.prototype.has=ul,Nt.prototype.set=fl;function Ir(h){var E=-1,R=h==null?0:h.length;for(this.__data__=new Nt;++E<R;)this.add(h[E])}function cl(h){return this.__data__.set(h,n),this}function hl(h){return this.__data__.has(h)}Ir.prototype.add=Ir.prototype.push=cl,Ir.prototype.has=hl;function Ot(h){var E=this.__data__=new yt(h);this.size=E.size}function ll(){this.__data__=new yt,this.size=0}function dl(h){var E=this.__data__,R=E.delete(h);return this.size=E.size,R}function _l(h){return this.__data__.get(h)}function gl(h){return this.__data__.has(h)}function vl(h,E){var R=this.__data__;if(R instanceof yt){var G=R.__data__;if(!Ce||G.length<r-1)return G.push([h,E]),this.size=++R.size,this;R=this.__data__=new Nt(G)}return R.set(h,E),this.size=R.size,this}Ot.prototype.clear=ll,Ot.prototype.delete=dl,Ot.prototype.get=_l,Ot.prototype.has=gl,Ot.prototype.set=vl;function bl(h,E){var R=Pr(h),G=!R&&Il(h),Oe=!R&&!G&&Un(h),ie=!R&&!G&&!Oe&&da(h),Re=R||G||Oe||ie,Xe=Re?Ie(h.length,String):[],Qe=Xe.length;for(var Te in h)(E||re.call(h,Te))&&!(Re&&(Te=="length"||Oe&&(Te=="offset"||Te=="parent")||ie&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||Tl(Te,Qe)))&&Xe.push(Te);return Xe}function Nr(h,E){for(var R=h.length;R--;)if(fa(h[R][0],E))return R;return-1}function yl(h,E,R){var G=E(h);return Pr(h)?G:de(G,R(h))}function fr(h){return h==null?h===void 0?P:K:st&&st in Object(h)?Ol(h):Rl(h)}function sa(h){return cr(h)&&fr(h)==u}function aa(h,E,R,G,Oe){return h===E?!0:h==null||E==null||!cr(h)&&!cr(E)?h!==h&&E!==E:pl(h,E,R,G,aa,Oe)}function pl(h,E,R,G,Oe,ie){var Re=Pr(h),Xe=Pr(E),Qe=Re?c:xt(h),Te=Xe?c:xt(E);Qe=Qe==u?w:Qe,Te=Te==u?w:Te;var at=Qe==w,lt=Te==w,ke=Qe==Te;if(ke&&Un(h)){if(!Un(E))return!1;Re=!0,at=!1}if(ke&&!at)return ie||(ie=new Ot),Re||da(h)?oa(h,E,R,G,Oe,ie):ml(h,E,Qe,R,G,Oe,ie);if(!(R&a)){var ot=at&&re.call(h,"__wrapped__"),ut=lt&&re.call(E,"__wrapped__");if(ot||ut){var Tt=ot?h.value():h,pt=ut?E.value():E;return ie||(ie=new Ot),Oe(Tt,pt,R,G,ie)}}return ke?(ie||(ie=new Ot),Sl(h,E,R,G,Oe,ie)):!1}function El(h){if(!la(h)||Cl(h))return!1;var E=ca(h)?De:H;return E.test(Ut(h))}function wl(h){return cr(h)&&ha(h.length)&&!!V[fr(h)]}function Dl(h){if(!Ll(h))return Rr(h);var E=[];for(var R in Object(h))re.call(h,R)&&R!="constructor"&&E.push(R);return E}function oa(h,E,R,G,Oe,ie){var Re=R&a,Xe=h.length,Qe=E.length;if(Xe!=Qe&&!(Re&&Qe>Xe))return!1;var Te=ie.get(h);if(Te&&ie.get(E))return Te==E;var at=-1,lt=!0,ke=R&o?new Ir:void 0;for(ie.set(h,E),ie.set(E,h);++at<Xe;){var ot=h[at],ut=E[at];if(G)var Tt=Re?G(ut,ot,at,E,h,ie):G(ot,ut,at,h,E,ie);if(Tt!==void 0){if(Tt)continue;lt=!1;break}if(ke){if(!Ee(E,function(pt,Pt){if(!ve(ke,Pt)&&(ot===pt||Oe(ot,pt,R,G,ie)))return ke.push(Pt)})){lt=!1;break}}else if(!(ot===ut||Oe(ot,ut,R,G,ie))){lt=!1;break}}return ie.delete(h),ie.delete(E),lt}function ml(h,E,R,G,Oe,ie,Re){switch(R){case X:if(h.byteLength!=E.byteLength||h.byteOffset!=E.byteOffset)return!1;h=h.buffer,E=E.buffer;case q:return!(h.byteLength!=E.byteLength||!ie(new ht(h),new ht(E)));case _:case m:case I:return fa(+h,+E);case L:return h.name==E.name&&h.message==E.message;case y:case i:return h==E+"";case j:var Xe=le;case b:var Qe=G&a;if(Xe||(Xe=ue),h.size!=E.size&&!Qe)return!1;var Te=Re.get(h);if(Te)return Te==E;G|=o,Re.set(h,E);var at=oa(Xe(h),Xe(E),G,Oe,ie,Re);return Re.delete(h),at;case l:if(je)return je.call(h)==je.call(E)}return!1}function Sl(h,E,R,G,Oe,ie){var Re=R&a,Xe=ua(h),Qe=Xe.length,Te=ua(E),at=Te.length;if(Qe!=at&&!Re)return!1;for(var lt=Qe;lt--;){var ke=Xe[lt];if(!(Re?ke in E:re.call(E,ke)))return!1}var ot=ie.get(h);if(ot&&ie.get(E))return ot==E;var ut=!0;ie.set(h,E),ie.set(E,h);for(var Tt=Re;++lt<Qe;){ke=Xe[lt];var pt=h[ke],Pt=E[ke];if(G)var _a=Re?G(Pt,pt,ke,E,h,ie):G(pt,Pt,ke,h,E,ie);if(!(_a===void 0?pt===Pt||Oe(pt,Pt,R,G,ie):_a)){ut=!1;break}Tt||(Tt=ke=="constructor")}if(ut&&!Tt){var Mr=h.constructor,jr=E.constructor;Mr!=jr&&"constructor"in h&&"constructor"in E&&!(typeof Mr=="function"&&Mr instanceof Mr&&typeof jr=="function"&&jr instanceof jr)&&(ut=!1)}return ie.delete(h),ie.delete(E),ut}function ua(h){return yl(h,Pl,xl)}function Ur(h,E){var R=h.__data__;return Al(E)?R[typeof E=="string"?"string":"hash"]:R.map}function Wt(h,E){var R=_e(h,E);return El(R)?R:void 0}function Ol(h){var E=re.call(h,st),R=h[st];try{h[st]=void 0;var G=!0}catch{}var Oe=pe.call(h);return G&&(E?h[st]=R:delete h[st]),Oe}var xl=It?function(h){return h==null?[]:(h=Object(h),be(It(h),function(E){return gt.call(h,E)}))}:Ml,xt=fr;(Ne&&xt(new Ne(new ArrayBuffer(1)))!=X||Ce&&xt(new Ce)!=j||Ue&&xt(Ue.resolve())!=T||Pe&&xt(new Pe)!=b||Me&&xt(new Me)!=z)&&(xt=function(h){var E=fr(h),R=E==w?h.constructor:void 0,G=R?Ut(R):"";if(G)switch(G){case Ke:return X;case $e:return j;case Ge:return T;case We:return b;case Ve:return z}return E});function Tl(h,E){return E=E??f,!!E&&(typeof h=="number"||Z.test(h))&&h>-1&&h%1==0&&h<E}function Al(h){var E=typeof h;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?h!=="__proto__":h===null}function Cl(h){return!!ye&&ye in h}function Ll(h){var E=h&&h.constructor,R=typeof E=="function"&&E.prototype||ee;return h===R}function Rl(h){return pe.call(h)}function Ut(h){if(h!=null){try{return ge.call(h)}catch{}try{return h+""}catch{}}return""}function fa(h,E){return h===E||h!==h&&E!==E}var Il=sa(function(){return arguments}())?sa:function(h){return cr(h)&&re.call(h,"callee")&&!gt.call(h,"callee")},Pr=Array.isArray;function Nl(h){return h!=null&&ha(h.length)&&!ca(h)}var Un=ur||jl;function Ul(h,E){return aa(h,E)}function ca(h){if(!la(h))return!1;var E=fr(h);return E==D||E==A||E==d||E==v}function ha(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=f}function la(h){var E=typeof h;return h!=null&&(E=="object"||E=="function")}function cr(h){return h!=null&&typeof h=="object"}var da=he?Ae(he):wl;function Pl(h){return Nl(h)?bl(h):Dl(h)}function Ml(){return[]}function jl(){return!1}t.exports=Ul})(Nn,Nn.exports);var Kh=Nn.exports,$h=Object.defineProperty,ks=Object.getOwnPropertySymbols,Gh=Object.prototype.hasOwnProperty,Wh=Object.prototype.propertyIsEnumerable,ea=(t,e,r)=>e in t?$h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ta=(t,e)=>{for(var r in e||(e={}))Gh.call(e,r)&&ea(t,r,e[r]);if(ks)for(var r of ks(e))Wh.call(e,r)&&ea(t,r,e[r]);return t};class Vh extends wo{constructor(e,r,n,a=Gt,o=void 0){super(e,r,n,a),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Cs,this.cached=[],this.initialized=!1,this.storagePrefix=Gt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{Zc(f)?this.map.set(f.id,f):kc(f)?this.map.set(f.topic,f):this.getKey&&f!==null&&!Tn(f)&&this.map.set(this.getKey(f),f)}),this.cached=[],this.initialized=!0)},this.set=async(f,u)=>{this.isInitialized(),this.map.has(f)?await this.update(f,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:u}),this.map.set(f,u),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>f?this.values.filter(u=>Object.keys(f).every(c=>Kh(u[c],f[c]))):this.values,this.update=async(f,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:u});const c=ta(ta({},this.getData(f)),u);this.map.set(f,c),await this.persist()},this.delete=async(f,u)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:u}),this.map.delete(f),await this.persist())},this.logger=Be.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=o}get context(){return Be.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=ct("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ct("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ct("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Yh=Object.defineProperty,ra=Object.getOwnPropertySymbols,qh=Object.prototype.hasOwnProperty,Xh=Object.prototype.propertyIsEnumerable,na=(t,e,r)=>e in t?Yh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ia=(t,e)=>{for(var r in e||(e={}))qh.call(e,r)&&na(t,r,e[r]);if(ra)for(var r of ra(e))Xh.call(e,r)&&na(t,r,e[r]);return t};class Lr extends bo{constructor(e){super(e),this.protocol=An,this.version=ls,this.name=Ar,this.events=new At.EventEmitter,this.initialized=!1,this.on=(n,a)=>this.events.on(n,a),this.once=(n,a)=>this.events.once(n,a),this.off=(n,a)=>this.events.off(n,a),this.removeListener=(n,a)=>this.events.removeListener(n,a),this.projectId=e?.projectId;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Mn(Be.getDefaultLoggerOptions({level:e?.logger||ds.logger}));this.logger=Be.generateChildLogger(r,this.name),this.heartbeat=new gr.HeartBeat,this.crypto=new Us(this,this.logger,e?.keychain),this.storage=e!=null&&e.storage?e.storage:new ro(ia(ia({},_s),e?.storageOptions)),this.relayer=new Zs({core:this,logger:this.logger,relayUrl:e?.relayUrl,projectId:this.projectId})}static async init(e){const r=new Lr(e);return await r.initialize(),r}get context(){return Be.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.relayer.init(),await this.heartbeat.init(),this.initialized=!0,this.logger.info("Core Initilization Success")}catch(e){throw this.logger.info("Core Initilization Failure"),this.logger.error(e.message),e}}}const Jh=Lr;k.CORE_CONTEXT=Ar,k.CORE_DEFAULT=ds,k.CORE_PROTOCOL=An,k.CORE_STORAGE_OPTIONS=_s,k.CORE_STORAGE_PREFIX=Gt,k.CORE_VERSION=ls,k.CRYPTO_CLIENT_SEED=Cn,k.CRYPTO_CONTEXT=gs,k.CRYPTO_JWT_TTL=vs,k.Core=Jh,k.Crypto=Us,k.KEYCHAIN_CONTEXT=bs,k.KEYCHAIN_STORAGE_VERSION=ys,k.KeyChain=Ns,k.MESSAGES_CONTEXT=ps,k.MESSAGES_STORAGE_VERSION=Es,k.MessageTracker=Ps,k.PENDING_SUB_RESOLUTION_TIMEOUT=Is,k.PUBLISHER_CONTEXT=Ds,k.PUBLISHER_DEFAULT_TTL=ws,k.RELAYER_CONTEXT=Os,k.RELAYER_DEFAULT_LOGGER=ms,k.RELAYER_DEFAULT_PROTOCOL=eh,k.RELAYER_DEFAULT_RELAY_URL=Ss,k.RELAYER_EVENTS=ar,k.RELAYER_PROVIDER_EVENTS=Rt,k.RELAYER_RECONNECT_TIMEOUT=Ts,k.RELAYER_SDK_VERSION=As,k.RELAYER_STORAGE_OPTIONS=th,k.RELAYER_SUBSCRIBER_SUFFIX=xs,k.Relayer=Zs,k.STORE_STORAGE_VERSION=Cs,k.SUBSCRIBER_CONTEXT=Ls,k.SUBSCRIBER_DEFAULT_TTL=rh,k.SUBSCRIBER_EVENTS=wt,k.SUBSCRIBER_STORAGE_VERSION=Rs,k.Store=Vh,k.Subscriber=Xs,k.default=Lr,Object.defineProperty(k,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
