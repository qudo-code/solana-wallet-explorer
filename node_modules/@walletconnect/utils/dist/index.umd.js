(function(b,Ce){typeof exports=="object"&&typeof module<"u"?Ce(exports):typeof define=="function"&&define.amd?define(["exports"],Ce):(b=typeof globalThis<"u"?globalThis:b||self,Ce(b["@walletconnect/utils"]={}))})(this,function(b){"use strict";const Ce=":";function zt(e){const[t,r]=e.split(Ce);return{namespace:t,reference:r}}function Yt(e){const{namespace:t,reference:r}=e;return[t,r].join(Ce)}function st(e){const[t,r,i]=e.split(Ce);return{namespace:t,reference:r,address:i}}function Gt(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(Ce)}function ut(e,t){const r=[];return e.forEach(i=>{const o=t(i);r.includes(o)||r.push(o)}),r}function qt(e){const{address:t}=st(e);return t}function Xt(e){const{namespace:t,reference:r}=st(e);return Yt({namespace:t,reference:r})}function Sn(e,t){const{namespace:r,reference:i}=zt(t);return Gt({namespace:r,reference:i,address:e})}function On(e){return ut(e,qt)}function Jt(e){return ut(e,Xt)}function An(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const o=e[i];r.push(...o.accounts)}),r}function Nn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const o=e[i];r.push(...Jt(o.accounts))}),r}function Cn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const o=e[i];r.push(...o.chains)}),r}var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),r}var ct={},Ge={},P={},Qt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){var g=u>>>16&65535,_=u&65535,w=d>>>16&65535,y=d&65535;return _*y+(g*y+_*w<<16>>>0)|0}e.mul=Math.imul||t;function r(u,d){return u+d|0}e.add=r;function i(u,d){return u-d|0}e.sub=i;function o(u,d){return u<<d|u>>>32-d}e.rotl=o;function h(u,d){return u<<32-d|u>>>d}e.rotr=h;function D(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}e.isInteger=Number.isInteger||D,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(u){return e.isInteger(u)&&u>=-e.MAX_SAFE_INTEGER&&u<=e.MAX_SAFE_INTEGER}})(Qt),Object.defineProperty(P,"__esModule",{value:!0});var Zt=Qt;function Tn(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}P.readInt16BE=Tn;function In(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}P.readUint16BE=In;function Mn(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}P.readInt16LE=Mn;function Fn(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}P.readUint16LE=Fn;function kt(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}P.writeUint16BE=kt,P.writeInt16BE=kt;function er(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}P.writeUint16LE=er,P.writeInt16LE=er;function ft(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}P.readInt32BE=ft;function ht(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}P.readUint32BE=ht;function lt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}P.readInt32LE=lt;function dt(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}P.readUint32LE=dt;function qe(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}P.writeUint32BE=qe,P.writeInt32BE=qe;function Xe(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}P.writeUint32LE=Xe,P.writeInt32LE=Xe;function Rn(e,t){t===void 0&&(t=0);var r=ft(e,t),i=ft(e,t+4);return r*4294967296+i-(i>>31)*4294967296}P.readInt64BE=Rn;function Pn(e,t){t===void 0&&(t=0);var r=ht(e,t),i=ht(e,t+4);return r*4294967296+i}P.readUint64BE=Pn;function Bn(e,t){t===void 0&&(t=0);var r=lt(e,t),i=lt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}P.readInt64LE=Bn;function Ln(e,t){t===void 0&&(t=0);var r=dt(e,t),i=dt(e,t+4);return i*4294967296+r}P.readUint64LE=Ln;function tr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),qe(e/4294967296>>>0,t,r),qe(e>>>0,t,r+4),t}P.writeUint64BE=tr,P.writeInt64BE=tr;function rr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Xe(e>>>0,t,r),Xe(e/4294967296>>>0,t,r+4),t}P.writeUint64LE=rr,P.writeInt64LE=rr;function jn(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,h=e/8+r-1;h>=r;h--)i+=t[h]*o,o*=256;return i}P.readUintBE=jn;function $n(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,h=r;h<r+e/8;h++)i+=t[h]*o,o*=256;return i}P.readUintLE=$n;function Vn(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Zt.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,h=e/8+i-1;h>=i;h--)r[h]=t/o&255,o*=256;return r}P.writeUintBE=Vn;function Hn(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Zt.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,h=i;h<i+e/8;h++)r[h]=t/o&255,o*=256;return r}P.writeUintLE=Hn;function Kn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}P.readFloat32BE=Kn;function xn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}P.readFloat32LE=xn;function Wn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}P.readFloat64BE=Wn;function zn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}P.readFloat64LE=zn;function Yn(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}P.writeFloat32BE=Yn;function Gn(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}P.writeFloat32LE=Gn;function qn(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}P.writeFloat64BE=qn;function Xn(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}P.writeFloat64LE=Xn;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function Jn(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ye.wipe=Jn,Object.defineProperty(Ge,"__esModule",{value:!0});var te=P,Dt=ye,Qn=20;function Zn(e,t,r){for(var i=1634760805,o=857760878,h=2036477234,D=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],d=r[7]<<24|r[6]<<16|r[5]<<8|r[4],g=r[11]<<24|r[10]<<16|r[9]<<8|r[8],_=r[15]<<24|r[14]<<16|r[13]<<8|r[12],w=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],U=t[11]<<24|t[10]<<16|t[9]<<8|t[8],l=t[15]<<24|t[14]<<16|t[13]<<8|t[12],E=i,s=o,f=h,c=D,n=u,a=d,S=g,C=_,T=w,B=y,L=v,A=m,F=O,R=p,I=U,M=l,q=0;q<Qn;q+=2)E=E+n|0,F^=E,F=F>>>32-16|F<<16,T=T+F|0,n^=T,n=n>>>32-12|n<<12,s=s+a|0,R^=s,R=R>>>32-16|R<<16,B=B+R|0,a^=B,a=a>>>32-12|a<<12,f=f+S|0,I^=f,I=I>>>32-16|I<<16,L=L+I|0,S^=L,S=S>>>32-12|S<<12,c=c+C|0,M^=c,M=M>>>32-16|M<<16,A=A+M|0,C^=A,C=C>>>32-12|C<<12,f=f+S|0,I^=f,I=I>>>32-8|I<<8,L=L+I|0,S^=L,S=S>>>32-7|S<<7,c=c+C|0,M^=c,M=M>>>32-8|M<<8,A=A+M|0,C^=A,C=C>>>32-7|C<<7,s=s+a|0,R^=s,R=R>>>32-8|R<<8,B=B+R|0,a^=B,a=a>>>32-7|a<<7,E=E+n|0,F^=E,F=F>>>32-8|F<<8,T=T+F|0,n^=T,n=n>>>32-7|n<<7,E=E+a|0,M^=E,M=M>>>32-16|M<<16,L=L+M|0,a^=L,a=a>>>32-12|a<<12,s=s+S|0,F^=s,F=F>>>32-16|F<<16,A=A+F|0,S^=A,S=S>>>32-12|S<<12,f=f+C|0,R^=f,R=R>>>32-16|R<<16,T=T+R|0,C^=T,C=C>>>32-12|C<<12,c=c+n|0,I^=c,I=I>>>32-16|I<<16,B=B+I|0,n^=B,n=n>>>32-12|n<<12,f=f+C|0,R^=f,R=R>>>32-8|R<<8,T=T+R|0,C^=T,C=C>>>32-7|C<<7,c=c+n|0,I^=c,I=I>>>32-8|I<<8,B=B+I|0,n^=B,n=n>>>32-7|n<<7,s=s+S|0,F^=s,F=F>>>32-8|F<<8,A=A+F|0,S^=A,S=S>>>32-7|S<<7,E=E+a|0,M^=E,M=M>>>32-8|M<<8,L=L+M|0,a^=L,a=a>>>32-7|a<<7;te.writeUint32LE(E+i|0,e,0),te.writeUint32LE(s+o|0,e,4),te.writeUint32LE(f+h|0,e,8),te.writeUint32LE(c+D|0,e,12),te.writeUint32LE(n+u|0,e,16),te.writeUint32LE(a+d|0,e,20),te.writeUint32LE(S+g|0,e,24),te.writeUint32LE(C+_|0,e,28),te.writeUint32LE(T+w|0,e,32),te.writeUint32LE(B+y|0,e,36),te.writeUint32LE(L+v|0,e,40),te.writeUint32LE(A+m|0,e,44),te.writeUint32LE(F+O|0,e,48),te.writeUint32LE(R+p|0,e,52),te.writeUint32LE(I+U|0,e,56),te.writeUint32LE(M+l|0,e,60)}function nr(e,t,r,i,o){if(o===void 0&&(o=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var h,D;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");h=new Uint8Array(16),D=h.length-t.length,h.set(t,D)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");h=t,D=o}for(var u=new Uint8Array(64),d=0;d<r.length;d+=64){Zn(u,h,e);for(var g=d;g<d+64&&g<r.length;g++)i[g]=r[g]^u[g-d];ei(h,0,D)}return Dt.wipe(u),o===0&&Dt.wipe(h),i}Ge.streamXOR=nr;function kn(e,t,r,i){return i===void 0&&(i=0),Dt.wipe(r),nr(e,t,r,r,i)}Ge.stream=kn;function ei(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var ir={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});function ti(e,t,r){return~(e-1)&t|e-1&r}Ue.select=ti;function ri(e,t){return(e|0)-(t|0)-1>>>31&1}Ue.lessOrEqual=ri;function ar(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Ue.compare=ar;function ni(e,t){return e.length===0||t.length===0?!1:ar(e,t)!==0}Ue.equal=ni,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ue,r=ye;e.DIGEST_LENGTH=16;var i=function(){function D(u){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=u[0]|u[1]<<8;this._r[0]=d&8191;var g=u[2]|u[3]<<8;this._r[1]=(d>>>13|g<<3)&8191;var _=u[4]|u[5]<<8;this._r[2]=(g>>>10|_<<6)&7939;var w=u[6]|u[7]<<8;this._r[3]=(_>>>7|w<<9)&8191;var y=u[8]|u[9]<<8;this._r[4]=(w>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var v=u[10]|u[11]<<8;this._r[6]=(y>>>14|v<<2)&8191;var m=u[12]|u[13]<<8;this._r[7]=(v>>>11|m<<5)&8065;var O=u[14]|u[15]<<8;this._r[8]=(m>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return D.prototype._blocks=function(u,d,g){for(var _=this._fin?0:2048,w=this._h[0],y=this._h[1],v=this._h[2],m=this._h[3],O=this._h[4],p=this._h[5],U=this._h[6],l=this._h[7],E=this._h[8],s=this._h[9],f=this._r[0],c=this._r[1],n=this._r[2],a=this._r[3],S=this._r[4],C=this._r[5],T=this._r[6],B=this._r[7],L=this._r[8],A=this._r[9];g>=16;){var F=u[d+0]|u[d+1]<<8;w+=F&8191;var R=u[d+2]|u[d+3]<<8;y+=(F>>>13|R<<3)&8191;var I=u[d+4]|u[d+5]<<8;v+=(R>>>10|I<<6)&8191;var M=u[d+6]|u[d+7]<<8;m+=(I>>>7|M<<9)&8191;var q=u[d+8]|u[d+9]<<8;O+=(M>>>4|q<<12)&8191,p+=q>>>1&8191;var Z=u[d+10]|u[d+11]<<8;U+=(q>>>14|Z<<2)&8191;var Q=u[d+12]|u[d+13]<<8;l+=(Z>>>11|Q<<5)&8191;var J=u[d+14]|u[d+15]<<8;E+=(Q>>>8|J<<8)&8191,s+=J>>>5|_;var N=0,j=N;j+=w*f,j+=y*(5*A),j+=v*(5*L),j+=m*(5*B),j+=O*(5*T),N=j>>>13,j&=8191,j+=p*(5*C),j+=U*(5*S),j+=l*(5*a),j+=E*(5*n),j+=s*(5*c),N+=j>>>13,j&=8191;var $=N;$+=w*c,$+=y*f,$+=v*(5*A),$+=m*(5*L),$+=O*(5*B),N=$>>>13,$&=8191,$+=p*(5*T),$+=U*(5*C),$+=l*(5*S),$+=E*(5*a),$+=s*(5*n),N+=$>>>13,$&=8191;var V=N;V+=w*n,V+=y*c,V+=v*f,V+=m*(5*A),V+=O*(5*L),N=V>>>13,V&=8191,V+=p*(5*B),V+=U*(5*T),V+=l*(5*C),V+=E*(5*S),V+=s*(5*a),N+=V>>>13,V&=8191;var H=N;H+=w*a,H+=y*n,H+=v*c,H+=m*f,H+=O*(5*A),N=H>>>13,H&=8191,H+=p*(5*L),H+=U*(5*B),H+=l*(5*T),H+=E*(5*C),H+=s*(5*S),N+=H>>>13,H&=8191;var K=N;K+=w*S,K+=y*a,K+=v*n,K+=m*c,K+=O*f,N=K>>>13,K&=8191,K+=p*(5*A),K+=U*(5*L),K+=l*(5*B),K+=E*(5*T),K+=s*(5*C),N+=K>>>13,K&=8191;var x=N;x+=w*C,x+=y*S,x+=v*a,x+=m*n,x+=O*c,N=x>>>13,x&=8191,x+=p*f,x+=U*(5*A),x+=l*(5*L),x+=E*(5*B),x+=s*(5*T),N+=x>>>13,x&=8191;var W=N;W+=w*T,W+=y*C,W+=v*S,W+=m*a,W+=O*n,N=W>>>13,W&=8191,W+=p*c,W+=U*f,W+=l*(5*A),W+=E*(5*L),W+=s*(5*B),N+=W>>>13,W&=8191;var Y=N;Y+=w*B,Y+=y*T,Y+=v*C,Y+=m*S,Y+=O*a,N=Y>>>13,Y&=8191,Y+=p*n,Y+=U*c,Y+=l*f,Y+=E*(5*A),Y+=s*(5*L),N+=Y>>>13,Y&=8191;var G=N;G+=w*L,G+=y*B,G+=v*T,G+=m*C,G+=O*S,N=G>>>13,G&=8191,G+=p*a,G+=U*n,G+=l*c,G+=E*f,G+=s*(5*A),N+=G>>>13,G&=8191;var X=N;X+=w*A,X+=y*L,X+=v*B,X+=m*T,X+=O*C,N=X>>>13,X&=8191,X+=p*S,X+=U*a,X+=l*n,X+=E*c,X+=s*f,N+=X>>>13,X&=8191,N=(N<<2)+N|0,N=N+j|0,j=N&8191,N=N>>>13,$+=N,w=j,y=$,v=V,m=H,O=K,p=x,U=W,l=Y,E=G,s=X,d+=16,g-=16}this._h[0]=w,this._h[1]=y,this._h[2]=v,this._h[3]=m,this._h[4]=O,this._h[5]=p,this._h[6]=U,this._h[7]=l,this._h[8]=E,this._h[9]=s},D.prototype.finish=function(u,d){d===void 0&&(d=0);var g=new Uint16Array(10),_,w,y,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=_,_=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,g[0]=this._h[0]+5,_=g[0]>>>13,g[0]&=8191,v=1;v<10;v++)g[v]=this._h[v]+_,_=g[v]>>>13,g[v]&=8191;for(g[9]-=1<<13,w=(_^1)-1,v=0;v<10;v++)g[v]&=w;for(w=~w,v=0;v<10;v++)this._h[v]=this._h[v]&w|g[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,v=1;v<8;v++)y=(this._h[v]+this._pad[v]|0)+(y>>>16)|0,this._h[v]=y&65535;return u[d+0]=this._h[0]>>>0,u[d+1]=this._h[0]>>>8,u[d+2]=this._h[1]>>>0,u[d+3]=this._h[1]>>>8,u[d+4]=this._h[2]>>>0,u[d+5]=this._h[2]>>>8,u[d+6]=this._h[3]>>>0,u[d+7]=this._h[3]>>>8,u[d+8]=this._h[4]>>>0,u[d+9]=this._h[4]>>>8,u[d+10]=this._h[5]>>>0,u[d+11]=this._h[5]>>>8,u[d+12]=this._h[6]>>>0,u[d+13]=this._h[6]>>>8,u[d+14]=this._h[7]>>>0,u[d+15]=this._h[7]>>>8,this._finished=!0,this},D.prototype.update=function(u){var d=0,g=u.length,_;if(this._leftover){_=16-this._leftover,_>g&&(_=g);for(var w=0;w<_;w++)this._buffer[this._leftover+w]=u[d+w];if(g-=_,d+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(_=g-g%16,this._blocks(u,d,_),d+=_,g-=_),g){for(var w=0;w<g;w++)this._buffer[this._leftover+w]=u[d+w];this._leftover+=g}return this},D.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},D.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},D}();e.Poly1305=i;function o(D,u){var d=new i(D);d.update(u);var g=d.digest();return d.clean(),g}e.oneTimeAuth=o;function h(D,u){return D.length!==e.DIGEST_LENGTH||u.length!==e.DIGEST_LENGTH?!1:t.equal(D,u)}e.equal=h}(ir),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ge,r=ir,i=ye,o=P,h=Ue;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var D=new Uint8Array(16),u=function(){function d(g){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,g.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return d.prototype.seal=function(g,_,w,y){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(g,v.length-g.length);var m=new Uint8Array(32);t.stream(this._key,v,m,4);var O=_.length+this.tagLength,p;if(y){if(y.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");p=y}else p=new Uint8Array(O);return t.streamXOR(this._key,v,_,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),m,p.subarray(0,p.length-this.tagLength),w),i.wipe(v),p},d.prototype.open=function(g,_,w,y){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(g,v.length-g.length);var m=new Uint8Array(32);t.stream(this._key,v,m,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,m,_.subarray(0,_.length-this.tagLength),w),!h.equal(O,_.subarray(_.length-this.tagLength,_.length)))return null;var p=_.length-this.tagLength,U;if(y){if(y.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");U=y}else U=new Uint8Array(p);return t.streamXOR(this._key,v,_.subarray(0,_.length-this.tagLength),U,4),i.wipe(v),U},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(g,_,w,y){var v=new r.Poly1305(_);y&&(v.update(y),y.length%16>0&&v.update(D.subarray(y.length%16))),v.update(w),w.length%16>0&&v.update(D.subarray(w.length%16));var m=new Uint8Array(8);y&&o.writeUint64LE(y.length,m),v.update(m),o.writeUint64LE(w.length,m),v.update(m);for(var O=v.digest(),p=0;p<O.length;p++)g[p]=O[p];v.clean(),i.wipe(O),i.wipe(m)},d}();e.ChaCha20Poly1305=u}(ct);var or={},He={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});function ii(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}Et.isSerializableHash=ii,Object.defineProperty(He,"__esModule",{value:!0});var Ae=Et,ai=Ue,oi=ye,sr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var o=0;o<i.length;o++)i[o]^=54;this._inner.update(i);for(var o=0;o<i.length;o++)i[o]^=106;this._outer.update(i),Ae.isSerializableHash(this._inner)&&Ae.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),oi.wipe(i)}return e.prototype.reset=function(){if(!Ae.isSerializableHash(this._inner)||!Ae.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){Ae.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ae.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!Ae.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!Ae.isSerializableHash(this._inner)||!Ae.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!Ae.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();He.HMAC=sr;function si(e,t,r){var i=new sr(e,t);i.update(r);var o=i.digest();return i.clean(),o}He.hmac=si,He.equal=ai.equal,Object.defineProperty(or,"__esModule",{value:!0});var ur=He,cr=ye,ui=function(){function e(t,r,i,o){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var h=ur.hmac(this._hash,i,r);this._hmac=new ur.HMAC(t,h),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),cr.wipe(this._buffer),cr.wipe(this._counter),this._bufpos=0},e}(),ci=or.HKDF=ui,Je={},_t={},bt={};Object.defineProperty(bt,"__esModule",{value:!0});var fr=65536,fi=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(t),i=0;i<r.length;i+=fr)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,fr)));return r},e}();bt.BrowserRandomSource=fi;function hi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vt={},li={},di=Object.freeze({__proto__:null,default:li}),Di=Un(di);Object.defineProperty(vt,"__esModule",{value:!0});var Ei=ye,_i=function(){function e(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof hi<"u"){var t=Di;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}return e.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(t),o=0;o<i.length;o++)i[o]=r[o];return Ei.wipe(r),i},e}();vt.NodeRandomSource=_i,Object.defineProperty(_t,"__esModule",{value:!0});var bi=bt,vi=vt,gi=function(){function e(){if(this.isAvailable=!1,this.name="",this._source=new bi.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new vi.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return e.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},e}();_t.SystemRandomSource=gi,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=_t,r=P,i=ye;e.defaultRandomSource=new t.SystemRandomSource;function o(g,_){return _===void 0&&(_=e.defaultRandomSource),_.randomBytes(g)}e.randomBytes=o;function h(g){g===void 0&&(g=e.defaultRandomSource);var _=o(4,g),w=r.readUint32LE(_);return i.wipe(_),w}e.randomUint32=h;var D="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(g,_,w){if(_===void 0&&(_=D),w===void 0&&(w=e.defaultRandomSource),_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");for(var y="",v=_.length,m=256-256%v;g>0;){for(var O=o(Math.ceil(g*256/m),w),p=0;p<O.length&&g>0;p++){var U=O[p];U<m&&(y+=_.charAt(U%v),g--)}i.wipe(O)}return y}e.randomString=u;function d(g,_,w){_===void 0&&(_=D),w===void 0&&(w=e.defaultRandomSource);var y=Math.ceil(g/(Math.log(_.length)/Math.LN2));return u(y,_,w)}e.randomStringForEntropy=d}(Je);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=P,r=ye;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function u(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},u.prototype.update=function(d,g){if(g===void 0&&(g=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=d[_++],g--;this._bufferLength===this.blockSize&&(h(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(_=h(this._temp,this._state,d,_,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=d[_++],g--;return this},u.prototype.finish=function(d){if(!this._finished){var g=this._bytesHashed,_=this._bufferLength,w=g/536870912|0,y=g<<3,v=g%64<56?64:128;this._buffer[_]=128;for(var m=_+1;m<v-8;m++)this._buffer[m]=0;t.writeUint32BE(w,this._buffer,v-8),t.writeUint32BE(y,this._buffer,v-4),h(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)t.writeUint32BE(this._state[m],d,m*4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){r.wipe(d.state),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();e.SHA256=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function h(u,d,g,_,w){for(;w>=64;){for(var y=d[0],v=d[1],m=d[2],O=d[3],p=d[4],U=d[5],l=d[6],E=d[7],s=0;s<16;s++){var f=_+s*4;u[s]=t.readUint32BE(g,f)}for(var s=16;s<64;s++){var c=u[s-2],n=(c>>>17|c<<32-17)^(c>>>19|c<<32-19)^c>>>10;c=u[s-15];var a=(c>>>7|c<<32-7)^(c>>>18|c<<32-18)^c>>>3;u[s]=(n+u[s-7]|0)+(a+u[s-16]|0)}for(var s=0;s<64;s++){var n=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&U^~p&l)|0)+(E+(o[s]+u[s]|0)|0)|0,a=((y>>>2|y<<32-2)^(y>>>13|y<<32-13)^(y>>>22|y<<32-22))+(y&v^y&m^v&m)|0;E=l,l=U,U=p,p=O+n|0,O=m,m=v,v=y,y=n+a|0}d[0]+=y,d[1]+=v,d[2]+=m,d[3]+=O,d[4]+=p,d[5]+=U,d[6]+=l,d[7]+=E,_+=64,w-=64}return _}function D(u){var d=new i;d.update(u);var g=d.digest();return d.clean(),g}e.hash=D})(Qe);var gt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Je,r=ye;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(s){var f=new Float64Array(16);if(s)for(var c=0;c<s.length;c++)f[c]=s[c];return f}var o=new Uint8Array(32);o[0]=9;var h=i([56129,1]);function D(s){for(var f=1,c=0;c<16;c++){var n=s[c]+f+65535;f=Math.floor(n/65536),s[c]=n-f*65536}s[0]+=f-1+37*(f-1)}function u(s,f,c){for(var n=~(c-1),a=0;a<16;a++){var S=n&(s[a]^f[a]);s[a]^=S,f[a]^=S}}function d(s,f){for(var c=i(),n=i(),a=0;a<16;a++)n[a]=f[a];D(n),D(n),D(n);for(var S=0;S<2;S++){c[0]=n[0]-65517;for(var a=1;a<15;a++)c[a]=n[a]-65535-(c[a-1]>>16&1),c[a-1]&=65535;c[15]=n[15]-32767-(c[14]>>16&1);var C=c[15]>>16&1;c[14]&=65535,u(n,c,1-C)}for(var a=0;a<16;a++)s[2*a]=n[a]&255,s[2*a+1]=n[a]>>8}function g(s,f){for(var c=0;c<16;c++)s[c]=f[2*c]+(f[2*c+1]<<8);s[15]&=32767}function _(s,f,c){for(var n=0;n<16;n++)s[n]=f[n]+c[n]}function w(s,f,c){for(var n=0;n<16;n++)s[n]=f[n]-c[n]}function y(s,f,c){var n,a,S=0,C=0,T=0,B=0,L=0,A=0,F=0,R=0,I=0,M=0,q=0,Z=0,Q=0,J=0,N=0,j=0,$=0,V=0,H=0,K=0,x=0,W=0,Y=0,G=0,X=0,Fe=0,Ve=0,Ye=0,ot=0,Wt=0,pn=0,re=c[0],ne=c[1],ie=c[2],ae=c[3],oe=c[4],se=c[5],ue=c[6],ce=c[7],fe=c[8],he=c[9],le=c[10],de=c[11],De=c[12],Ee=c[13],_e=c[14],be=c[15];n=f[0],S+=n*re,C+=n*ne,T+=n*ie,B+=n*ae,L+=n*oe,A+=n*se,F+=n*ue,R+=n*ce,I+=n*fe,M+=n*he,q+=n*le,Z+=n*de,Q+=n*De,J+=n*Ee,N+=n*_e,j+=n*be,n=f[1],C+=n*re,T+=n*ne,B+=n*ie,L+=n*ae,A+=n*oe,F+=n*se,R+=n*ue,I+=n*ce,M+=n*fe,q+=n*he,Z+=n*le,Q+=n*de,J+=n*De,N+=n*Ee,j+=n*_e,$+=n*be,n=f[2],T+=n*re,B+=n*ne,L+=n*ie,A+=n*ae,F+=n*oe,R+=n*se,I+=n*ue,M+=n*ce,q+=n*fe,Z+=n*he,Q+=n*le,J+=n*de,N+=n*De,j+=n*Ee,$+=n*_e,V+=n*be,n=f[3],B+=n*re,L+=n*ne,A+=n*ie,F+=n*ae,R+=n*oe,I+=n*se,M+=n*ue,q+=n*ce,Z+=n*fe,Q+=n*he,J+=n*le,N+=n*de,j+=n*De,$+=n*Ee,V+=n*_e,H+=n*be,n=f[4],L+=n*re,A+=n*ne,F+=n*ie,R+=n*ae,I+=n*oe,M+=n*se,q+=n*ue,Z+=n*ce,Q+=n*fe,J+=n*he,N+=n*le,j+=n*de,$+=n*De,V+=n*Ee,H+=n*_e,K+=n*be,n=f[5],A+=n*re,F+=n*ne,R+=n*ie,I+=n*ae,M+=n*oe,q+=n*se,Z+=n*ue,Q+=n*ce,J+=n*fe,N+=n*he,j+=n*le,$+=n*de,V+=n*De,H+=n*Ee,K+=n*_e,x+=n*be,n=f[6],F+=n*re,R+=n*ne,I+=n*ie,M+=n*ae,q+=n*oe,Z+=n*se,Q+=n*ue,J+=n*ce,N+=n*fe,j+=n*he,$+=n*le,V+=n*de,H+=n*De,K+=n*Ee,x+=n*_e,W+=n*be,n=f[7],R+=n*re,I+=n*ne,M+=n*ie,q+=n*ae,Z+=n*oe,Q+=n*se,J+=n*ue,N+=n*ce,j+=n*fe,$+=n*he,V+=n*le,H+=n*de,K+=n*De,x+=n*Ee,W+=n*_e,Y+=n*be,n=f[8],I+=n*re,M+=n*ne,q+=n*ie,Z+=n*ae,Q+=n*oe,J+=n*se,N+=n*ue,j+=n*ce,$+=n*fe,V+=n*he,H+=n*le,K+=n*de,x+=n*De,W+=n*Ee,Y+=n*_e,G+=n*be,n=f[9],M+=n*re,q+=n*ne,Z+=n*ie,Q+=n*ae,J+=n*oe,N+=n*se,j+=n*ue,$+=n*ce,V+=n*fe,H+=n*he,K+=n*le,x+=n*de,W+=n*De,Y+=n*Ee,G+=n*_e,X+=n*be,n=f[10],q+=n*re,Z+=n*ne,Q+=n*ie,J+=n*ae,N+=n*oe,j+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*he,x+=n*le,W+=n*de,Y+=n*De,G+=n*Ee,X+=n*_e,Fe+=n*be,n=f[11],Z+=n*re,Q+=n*ne,J+=n*ie,N+=n*ae,j+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,x+=n*he,W+=n*le,Y+=n*de,G+=n*De,X+=n*Ee,Fe+=n*_e,Ve+=n*be,n=f[12],Q+=n*re,J+=n*ne,N+=n*ie,j+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,x+=n*fe,W+=n*he,Y+=n*le,G+=n*de,X+=n*De,Fe+=n*Ee,Ve+=n*_e,Ye+=n*be,n=f[13],J+=n*re,N+=n*ne,j+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,x+=n*ce,W+=n*fe,Y+=n*he,G+=n*le,X+=n*de,Fe+=n*De,Ve+=n*Ee,Ye+=n*_e,ot+=n*be,n=f[14],N+=n*re,j+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,x+=n*ue,W+=n*ce,Y+=n*fe,G+=n*he,X+=n*le,Fe+=n*de,Ve+=n*De,Ye+=n*Ee,ot+=n*_e,Wt+=n*be,n=f[15],j+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,x+=n*se,W+=n*ue,Y+=n*ce,G+=n*fe,X+=n*he,Fe+=n*le,Ve+=n*de,Ye+=n*De,ot+=n*Ee,Wt+=n*_e,pn+=n*be,S+=38*$,C+=38*V,T+=38*H,B+=38*K,L+=38*x,A+=38*W,F+=38*Y,R+=38*G,I+=38*X,M+=38*Fe,q+=38*Ve,Z+=38*Ye,Q+=38*ot,J+=38*Wt,N+=38*pn,a=1,n=S+a+65535,a=Math.floor(n/65536),S=n-a*65536,n=C+a+65535,a=Math.floor(n/65536),C=n-a*65536,n=T+a+65535,a=Math.floor(n/65536),T=n-a*65536,n=B+a+65535,a=Math.floor(n/65536),B=n-a*65536,n=L+a+65535,a=Math.floor(n/65536),L=n-a*65536,n=A+a+65535,a=Math.floor(n/65536),A=n-a*65536,n=F+a+65535,a=Math.floor(n/65536),F=n-a*65536,n=R+a+65535,a=Math.floor(n/65536),R=n-a*65536,n=I+a+65535,a=Math.floor(n/65536),I=n-a*65536,n=M+a+65535,a=Math.floor(n/65536),M=n-a*65536,n=q+a+65535,a=Math.floor(n/65536),q=n-a*65536,n=Z+a+65535,a=Math.floor(n/65536),Z=n-a*65536,n=Q+a+65535,a=Math.floor(n/65536),Q=n-a*65536,n=J+a+65535,a=Math.floor(n/65536),J=n-a*65536,n=N+a+65535,a=Math.floor(n/65536),N=n-a*65536,n=j+a+65535,a=Math.floor(n/65536),j=n-a*65536,S+=a-1+37*(a-1),a=1,n=S+a+65535,a=Math.floor(n/65536),S=n-a*65536,n=C+a+65535,a=Math.floor(n/65536),C=n-a*65536,n=T+a+65535,a=Math.floor(n/65536),T=n-a*65536,n=B+a+65535,a=Math.floor(n/65536),B=n-a*65536,n=L+a+65535,a=Math.floor(n/65536),L=n-a*65536,n=A+a+65535,a=Math.floor(n/65536),A=n-a*65536,n=F+a+65535,a=Math.floor(n/65536),F=n-a*65536,n=R+a+65535,a=Math.floor(n/65536),R=n-a*65536,n=I+a+65535,a=Math.floor(n/65536),I=n-a*65536,n=M+a+65535,a=Math.floor(n/65536),M=n-a*65536,n=q+a+65535,a=Math.floor(n/65536),q=n-a*65536,n=Z+a+65535,a=Math.floor(n/65536),Z=n-a*65536,n=Q+a+65535,a=Math.floor(n/65536),Q=n-a*65536,n=J+a+65535,a=Math.floor(n/65536),J=n-a*65536,n=N+a+65535,a=Math.floor(n/65536),N=n-a*65536,n=j+a+65535,a=Math.floor(n/65536),j=n-a*65536,S+=a-1+37*(a-1),s[0]=S,s[1]=C,s[2]=T,s[3]=B,s[4]=L,s[5]=A,s[6]=F,s[7]=R,s[8]=I,s[9]=M,s[10]=q,s[11]=Z,s[12]=Q,s[13]=J,s[14]=N,s[15]=j}function v(s,f){y(s,f,f)}function m(s,f){for(var c=i(),n=0;n<16;n++)c[n]=f[n];for(var n=253;n>=0;n--)v(c,c),n!==2&&n!==4&&y(c,c,f);for(var n=0;n<16;n++)s[n]=c[n]}function O(s,f){for(var c=new Uint8Array(32),n=new Float64Array(80),a=i(),S=i(),C=i(),T=i(),B=i(),L=i(),A=0;A<31;A++)c[A]=s[A];c[31]=s[31]&127|64,c[0]&=248,g(n,f);for(var A=0;A<16;A++)S[A]=n[A];a[0]=T[0]=1;for(var A=254;A>=0;--A){var F=c[A>>>3]>>>(A&7)&1;u(a,S,F),u(C,T,F),_(B,a,C),w(a,a,C),_(C,S,T),w(S,S,T),v(T,B),v(L,a),y(a,C,a),y(C,S,B),_(B,a,C),w(a,a,C),v(S,a),w(C,T,L),y(a,C,h),_(a,a,T),y(C,C,a),y(a,T,L),y(T,S,n),v(S,B),u(a,S,F),u(C,T,F)}for(var A=0;A<16;A++)n[A+16]=a[A],n[A+32]=C[A],n[A+48]=S[A],n[A+64]=T[A];var R=n.subarray(32),I=n.subarray(16);m(R,R),y(I,I,R);var M=new Uint8Array(32);return d(M,I),M}e.scalarMult=O;function p(s){return O(s,o)}e.scalarMultBase=p;function U(s){if(s.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var f=new Uint8Array(s),c=p(f);return{publicKey:c,secretKey:f}}e.generateKeyPairFromSeed=U;function l(s){var f=t.randomBytes(32,s),c=U(f);return r.wipe(f),c}e.generateKeyPair=l;function E(s,f,c){if(c===void 0&&(c=!1),s.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(f.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var n=O(s,f);if(c){for(var a=0,S=0;S<n.length;S++)a|=n[S];if(a===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=E})(gt);function hr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function lr(e,t){t||(t=e.reduce((o,h)=>o+h.length,0));const r=hr(t);let i=0;for(const o of e)r.set(o,i),i+=o.length;return r}function wi(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var o=0;o<e.length;o++){var h=e.charAt(o),D=h.charCodeAt(0);if(r[D]!==255)throw new TypeError(h+" is ambiguous");r[D]=o}var u=e.length,d=e.charAt(0),g=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function w(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var O=0,p=0,U=0,l=m.length;U!==l&&m[U]===0;)U++,O++;for(var E=(l-U)*_+1>>>0,s=new Uint8Array(E);U!==l;){for(var f=m[U],c=0,n=E-1;(f!==0||c<p)&&n!==-1;n--,c++)f+=256*s[n]>>>0,s[n]=f%u>>>0,f=f/u>>>0;if(f!==0)throw new Error("Non-zero carry");p=c,U++}for(var a=E-p;a!==E&&s[a]===0;)a++;for(var S=d.repeat(O);a<E;++a)S+=e.charAt(s[a]);return S}function y(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var O=0;if(m[O]!==" "){for(var p=0,U=0;m[O]===d;)p++,O++;for(var l=(m.length-O)*g+1>>>0,E=new Uint8Array(l);m[O];){var s=r[m.charCodeAt(O)];if(s===255)return;for(var f=0,c=l-1;(s!==0||f<U)&&c!==-1;c--,f++)s+=u*E[c]>>>0,E[c]=s%256>>>0,s=s/256>>>0;if(s!==0)throw new Error("Non-zero carry");U=f,O++}if(m[O]!==" "){for(var n=l-U;n!==l&&E[n]===0;)n++;for(var a=new Uint8Array(p+(l-n)),S=p;n!==l;)a[S++]=E[n++];return a}}}function v(m){var O=y(m);if(O)return O;throw new Error(`Non-${t} character`)}return{encode:w,decodeUnsafe:y,decode:v}}var yi=wi,mi=yi;const dr=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},pi=e=>new TextEncoder().encode(e),Si=e=>new TextDecoder().decode(e);class Oi{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Ai{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Dr(this,t)}}class Ni{constructor(t){this.decoders=t}or(t){return Dr(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Dr=(e,t)=>new Ni({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Ci{constructor(t,r,i,o){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=o,this.encoder=new Oi(t,r,i),this.decoder=new Ai(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ze=({name:e,prefix:t,encode:r,decode:i})=>new Ci(e,t,r,i),Ke=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:o}=mi(r,t);return Ze({prefix:e,name:t,encode:i,decode:h=>dr(o(h))})},Ui=(e,t,r,i)=>{const o={};for(let _=0;_<t.length;++_)o[t[_]]=_;let h=e.length;for(;e[h-1]==="=";)--h;const D=new Uint8Array(h*r/8|0);let u=0,d=0,g=0;for(let _=0;_<h;++_){const w=o[e[_]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|w,u+=r,u>=8&&(u-=8,D[g++]=255&d>>u)}if(u>=r||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return D},Ti=(e,t,r)=>{const i=t[t.length-1]==="=",o=(1<<r)-1;let h="",D=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],D+=8;D>r;)D-=r,h+=t[o&u>>D];if(D&&(h+=t[o&u<<r-D]),i)for(;h.length*r&7;)h+="=";return h},k=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Ze({prefix:t,name:e,encode(o){return Ti(o,i,r)},decode(o){return Ui(o,i,r,e)}}),Ii=Ze({prefix:"\0",name:"identity",encode:e=>Si(e),decode:e=>pi(e)});var Mi=Object.freeze({__proto__:null,identity:Ii});const Fi=k({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ri=Object.freeze({__proto__:null,base2:Fi});const Pi=k({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bi=Object.freeze({__proto__:null,base8:Pi});const Li=Ke({prefix:"9",name:"base10",alphabet:"0123456789"});var ji=Object.freeze({__proto__:null,base10:Li});const $i=k({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vi=k({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hi=Object.freeze({__proto__:null,base16:$i,base16upper:Vi});const Ki=k({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xi=k({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wi=k({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zi=k({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yi=k({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gi=k({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qi=k({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xi=k({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ji=k({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Qi=Object.freeze({__proto__:null,base32:Ki,base32upper:xi,base32pad:Wi,base32padupper:zi,base32hex:Yi,base32hexupper:Gi,base32hexpad:qi,base32hexpadupper:Xi,base32z:Ji});const Zi=Ke({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ki=Ke({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ea=Object.freeze({__proto__:null,base36:Zi,base36upper:ki});const ta=Ke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ra=Ke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var na=Object.freeze({__proto__:null,base58btc:ta,base58flickr:ra});const ia=k({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aa=k({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oa=k({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sa=k({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ua=Object.freeze({__proto__:null,base64:ia,base64pad:aa,base64url:oa,base64urlpad:sa});const Er=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ca=Er.reduce((e,t,r)=>(e[r]=t,e),[]),fa=Er.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function ha(e){return e.reduce((t,r)=>(t+=ca[r],t),"")}function la(e){const t=[];for(const r of e){const i=fa[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const da=Ze({prefix:"\u{1F680}",name:"base256emoji",encode:ha,decode:la});var Da=Object.freeze({__proto__:null,base256emoji:da}),Ea=br,_r=128,_a=127,ba=~_a,va=Math.pow(2,31);function br(e,t,r){t=t||[],r=r||0;for(var i=r;e>=va;)t[r++]=e&255|_r,e/=128;for(;e&ba;)t[r++]=e&255|_r,e>>>=7;return t[r]=e|0,br.bytes=r-i+1,t}var ga=wt,wa=128,vr=127;function wt(e,i){var r=0,i=i||0,o=0,h=i,D,u=e.length;do{if(h>=u)throw wt.bytes=0,new RangeError("Could not decode varint");D=e[h++],r+=o<28?(D&vr)<<o:(D&vr)*Math.pow(2,o),o+=7}while(D>=wa);return wt.bytes=h-i,r}var ya=Math.pow(2,7),ma=Math.pow(2,14),pa=Math.pow(2,21),Sa=Math.pow(2,28),Oa=Math.pow(2,35),Aa=Math.pow(2,42),Na=Math.pow(2,49),Ca=Math.pow(2,56),Ua=Math.pow(2,63),Ta=function(e){return e<ya?1:e<ma?2:e<pa?3:e<Sa?4:e<Oa?5:e<Aa?6:e<Na?7:e<Ca?8:e<Ua?9:10},Ia={encode:Ea,decode:ga,encodingLength:Ta},gr=Ia;const wr=(e,t,r=0)=>(gr.encode(e,t,r),t),yr=e=>gr.encodingLength(e),yt=(e,t)=>{const r=t.byteLength,i=yr(e),o=i+yr(r),h=new Uint8Array(o+r);return wr(e,h,0),wr(r,h,i),h.set(t,o),new Ma(e,r,t,h)};class Ma{constructor(t,r,i,o){this.code=t,this.size=r,this.digest=i,this.bytes=o}}const mr=({name:e,code:t,encode:r})=>new Fa(e,t,r);class Fa{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?yt(this.code,r):r.then(i=>yt(this.code,i))}else throw Error("Unknown type, must be binary type")}}const pr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ra=mr({name:"sha2-256",code:18,encode:pr("SHA-256")}),Pa=mr({name:"sha2-512",code:19,encode:pr("SHA-512")});var Ba=Object.freeze({__proto__:null,sha256:Ra,sha512:Pa});const Sr=0,La="identity",Or=dr;var ja=Object.freeze({__proto__:null,identity:{code:Sr,name:La,encode:Or,digest:e=>yt(Sr,Or(e))}});new TextEncoder,new TextDecoder;const Ar={...Mi,...Ri,...Bi,...ji,...Hi,...Qi,...ea,...na,...ua,...Da};({...Ba,...ja});function Nr(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Cr=Nr("utf8","u",e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),mt=Nr("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=hr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Ur={utf8:Cr,"utf-8":Cr,hex:Ar.base16,latin1:mt,ascii:mt,binary:mt,...Ar};function me(e,t="utf8"){const r=Ur[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function pe(e,t="utf8"){const r=Ur[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const pt="base10",ve="base16",ke="base64pad",et="utf8",St=0,Re=1,$a=0,Tr=1,Ot=12,At=32;function Va(){const e=gt.generateKeyPair();return{privateKey:pe(e.secretKey,ve),publicKey:pe(e.publicKey,ve)}}function Ha(){const e=Je.randomBytes(At);return pe(e,ve)}function Ka(e,t){const r=gt.sharedKey(me(e,ve),me(t,ve)),i=new ci(Qe.SHA256,r).expand(At);return pe(i,ve)}function xa(e){const t=Qe.hash(me(e,ve));return pe(t,ve)}function Wa(e){const t=Qe.hash(me(e,et));return pe(t,ve)}function Ir(e){return me(`${e}`,pt)}function xe(e){return Number(pe(e,pt))}function za(e){const t=Ir(typeof e.type<"u"?e.type:St);if(xe(t)===Re&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?me(e.senderPublicKey,ve):void 0,i=typeof e.iv<"u"?me(e.iv,ve):Je.randomBytes(Ot),o=new ct.ChaCha20Poly1305(me(e.symKey,ve)).seal(i,me(e.message,et));return Mr({type:t,sealed:o,iv:i,senderPublicKey:r})}function Ya(e){const t=new ct.ChaCha20Poly1305(me(e.symKey,ve)),{sealed:r,iv:i}=Nt(e.encoded),o=t.open(i,r);if(o===null)throw new Error("Failed to decrypt");return pe(o,et)}function Mr(e){if(xe(e.type)===Re){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return pe(lr([e.type,e.senderPublicKey,e.iv,e.sealed]),ke)}return pe(lr([e.type,e.iv,e.sealed]),ke)}function Nt(e){const t=me(e,ke),r=t.slice($a,Tr),i=Tr;if(xe(r)===Re){const u=i+At,d=u+Ot,g=t.slice(i,u),_=t.slice(u,d),w=t.slice(d);return{type:r,sealed:w,iv:_,senderPublicKey:g}}const o=i+Ot,h=t.slice(i,o),D=t.slice(o);return{type:r,sealed:D,iv:h}}function Ga(e,t){const r=Nt(e);return Fr({type:xe(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?pe(r.senderPublicKey,ve):void 0,receiverPublicKey:t?.receiverPublicKey})}function Fr(e){const t=e?.type||St;if(t===Re){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function qa(e){return e.type===Re&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Rr=function(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,h;i<o;i++)(h||!(i in t))&&(h||(h=Array.prototype.slice.call(t,0,i)),h[i]=t[i]);return e.concat(h||Array.prototype.slice.call(t))},Xa=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),Ja=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Qa=function(){function e(t,r,i,o){this.name=t,this.version=r,this.os=i,this.bot=o,this.type="bot-device"}return e}(),Za=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),ka=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),eo=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,to=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Pr=3,ro=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",eo]],Br=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function no(e){return e?Lr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ka:typeof navigator<"u"?Lr(navigator.userAgent):oo()}function io(e){return e!==""&&ro.reduce(function(t,r){var i=r[0],o=r[1];if(t)return t;var h=o.exec(e);return!!h&&[i,h]},!1)}function Lr(e){var t=io(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new Za;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<Pr&&(o=Rr(Rr([],o,!0),so(Pr-o.length),!0)):o=[];var h=o.join("."),D=ao(e),u=to.exec(e);return u&&u[1]?new Qa(r,h,D,u[1]):new Xa(r,h,D)}function ao(e){for(var t=0,r=Br.length;t<r;t++){var i=Br[t],o=i[0],h=i[1],D=h.exec(e);if(D)return o}return null}function oo(){var e=typeof process<"u"&&process.version;return e?new Ja(process.version.slice(1)):null}function so(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Te={},jr={},tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.delay=void 0;function uo(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}tt.delay=uo;var Pe={},Ct={},Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.ONE_THOUSAND=Be.ONE_HUNDRED=void 0,Be.ONE_HUNDRED=100,Be.ONE_THOUSAND=1e3;var $r={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365})($r),function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,o,h,D){D===void 0&&(D=h),Object.defineProperty(i,D,{enumerable:!0,get:function(){return o[h]}})}:function(i,o,h,D){D===void 0&&(D=h),i[D]=o[h]}),r=ee&&ee.__exportStar||function(i,o){for(var h in i)h!=="default"&&!o.hasOwnProperty(h)&&t(o,i,h)};Object.defineProperty(e,"__esModule",{value:!0}),r(Be,e),r($r,e)}(Ct),Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.fromMiliseconds=Pe.toMiliseconds=void 0;const Vr=Ct;function co(e){return e*Vr.ONE_THOUSAND}Pe.toMiliseconds=co;function fo(e){return Math.floor(e/Vr.ONE_THOUSAND)}Pe.fromMiliseconds=fo,function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,o,h,D){D===void 0&&(D=h),Object.defineProperty(i,D,{enumerable:!0,get:function(){return o[h]}})}:function(i,o,h,D){D===void 0&&(D=h),i[D]=o[h]}),r=ee&&ee.__exportStar||function(i,o){for(var h in i)h!=="default"&&!o.hasOwnProperty(h)&&t(o,i,h)};Object.defineProperty(e,"__esModule",{value:!0}),r(tt,e),r(Pe,e)}(jr);var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.Watch=void 0;class Hr{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}We.Watch=Hr,We.default=Hr;var Kr={},rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.IWatch=void 0;class ho{}rt.IWatch=ho,function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,o,h,D){D===void 0&&(D=h),Object.defineProperty(i,D,{enumerable:!0,get:function(){return o[h]}})}:function(i,o,h,D){D===void 0&&(D=h),i[D]=o[h]}),r=ee&&ee.__exportStar||function(i,o){for(var h in i)h!=="default"&&!o.hasOwnProperty(h)&&t(o,i,h)};Object.defineProperty(e,"__esModule",{value:!0}),r(rt,e)}(Kr),function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,o,h,D){D===void 0&&(D=h),Object.defineProperty(i,D,{enumerable:!0,get:function(){return o[h]}})}:function(i,o,h,D){D===void 0&&(D=h),i[D]=o[h]}),r=ee&&ee.__exportStar||function(i,o){for(var h in i)h!=="default"&&!o.hasOwnProperty(h)&&t(o,i,h)};Object.defineProperty(e,"__esModule",{value:!0}),r(jr,e),r(We,e),r(Kr,e),r(Ct,e)}(Te);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=Tt=z.getLocation=z.getLocationOrThrow=Ut=z.getNavigator=z.getNavigatorOrThrow=xr=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Ie(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Ie;function Le(e){const t=Ie(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=Le;function lo(){return Le("document")}z.getDocumentOrThrow=lo;function Do(){return Ie("document")}var xr=z.getDocument=Do;function Eo(){return Le("navigator")}z.getNavigatorOrThrow=Eo;function _o(){return Ie("navigator")}var Ut=z.getNavigator=_o;function bo(){return Le("location")}z.getLocationOrThrow=bo;function vo(){return Ie("location")}var Tt=z.getLocation=vo;function go(){return Le("crypto")}z.getCryptoOrThrow=go;function wo(){return Ie("crypto")}z.getCrypto=wo;function yo(){return Le("localStorage")}z.getLocalStorageOrThrow=yo;function mo(){return Ie("localStorage")}z.getLocalStorage=mo;var It={};Object.defineProperty(It,"__esModule",{value:!0});var Wr=It.getWindowMetadata=void 0;const zr=z;function po(){let e,t;try{e=zr.getDocumentOrThrow(),t=zr.getLocationOrThrow()}catch{return null}function r(){const w=e.getElementsByTagName("link"),y=[];for(let v=0;v<w.length;v++){const m=w[v],O=m.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const p=m.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(p.indexOf("/")===0)U+=p;else{const l=t.pathname.split("/");l.pop(),U+=l.join("/")+"/"+p}y.push(U)}else if(p.indexOf("//")===0){const U=t.protocol+p;y.push(U)}else y.push(p)}}return y}function i(...w){const y=e.getElementsByTagName("meta");for(let v=0;v<y.length;v++){const m=y[v],O=["itemprop","property","name"].map(p=>m.getAttribute(p)).filter(p=>p?w.includes(p):!1);if(O.length&&O){const p=m.getAttribute("content");if(p)return p}}return""}function o(){let w=i("name","og:site_name","og:title","twitter:title");return w||(w=e.title),w}function h(){return i("description","og:description","twitter:description","keywords")}const D=o(),u=h(),d=t.origin,g=r();return{description:u,url:d,icons:g,name:D}}Wr=It.getWindowMetadata=po;var ze={},So=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Yr="%[a-f0-9]{2}",Gr=new RegExp(Yr,"gi"),qr=new RegExp("("+Yr+")+","gi");function Mt(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Mt(r),Mt(i))}function Oo(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Gr),r=1;r<t.length;r++)e=Mt(t,r).join(""),t=e.match(Gr);return e}}function Ao(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=qr.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=Oo(r[0]);i!==r[0]&&(t[r[0]]=i)}r=qr.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),h=0;h<o.length;h++){var D=o[h];e=e.replace(new RegExp(D,"g"),t[D])}return e}var No=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Ao(e)}},Co=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Uo=function(e,t){for(var r={},i=Object.keys(e),o=Array.isArray(t),h=0;h<i.length;h++){var D=i[h],u=e[D];(o?t.indexOf(D)!==-1:t(D,u,e))&&(r[D]=u)}return r};(function(e){const t=So,r=No,i=Co,o=Uo,h=l=>l==null,D=Symbol("encodeFragmentIdentifier");function u(l){switch(l.arrayFormat){case"index":return E=>(s,f)=>{const c=s.length;return f===void 0||l.skipNull&&f===null||l.skipEmptyString&&f===""?s:f===null?[...s,[_(E,l),"[",c,"]"].join("")]:[...s,[_(E,l),"[",_(c,l),"]=",_(f,l)].join("")]};case"bracket":return E=>(s,f)=>f===void 0||l.skipNull&&f===null||l.skipEmptyString&&f===""?s:f===null?[...s,[_(E,l),"[]"].join("")]:[...s,[_(E,l),"[]=",_(f,l)].join("")];case"colon-list-separator":return E=>(s,f)=>f===void 0||l.skipNull&&f===null||l.skipEmptyString&&f===""?s:f===null?[...s,[_(E,l),":list="].join("")]:[...s,[_(E,l),":list=",_(f,l)].join("")];case"comma":case"separator":case"bracket-separator":{const E=l.arrayFormat==="bracket-separator"?"[]=":"=";return s=>(f,c)=>c===void 0||l.skipNull&&c===null||l.skipEmptyString&&c===""?f:(c=c===null?"":c,f.length===0?[[_(s,l),E,_(c,l)].join("")]:[[f,_(c,l)].join(l.arrayFormatSeparator)])}default:return E=>(s,f)=>f===void 0||l.skipNull&&f===null||l.skipEmptyString&&f===""?s:f===null?[...s,_(E,l)]:[...s,[_(E,l),"=",_(f,l)].join("")]}}function d(l){let E;switch(l.arrayFormat){case"index":return(s,f,c)=>{if(E=/\[(\d*)\]$/.exec(s),s=s.replace(/\[\d*\]$/,""),!E){c[s]=f;return}c[s]===void 0&&(c[s]={}),c[s][E[1]]=f};case"bracket":return(s,f,c)=>{if(E=/(\[\])$/.exec(s),s=s.replace(/\[\]$/,""),!E){c[s]=f;return}if(c[s]===void 0){c[s]=[f];return}c[s]=[].concat(c[s],f)};case"colon-list-separator":return(s,f,c)=>{if(E=/(:list)$/.exec(s),s=s.replace(/:list$/,""),!E){c[s]=f;return}if(c[s]===void 0){c[s]=[f];return}c[s]=[].concat(c[s],f)};case"comma":case"separator":return(s,f,c)=>{const n=typeof f=="string"&&f.includes(l.arrayFormatSeparator),a=typeof f=="string"&&!n&&w(f,l).includes(l.arrayFormatSeparator);f=a?w(f,l):f;const S=n||a?f.split(l.arrayFormatSeparator).map(C=>w(C,l)):f===null?f:w(f,l);c[s]=S};case"bracket-separator":return(s,f,c)=>{const n=/(\[\])$/.test(s);if(s=s.replace(/\[\]$/,""),!n){c[s]=f&&w(f,l);return}const a=f===null?[]:f.split(l.arrayFormatSeparator).map(S=>w(S,l));if(c[s]===void 0){c[s]=a;return}c[s]=[].concat(c[s],a)};default:return(s,f,c)=>{if(c[s]===void 0){c[s]=f;return}c[s]=[].concat(c[s],f)}}}function g(l){if(typeof l!="string"||l.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(l,E){return E.encode?E.strict?t(l):encodeURIComponent(l):l}function w(l,E){return E.decode?r(l):l}function y(l){return Array.isArray(l)?l.sort():typeof l=="object"?y(Object.keys(l)).sort((E,s)=>Number(E)-Number(s)).map(E=>l[E]):l}function v(l){const E=l.indexOf("#");return E!==-1&&(l=l.slice(0,E)),l}function m(l){let E="";const s=l.indexOf("#");return s!==-1&&(E=l.slice(s)),E}function O(l){l=v(l);const E=l.indexOf("?");return E===-1?"":l.slice(E+1)}function p(l,E){return E.parseNumbers&&!Number.isNaN(Number(l))&&typeof l=="string"&&l.trim()!==""?l=Number(l):E.parseBooleans&&l!==null&&(l.toLowerCase()==="true"||l.toLowerCase()==="false")&&(l=l.toLowerCase()==="true"),l}function U(l,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),g(E.arrayFormatSeparator);const s=d(E),f=Object.create(null);if(typeof l!="string"||(l=l.trim().replace(/^[?#&]/,""),!l))return f;for(const c of l.split("&")){if(c==="")continue;let[n,a]=i(E.decode?c.replace(/\+/g," "):c,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?a:w(a,E),s(w(n,E),a,f)}for(const c of Object.keys(f)){const n=f[c];if(typeof n=="object"&&n!==null)for(const a of Object.keys(n))n[a]=p(n[a],E);else f[c]=p(n,E)}return E.sort===!1?f:(E.sort===!0?Object.keys(f).sort():Object.keys(f).sort(E.sort)).reduce((c,n)=>{const a=f[n];return Boolean(a)&&typeof a=="object"&&!Array.isArray(a)?c[n]=y(a):c[n]=a,c},Object.create(null))}e.extract=O,e.parse=U,e.stringify=(l,E)=>{if(!l)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),g(E.arrayFormatSeparator);const s=a=>E.skipNull&&h(l[a])||E.skipEmptyString&&l[a]==="",f=u(E),c={};for(const a of Object.keys(l))s(a)||(c[a]=l[a]);const n=Object.keys(c);return E.sort!==!1&&n.sort(E.sort),n.map(a=>{const S=l[a];return S===void 0?"":S===null?_(a,E):Array.isArray(S)?S.length===0&&E.arrayFormat==="bracket-separator"?_(a,E)+"[]":S.reduce(f(a),[]).join("&"):_(a,E)+"="+_(S,E)}).filter(a=>a.length>0).join("&")},e.parseUrl=(l,E)=>{E=Object.assign({decode:!0},E);const[s,f]=i(l,"#");return Object.assign({url:s.split("?")[0]||"",query:U(O(l),E)},E&&E.parseFragmentIdentifier&&f?{fragmentIdentifier:w(f,E)}:{})},e.stringifyUrl=(l,E)=>{E=Object.assign({encode:!0,strict:!0,[D]:!0},E);const s=v(l.url).split("?")[0]||"",f=e.extract(l.url),c=e.parse(f,{sort:!1}),n=Object.assign(c,l.query);let a=e.stringify(n,E);a&&(a=`?${a}`);let S=m(l.url);return l.fragmentIdentifier&&(S=`#${E[D]?_(l.fragmentIdentifier,E):l.fragmentIdentifier}`),`${s}${a}${S}`},e.pick=(l,E,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[D]:!1},s);const{url:f,query:c,fragmentIdentifier:n}=e.parseUrl(l,s);return e.stringifyUrl({url:f,query:o(c,E),fragmentIdentifier:n},s)},e.exclude=(l,E,s)=>{const f=Array.isArray(E)?c=>!E.includes(c):(c,n)=>!E(c,n);return e.pick(l,f,s)}})(ze);var To=Object.defineProperty,Xr=Object.getOwnPropertySymbols,Io=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable,Jr=(e,t,r)=>t in e?To(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qr=(e,t)=>{for(var r in t||(t={}))Io.call(t,r)&&Jr(e,r,t[r]);if(Xr)for(var r of Xr(t))Mo.call(t,r)&&Jr(e,r,t[r]);return e};const Zr="ReactNative",je={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},nt=" ",Fo=":",kr="/",Ft=2,Ro=1e3,en="js";function Rt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function tn(){return!xr()&&!!Ut()&&navigator.product===Zr}function rn(){return!Rt()&&!!Ut()}function Pt(){return tn()?je.reactNative:Rt()?je.node:rn()?je.browser:je.unknown}function nn(e,t){let r=ze.parse(e);return r=Qr(Qr({},r),t),e=ze.stringify(r),e}function Po(){return Wr()||{name:"",description:"",url:"",icons:[""]}}function Bo(e,t){var r;const i=Pt(),o={protocol:e,version:t,env:i};return i==="browser"&&(o.host=((r=Tt())==null?void 0:r.host)||"unknown"),o}function an(){const e=no();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function on(){var e;const t=Pt();return t===je.browser?[t,((e=Tt())==null?void 0:e.host)||"unknown"].join(":"):t}function sn(e,t,r){const i=an(),o=on();return[[e,t].join("-"),[en,r].join("-"),i,o].join("/")}function Lo({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:o,projectId:h}){const D=r.split("?"),u=sn(e,t,i),d={auth:o,ua:u,projectId:h},g=nn(D[1]||"",d);return D[0]+"?"+g}function jo(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function $o(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function un(e,t=Ft){return cn(e.split(kr),t)}function Vo(e){return un(e).join(nt)}function ge(e,t){return e.filter(r=>t.includes(r)).length===e.length}function cn(e,t=Ft){return e.slice(Math.max(e.length-t,0))}function Ho(e){return Object.fromEntries(e.entries())}function Ko(e){return new Map(Object.entries(e))}function xo(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const Wo=e=>e;function fn(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function zo(e){return e.split(nt).map(t=>fn(t)).join(nt)}function Yo(e,t){return Te.fromMiliseconds((t||Date.now())+Te.toMiliseconds(e))}function Go(e){return Te.fromMiliseconds(Date.now())>=Te.toMiliseconds(e)}function qo(){const e=Te.toMiliseconds(Te.FIVE_MINUTES);let t,r,i;return{resolve:o=>{i&&t&&(clearTimeout(i),t(o))},reject:o=>{i&&r&&(clearTimeout(i),r(o))},done:()=>new Promise((o,h)=>{i=setTimeout(h,e),t=o,r=h})}}function Bt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Xo(e){return Bt("topic",e)}function Jo(e){return Bt("id",e)}function Qo(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function Zo(e,t){return`${e}${t?`:${t}`:""}`}const ko={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},irn:{publish:"irn_publish",subscribe:"irn_subscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}},hn="irn";function es(e){return e?.relay||{protocol:hn}}function ts(e){const t=ko[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var rs=Object.defineProperty,ln=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,dn=(e,t,r)=>t in e?rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,as=(e,t)=>{for(var r in t||(t={}))ns.call(t,r)&&dn(e,r,t[r]);if(ln)for(var r of ln(t))is.call(t,r)&&dn(e,r,t[r]);return e};function Dn(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(i)){const h=o.replace(i,""),D=e[o];r[h]=D}}),r}function os(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),o=e.substring(t+1,r).split("@"),h=typeof r<"u"?e.substring(r):"",D=ze.parse(h);return{protocol:i,topic:o[0],version:parseInt(o[1],10),symKey:D.symKey,relay:Dn(D)}}function En(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(o=>{const h=r+t+o;e[o]&&(i[h]=e[o])}),i}function ss(e){return`${e.protocol}:${e.topic}@${e.version}?`+ze.stringify(as({symKey:e.symKey},En(e.relay)))}function Se(e){const t=[];return e.forEach(r=>{const[i,o]=r.split(":");t.push(`${i}:${o}`)}),t}function _n(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Se(r.accounts)),r.extension&&r.extension.forEach(i=>{t.push(...Se(i.accounts))})}),t}function bn(e,t){const r=[];return Object.values(e).forEach(i=>{Se(i.accounts).includes(t)&&r.push(...i.methods),i.extension&&i.extension.forEach(o=>{Se(o.accounts).includes(t)&&r.push(...o.methods)})}),r}function vn(e,t){const r=[];return Object.values(e).forEach(i=>{Se(i.accounts).includes(t)&&r.push(...i.events),i.extension&&i.extension.forEach(o=>{Se(o.accounts).includes(t)&&r.push(...o.events)})}),r}const us={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3}},cs={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Oe(e,t){const{message:r,code:i}=cs[e];return{message:t?`${r} ${t}`:r,code:i}}function Me(e,t){const{message:r,code:i}=us[e];return{message:t?`${r} ${t}`:r,code:i}}function $e(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Lt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ne(e){return typeof e>"u"}function we(e,t){return t&&Ne(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function jt(e,t){return t&&Ne(e)?!0:typeof e=="number"&&!isNaN(e)}function fs(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),o=Object.keys(r);let h=!0;return ge(o,i)?(i.forEach(D=>{const{accounts:u,methods:d,events:g,extension:_}=e.namespaces[D],w=Se(u),y=r[D];(!ge(y.chains,w)||!ge(y.methods,d)||!ge(y.events,g))&&(h=!1),h&&_&&_.forEach(v=>{var m;const{accounts:O,methods:p,events:U}=v,l=Se(O);(m=y.extension)!=null&&m.find(E=>ge(E.chains,l)&&ge(E.methods,p)&&ge(E.events,U))||(h=!1)})}),h):!1}function it(e){return we(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function gn(e){if(we(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&it(r)}}return!1}function hs(e){if(we(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function ls(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function ds(e){return e?.topic}function Ds(e,t){let r=null;return we(e?.publicKey,!1)||(r=Oe("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function at(e,t){let r=null;return Ne(e?.extension)||(!$e(e.extension)||!e.extension.length)&&(r=Oe("MISSING_OR_INVALID",`${t} extension should be an array of namespaces, or omitted`)),r}function $t(e){let t=!0;return $e(e)?e.length&&(t=e.every(r=>we(r,!1))):t=!1,t}function Vt(e,t,r){let i=null;return $e(t)?t.forEach(o=>{i||(!it(o)||!o.includes(e))&&(i=Me("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):i=Me("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),i}function wn(e,t){let r=null;return Object.entries(e).forEach(([i,o])=>{if(r)return;const h=Vt(i,o?.chains,`${t} requiredNamespace`),D=at(o,t);h?r=h:D?r=D:o.extension&&o.extension.forEach(u=>{if(r)return;const d=Vt(i,u.chains,`${t} extension`);d&&(r=d)})}),r}function Ht(e,t){let r=null;return $e(e)?e.forEach(i=>{r||gn(i)||(r=Me("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Me("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function yn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const o=Ht(i?.accounts,`${t} namespace`),h=at(i,t);o?r=o:h?r=h:i.extension&&i.extension.forEach(D=>{if(r)return;const u=Ht(D.accounts,`${t} extension`);u&&(r=u)})}),r}function Kt(e,t){let r=null;return $t(e?.methods)?$t(e?.events)||(r=Me("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Me("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function xt(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const o=Kt(i,`${t}, namespace`),h=at(i,t);o?r=o:h?r=h:i.extension&&i.extension.forEach(D=>{if(r)return;const u=Kt(D,`${t}, extension`);u&&(r=u)})}),r}function Es(e,t){let r=null;if(e&&Lt(e)){const i=xt(e,t);i&&(r=i);const o=wn(e,t);o&&(r=o)}else r=Oe("MISSING_OR_INVALID",`${t}, requiredNamespaces should be an object with data`);return r}function _s(e,t){let r=null;if(e&&Lt(e)){const i=xt(e,t);i&&(r=i);const o=yn(e,t);o&&(r=o)}else r=Oe("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function mn(e){return we(e.protocol,!0)}function bs(e,t){let r=!1;return t&&!e?r=!0:e&&$e(e)&&e.length&&e.forEach(i=>{r=mn(i)}),r}function vs(e){return typeof e=="number"}function gs(e){return typeof e<"u"&&typeof e!==null}function ws(e){return!(!e||typeof e!="object"||!e.code||!jt(e.code,!1)||!e.message||!we(e.message,!1))}function ys(e){return!(Ne(e)||!we(e.method,!1))}function ms(e){return!(Ne(e)||Ne(e.result)&&Ne(e.error)||!jt(e.id,!1)||!we(e.jsonrpc,!1))}function ps(e){return!(Ne(e)||!we(e.name,!1))}function Ss(e,t){return!(!it(t)||!_n(e).includes(t))}function Os(e,t,r){return we(r,!1)?bn(e,t).includes(r):!1}function As(e,t,r){return we(r,!1)?vn(e,t).includes(r):!1}function Ns(e,t,r){let i=null;const o=Object.keys(e),h=Object.keys(t);return ge(o,h)?o.forEach(D=>{var u;if(i)return;const d=e[D].chains,g=Se(t[D].accounts);ge(d,g)?ge(e[D].methods,t[D].methods)?ge(e[D].events,t[D].events)?e[D].extension&&!t[D].extension?i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces extension doesn't satisfy requiredNamespaces extension for ${D}`):e[D].extension&&t[D].extension&&((u=e[D].extension)==null||u.forEach(({methods:_,events:w,chains:y})=>{var v;i||(v=t[D].extension)!=null&&v.find(m=>{const O=Se(m.accounts);return ge(y,O)&&ge(w,m.events)&&ge(_,m.methods)})||(i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces extension doesn't satisfy requiredNamespaces extension for ${D}`))})):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy requiredNamespaces events for ${D}`):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy requiredNamespaces methods for ${D}`):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy requiredNamespaces chains for ${D}`)}):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces`),i}b.BASE10=pt,b.BASE16=ve,b.BASE64=ke,b.COLON=Fo,b.DEFAULT_DEPTH=Ft,b.EMPTY_SPACE=nt,b.ENV_MAP=je,b.ONE_THOUSAND=Ro,b.REACT_NATIVE_PRODUCT=Zr,b.RELAYER_DEFAULT_PROTOCOL=hn,b.SDK_TYPE=en,b.SLASH=kr,b.TYPE_0=St,b.TYPE_1=Re,b.UTF8=et,b.appendToQueryString=nn,b.assertType=$o,b.calcExpiry=Yo,b.capitalize=zo,b.capitalizeWord=fn,b.createDelayedPromise=qo,b.decodeTypeByte=xe,b.decrypt=Ya,b.deriveSymKey=Ka,b.deserialize=Nt,b.encodeTypeByte=Ir,b.encrypt=za,b.engineEvent=Zo,b.enumify=Wo,b.formatAccountId=Gt,b.formatAccountWithChain=Sn,b.formatChainId=Yt,b.formatExpirerTarget=Bt,b.formatIdTarget=Jo,b.formatMessageContext=Vo,b.formatRelayParams=En,b.formatRelayRpcUrl=Lo,b.formatTopicTarget=Xo,b.formatUA=sn,b.formatUri=ss,b.generateKeyPair=Va,b.generateRandomBytes32=Ha,b.getAccountsChains=Se,b.getAccountsFromNamespaces=An,b.getAddressFromAccount=qt,b.getAddressesFromAccounts=On,b.getAppMetadata=Po,b.getChainFromAccount=Xt,b.getChainsFromAccounts=Jt,b.getChainsFromNamespaces=Nn,b.getChainsFromRequiredNamespaces=Cn,b.getEnvironment=Pt,b.getHttpUrl=jo,b.getInternalError=Oe,b.getJavascriptID=on,b.getJavascriptOS=an,b.getLastItems=cn,b.getNamespacesChains=_n,b.getNamespacesEventsForChainId=vn,b.getNamespacesMethodsForChainId=bn,b.getRelayClientMetadata=Bo,b.getRelayProtocolApi=ts,b.getRelayProtocolName=es,b.getSdkError=Me,b.getUniqueValues=ut,b.hasOverlap=ge,b.hashKey=xa,b.hashMessage=Wa,b.isBrowser=rn,b.isConformingNamespaces=Ns,b.isExpired=Go,b.isNode=Rt,b.isProposalStruct=ls,b.isReactNative=tn,b.isSessionCompatible=fs,b.isSessionStruct=ds,b.isTypeOneEnvelope=qa,b.isUndefined=Ne,b.isValidAccountId=gn,b.isValidAccounts=Ht,b.isValidActions=Kt,b.isValidArray=$e,b.isValidChainId=it,b.isValidChains=Vt,b.isValidController=Ds,b.isValidErrorReason=ws,b.isValidEvent=ps,b.isValidExtension=at,b.isValidId=vs,b.isValidNamespaceAccounts=yn,b.isValidNamespaceActions=xt,b.isValidNamespaceChains=wn,b.isValidNamespaceMethodsOrEvents=$t,b.isValidNamespaces=_s,b.isValidNamespacesChainId=Ss,b.isValidNamespacesEvent=As,b.isValidNamespacesRequest=Os,b.isValidNumber=jt,b.isValidObject=Lt,b.isValidParams=gs,b.isValidRelay=mn,b.isValidRelays=bs,b.isValidRequest=ys,b.isValidRequiredNamespaces=Es,b.isValidResponse=ms,b.isValidString=we,b.isValidUrl=hs,b.mapEntries=xo,b.mapToObj=Ho,b.objToMap=Ko,b.parseAccountId=st,b.parseChainId=zt,b.parseContextNames=un,b.parseExpirerTarget=Qo,b.parseRelayParams=Dn,b.parseUri=os,b.serialize=Mr,b.validateDecoding=Ga,b.validateEncoding=Fr,Object.defineProperty(b,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
